<div class="block-header text-center text-uppercase">
  <h2><i class="md-devices c-indigo"> Devices </i></h2>
</div>
<div class="card">
  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
      <tr>
        <th>Device Identifier</th>
        <th>Device Label</th>
        <th>Survey Count</th>
        <th>Last Survey</th>
        <th>Last Update</th>
        <th>Current Version Name</th>
        <th>Sync Data</th>
      </tr>
      </thead>
      <tbody>
      <% @devices.each do |device| %>
          <tr class="<%= 'danger' if device.danger_zone? %>">
            <td><%= device.identifier %></td>
            <td><%= device.label %></td>
            <td><%= current_project.device_surveys(device).count %></td>
            <td><%= device.last_project_survey(current_project) ? (link_to device.last_project_survey(current_project).uuid, project_survey_path(current_project, device.last_project_survey(current_project))) : '' %></td>
            <td><%= device.device_sync_entries.blank? ? '' : time_ago_in_words(device.last_sync_entry.updated_at) %></td>
            <td><%= device.device_sync_entries.blank? ? '' : device.last_sync_entry.current_version_name %></td>
            <td><%= link_to 'Sync Entries', project_device_device_sync_entries_path(current_project, device) %></td>
          </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>