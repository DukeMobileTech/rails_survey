App.controller 'RulesCtrl', ['$scope', ($scope) ->
  $scope.ruleTypes = () ->
   <%= Rule.rule_type_values(:constant_name) %>

  $scope.participantTypes = () ->
    <%= Settings.rule_types.participant_type_rule.params %>

  $scope.getRuleParams = () ->
    switch $scope.currentRuleType
      when "INSTRUMENT_SURVEY_LIMIT_RULE" then "{\"max_surveys\": #{ $scope.maxSurveys }}"
      when "INSTRUMENT_TIMING_RULE" then "{\"start_time\": \"#{ $scope.startTime }\", \"end_time\": \"#{ $scope.endTime }\" }"
      when "INSTRUMENT_SURVEY_LIMIT_PER_MINUTE_RULE" then "{\"num_surveys\": \"#{ $scope.numSurveys }\", \"minute_interval\": \"#{ $scope.minuteInterval }\" }"
      when "PARTICIPANT_TYPE_RULE" then "{\"participant_type\": \"#{ $scope.participantType }\" }"
      when "INSTRUMENT_LAUNCH_RULE" then "{}"
]
