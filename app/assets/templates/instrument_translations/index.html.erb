<div ng-controller="InstrumentTranslationsCtrl">
  <div ng-include="'instruments/show.html'"></div>
  <h4 class="text-center">Instrument Translations</h4>

  <div class="card">
    <div class="m-1" ng-show="showInstrumentTranslations">
      <div class="btn btn-primary float-right" ng-click="newInstrumentTranslation()">New Translation</div>
    </div>

    <div class="card-body card-padding">
      <div ng-show="showInstrumentTranslations">
        <table class="table table-responsive">
          <thead>
            <tr>
              <th>Language</th>
              <th>Title</th>
              <th>Active</th>
              <th>Created at</th>
              <th>Updated at</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="translation in instrumentTranslations">
              <td>
                <a ui-sref="languageQuestionTranslations({language: translation.language,
                  instrument_id: instrument.id })"
                class="btn btn-primary">{{ translation.language }}</a>
                <%#= link_to Settings.languages.to_h.key(translation.language), project_instrument_instrument_translation_path(current_project, @instrument, translation) %>
              </td>
              <td>{{ translation.title }}</td>
              <td>{{ translation.active }}</td>
              <td>{{ translation.created_at | date:'short' }}</td>
              <td>{{ translation.updated_at | date:'short' }}</td>
              <td>
                <div class="btn btn-danger" ng-click="deleteInstrumentTranslation(translation)">
                  Delete
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div ng-hide="showInstrumentTranslations">
        <div class="row m-1">
          <label class="col-md-4 control-label">Instrument Translation Language</label>
          <div class="col-md-8">
            <select
              ng-model="instrumentTranslation.language"
              ng-options="language[1] as language[0] for language in languages"
            >
            </select>
          </div>
        </div>
        <div class="row m-1">
          <label class="col-md-4 control-label">Instrument Title</label>
          <div class="col-md-8">
            <span>{{instrument.title}}</span>
          </div>
        </div>
        <div class="row m-1">
          <label class="col-md-4 control-label">Translated Instrument Title</label>
          <div class="col-md-8">
            <input class="form-control input-sm" type="text" ng-model="instrumentTranslation.title" required />
          </div>
        </div>
        <div class="row m-1">
          <label class="col-md-4 control-label">Active</label>
          <div class="col-md-8">
            <input type="checkbox" ng-model="instrumentTranslation.active" />
          </div>
        </div>
        <div class="row m-1">
          <div class="btn btn-success pull-right" ng-click="saveInstrumentTranslation(instrumentTranslation)">Save</div>
        </div>
      </div>
    </div>
  </div>
</div>
