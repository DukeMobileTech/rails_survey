check process sidekiq-0 with pidfile /var/www/rails_survey/current/tmp/pids/sidekiq-0.pid
  start program = "/bin/bash -c cd /var/www/rails_survey/current/; bundle exec sidekiq -P /var/www/rails_survey/current/tmp/pids/sidekiq-0.pid" with timeout 30 seconds
  stop program = "/bin/bash -c kill -s TERM `cat /var/www/rails_survey/current/tmp/pids/sidekiq-0.pid`" with timeout 30 seconds
  if totalmem is greater than 800 MB for 2 cycles then restart
  group sidekiq

check process sidekiq-1 with pidfile /var/www/rails_survey/current/tmp/pids/sidekiq-1.pid
  start program = "/bin/bash -c cd /var/www/rails_survey/current/; bundle exec sidekiq -P /var/www/rails_survey/current/tmp/pids/sidekiq-1.pid" with timeout 30 seconds
  stop program = "/bin/bash -c kill -s TERM `cat /var/www/rails_survey/current/tmp/pids/sidekiq-1.pid`" with timeout 30 seconds
  if totalmem is greater than 800 MB for 2 cycles then restart
  group sidekiq
