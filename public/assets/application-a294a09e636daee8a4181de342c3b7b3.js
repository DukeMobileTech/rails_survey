!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i=t(s),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),r=i.data("modal"),s=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new e(this,s)),"string"==typeof n?r[n]():s.show&&r.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){"use strict";function e(){t(".dropdown-backdrop").remove(),t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",r=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,s=t(this);if(!s.is(".disabled, :disabled"))return i=n(s),r=i.hasClass("open"),e(),r||("ontouchstart"in document.documentElement&&t('<div class="dropdown-backdrop"/>').insertBefore(t(this)).on("click",e),i.toggleClass("open")),s.focus(),!1},keydown:function(e){var r,s,o,a,l;if(/(38|40|27)/.test(e.keyCode)&&(r=t(this),e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled"))){if(o=n(r),a=o.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&o.find(i).focus(),r.click();s=t("[role=menu] li:not(.divider):visible a",o),s.length&&(l=s.index(s.filter(":focus")),38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<s.length-1&&l++,~l||(l=0),s.eq(l).focus())}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(t){"use strict";function e(e,n){var i,r=t.proxy(this.process,this),s=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,n),this.$scrollElement=s.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(i=t(e).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,n=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),r=/^#\w/.test(i)&&t(i);return r&&r.length&&[[r.position().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,s=this.targets,o=this.activeTarget;if(e>=i)return o!=(t=s.last()[0])&&this.activate(t);for(t=r.length;t--;)o!=s[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(s[t])},activate:function(e){var n,i;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("scrollspy"),s="object"==typeof n&&n;r||i.data("scrollspy",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,s=r.closest("ul:not(.dropdown-menu)"),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=s.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(o),this.activate(r.parent("li"),s),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var s=n.find("> .active"),o=i&&t.support.transition&&s.hasClass("fade");o?s.one(t.support.transition.end,r):r(),s.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,s,o,a,l;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,o=this.options.trigger.split(" "),l=o.length;l--;)a=o[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focus",s="hover"==a?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n,i=t.fn[this.type].defaults,r={};return this._options&&t.each(this._options,function(t,e){i[t]!=e&&(r[t]=e)},this),n=t(e.currentTarget)[this.type](r).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var e,n,i,r,s,o,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),n=this.getPosition(),i=e[0].offsetWidth,r=e[0].offsetHeight,s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":o={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":o={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":o={top:n.top+n.height/2-r/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n,i,r,s,o=this.tip(),a=o[0].offsetWidth,l=o[0].offsetHeight;o.offset(t).addClass(e).addClass("in"),n=o[0].offsetWidth,i=o[0].offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,s=!0),"bottom"==e||"top"==e?(r=0,t.left<0&&(r=-2*t.left,t.left=0,o.offset(t),n=o[0].offsetWidth,i=o[0].offsetHeight),this.replaceArrow(r-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),s&&o.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("tooltip"),s="object"==typeof n&&n;r||i.data("tooltip",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=("function"==typeof n.content?n.content.call(e[0]):n.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("popover"),s="object"==typeof n&&n;r||i.data("popover",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("button"),s="object"==typeof n&&n;r||i.data("button",r=new e(this,s)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,s=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),s=t.extend({},t.fn.collapse.defaults,i.data(),"object"==typeof n&&n);r||i.data("collapse",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(r).data("collapse")?"toggle":i.data();i[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(s)})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var n=this.getActiveIndex(),i=this;if(!(e>this.$items.length-1||0>e))return this.sliding?this.$element.one("slid",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,n){var i,r=this.$element.find(".item.active"),s=n||r[e](),o=this.interval,a="next"==e?"left":"right",l="next"==e?"first":"last",u=this;if(this.sliding=!0,o&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),i=t.Event("slide",{relatedTarget:s[0],direction:a}),!s.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(u.$indicators.children()[u.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;s.addClass(e),s[0].offsetWidth,r.addClass(a),s.addClass(a),this.$element.one(t.support.transition.end,function(){s.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),s=t.extend({},t.fn.carousel.defaults,"object"==typeof n&&n),o="string"==typeof n?n:s.slide;r||i.data("carousel",r=new e(this,s)),"number"==typeof n?r.to(n):o?r[o]():s.interval&&r.pause().cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i,r=t(this),s=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=t.extend({},s.data(),r.data());s.carousel(o),(i=r.attr("data-slide-to"))&&s.data("carousel").pause().to(i).cycle(),e.preventDefault()})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),r=i.data("typeahead"),s="object"==typeof n&&n;r||i.data("typeahead",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=t.extend({},t.fn.affix.defaults,n),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),s=this.options.offset,o=s.bottom,a=s.top,l="affix affix-top affix-bottom";"object"!=typeof s&&(o=a=s),"function"==typeof a&&(a=s.top()),"function"==typeof o&&(o=s.bottom()),e=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=o&&r.top+this.$element.height()>=n-o?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-i:null,this.$element.removeClass(l).addClass("affix"+(e?"-"+e:"")))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("affix"),s="object"==typeof n&&n;r||i.data("affix",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,o=i.push,a=i.slice,l=i.concat,u=r.toString,h=r.hasOwnProperty,c=i.forEach,f=i.map,d=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,_=i.lastIndexOf,b=Array.isArray,w=Object.keys,x=s.bind,k=function(t){return t instanceof k?t:this instanceof k?(this._wrapped=t,void 0):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.4";var C=k.each=k.forEach=function(t,e,i){if(null!=t)if(c&&t.forEach===c)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var o in t)if(k.has(t,o)&&e.call(i,t[o],o,t)===n)return};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:f&&t.map===f?t.map(e,n):(C(t,function(t,r,s){i[i.length]=e.call(n,t,r,s)}),i)};var M="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return i&&(e=k.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(C(t,function(t,s,o){r?n=e.call(i,n,t,s,o):(n=t,r=!0)}),!r)throw new TypeError(M);return n},k.reduceRight=k.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=k.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var o=k.keys(t);s=o.length}if(C(t,function(a,l,u){l=o?o[--s]:--s,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(M);return n},k.find=k.detect=function(t,e,n){var i;return S(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,r,s){e.call(n,t,r,s)&&(i[i.length]=t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(C(t,function(t,s,o){return(r=r&&e.call(i,t,s,o))?void 0:n}),!!r)};var S=k.some=k.any=function(t,e,i){e||(e=k.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(C(t,function(t,s,o){return r||(r=e.call(i,t,s,o))?n:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):S(t,function(t){return t===e})},k.invoke=function(t,e){var n=a.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e,n){return k.isEmpty(e)?n?null:[]:k[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},k.findWhere=function(t,e){return k.where(t,e,!0)},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return C(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;o>=i.computed&&(i={value:t,computed:o})}),i.value},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return C(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;i.computed>o&&(i={value:t,computed:o})}),i.value},k.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i};var P=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,n){var i=P(e);return k.pluck(k.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var T=function(t,e,n,i){var r={},s=P(e||k.identity);return C(t,function(e,o){var a=s.call(n,e,o,t);i(r,a,e)}),r};k.groupBy=function(t,e,n){return T(t,e,n,function(t,e,n){(k.has(t,e)?t[e]:t[e]=[]).push(n)})},k.countBy=function(t,e,n){return T(t,e,n,function(t,e){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,n,i){n=null==n?k.identity:P(n);for(var r=n.call(i,e),s=0,o=t.length;o>s;){var a=s+o>>>1;r>n.call(i,t[a])?s=a+1:o=a}return s},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)
},k.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var E=function(t,e,n){return C(t,function(t){k.isArray(t)?e?o.apply(n,t):E(t,e,n):n.push(t)}),n};k.flatten=function(t,e){return E(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var r=n?k.map(t,n,i):t,s=[],o=[];return C(r,function(n,i){(e?i&&o[o.length-1]===n:k.contains(o,n))||(o.push(n),s.push(t[i]))}),s},k.union=function(){return k.uniq(l.apply(i,arguments))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=l.apply(i,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=a.call(arguments),e=k.max(k.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=k.pluck(t,""+i);return n},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=Array(i);i>r;)s[r++]=t,t+=n;return s},k.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},k.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},k.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=k.functions(t)),C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e){var n,i,r,s,o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)};return function(){var l=new Date,u=e-(l-o);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,o=l,s=t.apply(n,i)):r||(r=setTimeout(a,u)),s}},k.debounce=function(t,e,n){var i,r;return function(){var s=this,o=arguments,a=function(){i=null,n||(r=t.apply(s,o))},l=n&&!i;return clearTimeout(i),i=setTimeout(a,e),l&&(r=t.apply(s,o)),r}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var n=[t];return o.apply(n,arguments),e.apply(this,n)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},k.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)k.has(t,n)&&(e[e.length]=n);return e},k.values=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push(t[n]);return e},k.pairs=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push([n,t[n]]);return e},k.invert=function(t){var e={};for(var n in t)k.has(t,n)&&(e[t[n]]=n);return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var z=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;n.push(t),i.push(e);var o=0,a=!0;if("[object Array]"==r){if(o=t.length,a=o==e.length)for(;o--&&(a=z(t[o],e[o],n,i)););}else{var l=t.constructor,h=e.constructor;if(l!==h&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(h)&&h instanceof h))return!1;for(var c in t)if(k.has(t,c)&&(o++,!(a=k.has(e,c)&&z(t[c],e[c],n,i))))break;if(a){for(c in e)if(k.has(e,c)&&!o--)break;a=!o}}return n.pop(),i.pop(),a};k.isEqual=function(t,e){return z(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=b||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=k.invert(I.escape);var R={escape:RegExp("["+k.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+k.keys(I.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(R[t],function(e){return I[t][e]})}}),k.result=function(t,e){if(null==t)return null;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){C(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),L.call(this,n.apply(k,t))}})};var $=0;k.uniqueId=function(t){var e=++$+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var r=RegExp([(n.escape||D).source,(n.interpolate||D).source,(n.evaluate||D).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(e,n,i,r,a){return o+=t.slice(s,a).replace(N,function(t){return"\\"+A[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),s=a+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return i(e,k);var l=function(t){return i.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},k.chain=function(t){return k(t).chain()};var L=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){function t(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function e(t){for(var e=-1,n=t.length,i=[];++e<n;)i.push(t[e]);return i}function n(t){return Array.prototype.slice.call(t)}function i(){}function r(t){return t}function s(){return this}function o(){return!0}function a(t){return"function"==typeof t?t:function(){return t}}function l(t,e,n){return function(){var i=n.apply(e,arguments);return arguments.length?t:i}}function u(t){return null!=t&&!isNaN(t)}function h(t){return t.length}function c(t){return null==t}function f(t){return t.trim().replace(/\s+/g," ")}function d(t){for(var e=1;t*e%1;)e*=10;return e}function p(){}function g(t){function e(){for(var e,i=n,r=-1,s=i.length;++r<s;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],r=new i;return e.on=function(e,i){var s,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function m(t,e){return e-(t?1+Math.floor(Math.log(t+Math.pow(10,1+Math.floor(Math.log(t)/Math.LN10)-e))/Math.LN10):1)}function v(t){return t+""}function y(t){for(var e=t.lastIndexOf("."),n=e>=0?t.substring(e):(e=t.length,""),i=[];e>0;)i.push(t.substring(e-=3,e+3));return i.reverse().join(",")+n}function _(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function b(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function w(t){return function(e){return 1-t(1-e)}}function x(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function k(t){return t}function C(t){return function(e){return Math.pow(e,t)}}function M(t){return 1-Math.cos(t*Math.PI/2)}function S(t){return Math.pow(2,10*(t-1))}function P(t){return 1-Math.sqrt(1-t*t)}function T(t,e){var n;return arguments.length<2&&(e=.45),arguments.length<1?(t=1,n=e/4):n=e/(2*Math.PI)*Math.asin(1/t),function(i){return 1+t*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Math.PI/e)}}function E(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function z(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function I(){d3.event.stopPropagation(),d3.event.preventDefault()}function R(){for(var t,e=d3.event;t=e.sourceEvent;)e=t;return e}function $(t){for(var e=new p,n=0,i=arguments.length;++n<i;)e[arguments[n]]=g(e);return e.of=function(n,i){return function(r){try{var s=r.sourceEvent=d3.event;r.target=t,d3.event=r,e[r.type].apply(n,i)}finally{d3.event=s}}},e}function D(t){var e=[t.a,t.b],n=[t.c,t.d],i=N(e),r=A(e,n),s=N(L(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*os,this.translate=[t.e,t.f],this.scale=[i,s],this.skew=s?Math.atan2(r,s)*os:0}function A(t,e){return t[0]*e[0]+t[1]*e[1]}function N(t){var e=Math.sqrt(A(t,t));return e&&(t[0]/=e,t[1]/=e),e}function L(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function H(t){return"transform"==t?d3.interpolateTransform:d3.interpolate}function O(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function j(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function q(t,e,n){return new W(t,e,n)}function W(t,e,n){this.r=t,this.g=e,this.b=n}function F(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function U(t,e,n){var i,r,s,o=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(Q(r[0]),Q(r[1]),Q(r[2]))}return(s=us.get(t))?e(s.r,s.g,s.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(o=t.charAt(1),o+=o,a=t.charAt(2),a+=a,l=t.charAt(3),l+=l):7===t.length&&(o=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7)),o=parseInt(o,16),a=parseInt(a,16),l=parseInt(l,16)),e(o,a,l))}function B(t,e,n){var i,r,s=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),a=o-s,l=(o+s)/2;return a?(r=.5>l?a/(o+s):a/(2-o-s),i=t==o?(e-n)/a+(n>e?6:0):e==o?(n-t)/a+2:(t-e)/a+4,i*=60):r=i=0,X(i,r,l)}function Y(t,e,n){t=G(t),e=G(e),n=G(n);var i=oe((.4124564*t+.3575761*e+.1804375*n)/cs),r=oe((.2126729*t+.7151522*e+.072175*n)/fs),s=oe((.0193339*t+.119192*e+.9503041*n)/ds);return ee(116*r-16,500*(i-r),200*(r-s))}function G(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Q(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function X(t,e,n){return new V(t,e,n)}function V(t,e,n){this.h=t,this.s=e,this.l=n}function K(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?s+(o-s)*t/60:180>t?o:240>t?s+(o-s)*(240-t)/60:s}function r(t){return Math.round(255*i(t))}var s,o;return t%=360,0>t&&(t+=360),e=0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,s=2*n-o,q(r(t+120),r(t),r(t-120))}function Z(t,e,n){return new J(t,e,n)}function J(t,e,n){this.h=t,this.c=e,this.l=n}function te(t,e,n){return ee(n,Math.cos(t*=Math.PI/180)*e,Math.sin(t)*e)}function ee(t,e,n){return new ne(t,e,n)}function ne(t,e,n){this.l=t,this.a=e,this.b=n}function ie(t,e,n){var i=(t+16)/116,r=i+e/500,s=i-n/200;return r=se(r)*cs,i=se(i)*fs,s=se(s)*ds,q(ae(3.2404542*r-1.5371385*i-.4985314*s),ae(-.969266*r+1.8760108*i+.041556*s),ae(.0556434*r-.2040259*i+1.0572252*s))}function re(t,e,n){return Z(Math.atan2(n,e)/Math.PI*180,Math.sqrt(e*e+n*n),t)}function se(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function oe(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ae(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function le(t){return Yr(t,_s),t}function ue(t){return function(){return ps(t,this)}}function he(t){return function(){return gs(t,this)}}function ce(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function s(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=d3.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?a:o:t.local?s:r}function fe(t){return new RegExp("(?:^|\\s+)"+d3.requote(t)+"(?:\\s+|$)","g")}function de(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=t.trim().split(/\s+/).map(pe);var r=t.length;return"function"==typeof e?i:n}function pe(t){var e=fe(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.className,s=null!=r.baseVal,o=s?r.baseVal:r;i?(e.lastIndex=0,e.test(o)||(o=f(o+" "+t),s?r.baseVal=o:n.className=o)):o&&(o=f(o.replace(e," ")),s?r.baseVal=o:n.className=o)}}function ge(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function s(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?s:r}function me(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function ve(t){return{__data__:t}}function ye(t){return function(){return ys(this,t)}}function _e(t){return arguments.length||(t=d3.ascending),function(e,n){return t(e&&e.__data__,n&&n.__data__)}}function be(t,e,n){function i(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function r(){function r(t){var n=d3.event;d3.event=t,a[0]=o.__data__;try{e.apply(o,a)}finally{d3.event=n}}var o=this,a=arguments;i.call(this),this.addEventListener(t,this[s]=r,r.$=n),r._=e}var s="__on"+t,o=t.indexOf(".");return o>0&&(t=t.substring(0,o)),e?r:i}function we(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,s=t[n],o=0,a=s.length;a>o;o++)(r=s[o])&&e(r,o,n);return t}function xe(t){return Yr(t,ws),t}function ke(t,e,n){Yr(t,xs);var r=new i,s=d3.dispatch("start","end"),o=zs;return t.id=e,t.time=n,t.tween=function(e,n){return arguments.length<2?r.get(e):(null==n?r.remove(e):r.set(e,n),t)},t.ease=function(e){return arguments.length?(o="function"==typeof e?e:d3.ease.apply(d3,arguments),t):o},t.each=function(e,n){return arguments.length<2?Ce.call(t,e):(s.on(e,n),t)},d3.timer(function(i){return we(t,function(t,a){function l(i){return p.active>e?h():(p.active=e,r.forEach(function(e,n){(n=n.call(t,g,a))&&c.push(n)}),s.start.call(t,g,a),u(i)||d3.timer(u,0,n),1)}function u(n){if(p.active!==e)return h();for(var i=(n-f)/d,r=o(i),l=c.length;l>0;)c[--l].call(t,r);return i>=1?(h(),Cs=e,s.end.call(t,g,a),Cs=0,1):void 0}function h(){return--p.count||delete t.__transition__,1}var c=[],f=t.delay,d=t.duration,p=(t=t.node).__transition__||(t.__transition__={active:0,count:0}),g=t.__data__;++p.count,i>=f?l(i):d3.timer(l,f,n)})},0,n),t}function Ce(t){var e=Cs,n=zs,i=Ts,r=Es;return Cs=this.id,zs=this.ease(),we(this,function(e,n,i){Ts=e.delay,Es=e.duration,t.call(e=e.node,e.__data__,n,i)}),Cs=e,zs=n,Ts=i,Es=r,this}function Me(t,e,n){return""!=n&&$s}function Se(t,e){return d3.tween(t,H(e))}function Pe(){for(var t,e=Date.now(),n=Ds;n;)t=e-n.then,t>=n.delay&&(n.flush=n.callback(t)),n=n.next;var i=Te()-e;i>24?(isFinite(i)&&(clearTimeout(Rs),Rs=setTimeout(Pe,i)),Is=0):(Is=1,As(Pe))}function Te(){for(var t=null,e=Ds,n=1/0;e;)e.flush?e=t?t.next=e.next:Ds=e.next:(n=Math.min(n,e.then+e.delay),e=(t=e).next);return n}function Ee(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Ns&&(window.scrollX||window.scrollY)){n=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=n[0][0].getScreenCTM();Ns=!(r.f||r.e),n.remove()}return Ns?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function ze(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ie(t){return t.rangeExtent?t.rangeExtent():ze(t.range())}function Re(t,e){var n,i=0,r=t.length-1,s=t[i],o=t[r];return s>o&&(n=i,i=r,r=n,n=s,s=o,o=n),(e=e(o-s))&&(t[i]=e.floor(s),t[r]=e.ceil(o)),t}function $e(){return Math}function De(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?qe:je,l=i?j:O;return o=r(t,e,l,n),a=r(e,t,l,d3.interpolate),s}function s(t){return o(t)}var o,a;return s.invert=function(t){return a(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},s.range=function(t){return arguments.length?(e=t,r()):e},s.rangeRound=function(t){return s.range(t).interpolate(d3.interpolateRound)},s.clamp=function(t){return arguments.length?(i=t,r()):i},s.interpolate=function(t){return arguments.length?(n=t,r()):n},s.ticks=function(e){return He(t,e)},s.tickFormat=function(e){return Oe(t,e)},s.nice=function(){return Re(t,Ne),r()},s.copy=function(){return De(t,e,n,i)},r()}function Ae(t,e){return d3.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ne(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function Le(t,e){var n=ze(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),s=e/i*r;return.15>=s?r*=10:.35>=s?r*=5:.75>=s&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function He(t,e){return d3.range.apply(d3,Le(t,e))}function Oe(t,e){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Le(t,e)[2])/Math.LN10+.01))+"f")}function je(t,e,n,i){var r=n(t[0],t[1]),s=i(e[0],e[1]);return function(t){return s(r(t))}}function qe(t,e,n,i){var r=[],s=[],o=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=a;)r.push(n(t[o-1],t[o])),s.push(i(e[o-1],e[o]));return function(e){var n=d3.bisect(t,e,1,a)-1;return s[n](r[n](e))}}function We(t,e){function n(n){return t(e(n))}var i=e.pow;return n.invert=function(e){return i(t.invert(e))},n.domain=function(r){return arguments.length?(e=r[0]<0?Ue:Fe,i=e.pow,t.domain(r.map(e)),n):t.domain().map(i)},n.nice=function(){return t.domain(Re(t.domain(),$e)),n},n.ticks=function(){var n=ze(t.domain()),r=[];if(n.every(isFinite)){var s=Math.floor(n[0]),o=Math.ceil(n[1]),a=i(n[0]),l=i(n[1]);if(e===Ue)for(r.push(i(s));s++<o;)for(var u=9;u>0;u--)r.push(i(s)*u);else{for(;o>s;s++)for(var u=1;10>u;u++)r.push(i(s)*u);r.push(i(s))}for(s=0;r[s]<a;s++);for(o=r.length;r[o-1]>l;o--);r=r.slice(s,o)}return r},n.tickFormat=function(t,r){if(arguments.length<2&&(r=Ls),arguments.length<1)return r;var s,o=Math.max(.1,t/n.ticks().length),a=e===Ue?(s=-1e-12,Math.floor):(s=1e-12,Math.ceil);return function(t){return t/i(a(e(t)+s))<=o?r(t):""}},n.copy=function(){return We(t.copy(),e)},Ae(n,t)}function Fe(t){return Math.log(0>t?0:t)/Math.LN10}function Ue(t){return-Math.log(t>0?0:-t)/Math.LN10}function Be(t,e){function n(e){return t(i(e))}var i=Ye(e),r=Ye(1/e);return n.invert=function(e){return r(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e.map(i)),n):t.domain().map(r)},n.ticks=function(t){return He(n.domain(),t)},n.tickFormat=function(t){return Oe(n.domain(),t)},n.nice=function(){return n.domain(Re(n.domain(),Ne))},n.exponent=function(t){if(!arguments.length)return e;var s=n.domain();return i=Ye(e=t),r=Ye(1/e),n.domain(s)},n.copy=function(){return Be(t.copy(),e)},Ae(n,t)}function Ye(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function Ge(t,e){function n(e){return o[((s.get(e)||s.set(e,t.push(e)))-1)%o.length]}function r(e,n){return d3.range(t.length).map(function(t){return e+n*t})}var s,o,a;return n.domain=function(r){if(!arguments.length)return t;t=[],s=new i;for(var o,a=-1,l=r.length;++a<l;)s.has(o=r[a])||s.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],h=(u-l)/(Math.max(1,t.length-1)+s);return o=r(t.length<2?(l+u)/2:l+h*s/2,h),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],h=i[u-0],c=i[1-u],f=(c-h)/(t.length-s+2*l);return o=r(h+f*l,f),u&&o.reverse(),a=f*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],h=i[u-0],c=i[1-u],f=Math.floor((c-h)/(t.length-s+2*l)),d=c-h-(t.length-s)*f;return o=r(h+Math.round(d/2),f),u&&o.reverse(),a=Math.round(f*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return ze(e.a[0])},n.copy=function(){return Ge(t,e)},n.domain(t)}function Qe(t,e){function n(){var n=0,s=(t.length,e.length);for(r=[];++n<s;)r[n-1]=d3.quantile(t,n/s);return i}function i(t){return isNaN(t=+t)?0/0:e[d3.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(d3.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.copy=function(){return Qe(t,e)},n()}function Xe(t,e,n){function i(e){return n[Math.max(0,Math.min(o,Math.floor(s*(e-t))))]}function r(){return s=n.length/(e-t),o=n.length-1,i}var s,o;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.copy=function(){return Xe(t,e,n)},r()}function Ve(t,e){function n(n){return e[d3.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Ve(t,e)},n}function Ke(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return He(t,e)},e.tickFormat=function(e){return Oe(t,e)},e.copy=function(){return Ke(t)},e}function Ze(t){return t.innerRadius}function Je(t){return t.outerRadius}function tn(t){return t.startAngle}function en(t){return t.endAngle}function nn(t){function e(e){function o(){h.push("M",s(t(c),u))}for(var l,h=[],c=[],f=-1,d=e.length,p=a(n),g=a(i);++f<d;)r.call(this,l=e[f],f)?c.push([+p.call(this,l,f),+g.call(this,l,f)]):c.length&&(o(),c=[]);return c.length&&o(),h.length?h.join(""):null}var n=rn,i=sn,r=o,s=on,l=s.key,u=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Us.get(t)||on).key,e):l},e.tension=function(t){return arguments.length?(u=t,e):u},e}function rn(t){return t[0]}function sn(t){return t[1]}function on(t){return t.join("L")}function an(t){return on(t)+"Z"}function ln(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function un(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function hn(t,e){return t.length<4?on(t):t[1]+dn(t.slice(1,t.length-1),pn(t,e))}function cn(t,e){return t.length<3?on(t):t[0]+dn((t.push(t[0]),t),pn([t[t.length-2]].concat(t,[t[1]]),e))}function fn(t,e){return t.length<3?on(t):t[0]+dn(t,pn(t,e))}function dn(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return on(t);var n=t.length!=e.length,i="",r=t[0],s=t[1],o=e[0],a=o,l=1;if(n&&(i+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],r=t[1],l=2),e.length>1){a=e[1],s=t[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(s[0]-a[0])+","+(s[1]-a[1])+","+s[0]+","+s[1];for(var u=2;u<e.length;u++,l++)s=t[l],a=e[u],i+="S"+(s[0]-a[0])+","+(s[1]-a[1])+","+s[0]+","+s[1]}if(n){var h=t[l];i+="Q"+(s[0]+2*a[0]/3)+","+(s[1]+2*a[1]/3)+","+h[0]+","+h[1]}return i}function pn(t,e){for(var n,i=[],r=(1-e)/2,s=t[0],o=t[1],a=1,l=t.length;++a<l;)n=s,s=o,o=t[a],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function gn(t){if(t.length<3)return on(t);var e=1,n=t.length,i=t[0],r=i[0],s=i[1],o=[r,r,r,(i=t[1])[0]],a=[s,s,s,i[1]],l=[r,",",s];for(bn(l,o,a);++e<n;)i=t[e],o.shift(),o.push(i[0]),a.shift(),a.push(i[1]),bn(l,o,a);for(e=-1;++e<2;)o.shift(),o.push(i[0]),a.shift(),a.push(i[1]),bn(l,o,a);return l.join("")}function mn(t){if(t.length<4)return on(t);for(var e,n=[],i=-1,r=t.length,s=[0],o=[0];++i<3;)e=t[i],s.push(e[0]),o.push(e[1]);for(n.push(_n(Gs,s)+","+_n(Gs,o)),--i;++i<r;)e=t[i],s.shift(),s.push(e[0]),o.shift(),o.push(e[1]),bn(n,s,o);return n.join("")}function vn(t){for(var e,n,i=-1,r=t.length,s=r+4,o=[],a=[];++i<4;)n=t[i%r],o.push(n[0]),a.push(n[1]);for(e=[_n(Gs,o),",",_n(Gs,a)],--i;++i<s;)n=t[i%r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),bn(e,o,a);return e.join("")}function yn(t,e){var n=t.length-1;if(n)for(var i,r,s=t[0][0],o=t[0][1],a=t[n][0]-s,l=t[n][1]-o,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(s+r*a),i[1]=e*i[1]+(1-e)*(o+r*l);return gn(t)}function _n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function bn(t,e,n){t.push("C",_n(Bs,e),",",_n(Bs,n),",",_n(Ys,e),",",_n(Ys,n),",",_n(Gs,e),",",_n(Gs,n))}function wn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function xn(t){for(var e=0,n=t.length-1,i=[],r=t[0],s=t[1],o=i[0]=wn(r,s);++e<n;)i[e]=(o+(o=wn(r=s,s=t[e+1])))/2;return i[e]=o,i}function kn(t){for(var e,n,i,r,s=[],o=xn(t),a=-1,l=t.length-1;++a<l;)e=wn(t[a],t[a+1]),Math.abs(e)<1e-6?o[a]=o[a+1]=0:(n=o[a]/e,i=o[a+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),o[a]=r*n,o[a+1]=r*i));for(a=-1;++a<=l;)r=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),s.push([r||0,o[a]*r||0]);return s}function Cn(t){return t.length<3?on(t):t[0]+dn(t,kn(t))}function Mn(t){for(var e,n,i,r=-1,s=t.length;++r<s;)e=t[r],n=e[0],i=e[1]+Ws,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Sn(t){function e(e){function o(){m.push("M",u(t(y),d),f,c(t(v.reverse()),d),"Z")}for(var h,p,g,m=[],v=[],y=[],_=-1,b=e.length,w=a(n),x=a(r),k=n===i?function(){return p}:a(i),C=r===s?function(){return g}:a(s);++_<b;)l.call(this,h=e[_],_)?(v.push([p=+w.call(this,h,_),g=+x.call(this,h,_)]),y.push([+k.call(this,h,_),+C.call(this,h,_)])):v.length&&(o(),v=[],y=[]);return v.length&&o(),m.length?m.join(""):null}var n=rn,i=rn,r=0,s=sn,l=o,u=on,h=u.key,c=u,f="L",d=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=s=t,e):s},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(s=t,e):s},e.defined=function(t){return arguments.length?(l=t,e):l},e.interpolate=function(t){return arguments.length?(h="function"==typeof t?u=t:(u=Us.get(t)||on).key,c=u.reverse||u,f=u.closed?"M":"L",e):h},e.tension=function(t){return arguments.length?(d=t,e):d},e}function Pn(t){return t.source}function Tn(t){return t.target}function En(t){return t.radius}function zn(t){return[t.x,t.y]}function In(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+Ws;return[n*Math.cos(i),n*Math.sin(i)]}}function Rn(){return 64}function $n(){return"circle"}function Dn(t){var e=Math.sqrt(t/Math.PI);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function An(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Nn(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Ln(t,e,n){if(i=[],n&&e.length>1){for(var i,r,s,o=ze(t.domain()),a=-1,l=e.length,u=(e[1]-e[0])/++n;++a<l;)for(r=n;--r>0;)(s=+e[a]-r*u)>=o[0]&&i.push(s);for(--a,r=0;++r<n&&(s=+e[a]+r*u)<o[1];)i.push(s)}return i}function Hn(){Js||(Js=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var t,e=d3.event;try{Js.scrollTop=1e3,Js.dispatchEvent(e),t=1e3-Js.scrollTop}catch(n){t=e.wheelDelta||5*-e.detail}return t}function On(t){for(var e=t.source,n=t.target,i=qn(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var s=r.length;n!==i;)r.splice(s,0,n),n=n.parent;return r}function jn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function qn(t,e){if(t===e)return t;for(var n=jn(t),i=jn(e),r=n.pop(),s=i.pop(),o=null;r===s;)o=r,r=n.pop(),s=i.pop();return o}function Wn(t){t.fixed|=2}function Fn(t){t.fixed&=1}function Un(t){t.fixed|=4}function Bn(t){t.fixed&=3}function Yn(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var s,o=t.nodes,a=o.length,l=-1;++l<a;)s=o[l],null!=s&&(Yn(s,e,n),t.charge+=s.charge,i+=s.charge*s.cx,r+=s.charge*s.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Gn(){return 20}function Qn(){return 1}function Xn(t){return t.x}function Vn(t){return t.y}function Kn(t,e,n){t.y0=e,t.y=n}function Zn(t){return d3.range(t.length)}function Jn(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function ti(t){for(var e,n=1,i=0,r=t[0][1],s=t.length;s>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function ei(t){return t.reduce(ni,0)}function ni(t,e){return t+e[1]}function ii(t,e){return ri(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ri(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,s=[];++n<=e;)s[n]=r*n+i;return s}function si(t){return[d3.min(t),d3.max(t)]}function oi(t,e){return d3.rebind(t,e,"sort","children","value"),t.links=hi,t.nodes=function(e){return ro=!0,(t.nodes=t)(e)},t}function ai(t){return t.children}function li(t){return t.value}function ui(t,e){return e.value-t.value}function hi(t){return d3.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}
})}))}function ci(t,e){return t.value-e.value}function fi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function di(t,e){t._pack_next=e,e._pack_prev=t}function pi(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-n*n-i*i>.001}function gi(t){function e(t){h=Math.min(t.x-t.r,h),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(u=n.length)){var n,i,r,s,o,a,l,u,h=1/0,c=-1/0,f=1/0,d=-1/0;if(n.forEach(mi),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(s=n[2],_i(i,r,s),e(s),fi(i,s),i._pack_prev=s,fi(s,r),r=i._pack_next,o=3;u>o;o++){_i(i,r,s=n[o]);var p=0,g=1,m=1;for(a=r._pack_next;a!==r;a=a._pack_next,g++)if(pi(a,s)){p=1;break}if(1==p)for(l=i._pack_prev;l!==a._pack_prev&&!pi(l,s);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<i.r?di(i,r=a):di(i=l,r),o--):(fi(i,s),r=s,e(s))}var v=(h+c)/2,y=(f+d)/2,_=0;for(o=0;u>o;o++)s=n[o],s.x-=v,s.y-=y,_=Math.max(_,s.r+Math.sqrt(s.x*s.x+s.y*s.y));t.r=_,n.forEach(vi)}}function mi(t){t._pack_next=t._pack_prev=t}function vi(t){delete t._pack_next,delete t._pack_prev}function yi(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var s=-1,o=r.length;++s<o;)yi(r[s],e,n,i)}function _i(t,e,n){var i=t.r+n.r,r=e.x-t.x,s=e.y-t.y;if(i&&(r||s)){var o=e.r+n.r,a=r*r+s*s;o*=o,i*=i;var l=.5+(i-o)/(2*a),u=Math.sqrt(Math.max(0,2*o*(i+a)-(i-=a)*i-o*o))/(2*a);n.x=t.x+l*r+u*s,n.y=t.y+l*s-u*r}else n.x=t.x+i,n.y=t.y}function bi(t){return 1+d3.max(t,function(t){return t.y})}function wi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function xi(t){var e=t.children;return e&&e.length?xi(e[0]):t}function ki(t){var e,n=t.children;return n&&(e=n.length)?ki(n[e-1]):t}function Ci(t,e){return t.parent==e.parent?1:2}function Mi(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function Si(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function Pi(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,s=-1;++s<r;)e(i=Pi(n[s],e),t)>0&&(t=i);return t}function Ti(t,e){return t.x-e.x}function Ei(t,e){return e.x-t.x}function zi(t,e){return t.depth-e.depth}function Ii(t,e){function n(t,i){var r=t.children;if(r&&(o=r.length))for(var s,o,a=null,l=-1;++l<o;)s=r[l],n(s,a),a=s;e(t,i)}n(t,null)}function Ri(t){for(var e,n=0,i=0,r=t.children,s=r.length;--s>=0;)e=r[s]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function $i(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function Di(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function Ai(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ni(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],s=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>s&&(i+=s/2,s=0),{x:n,y:i,dx:r,dy:s}}function Li(t,e){function n(t,i){d3.text(t,e,function(t){i(t&&n.parse(t))})}function i(e){return e.map(r).join(t)}function r(t){return o.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp("\r\n|["+t+"\r\n]","g"),o=new RegExp('["'+t+"\n]"),a=t.charCodeAt(0);return n.parse=function(t){var e;return n.parseRows(t,function(t,n){if(n){for(var i={},r=-1,s=e.length;++r<s;)i[e[r]]=t[r];return i}return e=t,null})},n.parseRows=function(t,e){function n(){if(s.lastIndex>=t.length)return l;if(r)return r=!1,o;var e=s.lastIndex;if(34===t.charCodeAt(e)){for(var n=e;n++<t.length;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;n++}s.lastIndex=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&s.lastIndex++):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}var u=s.exec(t);return u?(r=u[0].charCodeAt(0)!==a,t.substring(e,u.index)):(s.lastIndex=t.length,t.substring(e))}var i,r,o={},l={},u=[],h=0;for(s.lastIndex=0;(i=n())!==l;){for(var c=[];i!==o&&i!==l;)c.push(i),i=n();(!e||(c=e(c,h++)))&&u.push(c)}return u},n.format=function(t){return t.map(i).join("\n")},n}function Hi(t,e){return function(n){return n&&t.hasOwnProperty(n.type)?t[n.type](n):e}}function Oi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ji(t,e){oo.hasOwnProperty(t.type)&&oo[t.type](t,e)}function qi(t,e){ji(t.geometry,e)}function Wi(t,e){for(var n=t.features,i=0,r=n.length;r>i;i++)ji(n[i].geometry,e)}function Fi(t,e){for(var n=t.geometries,i=0,r=n.length;r>i;i++)ji(n[i],e)}function Ui(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)e.apply(null,n[i])}function Bi(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)for(var s=n[i],o=0,a=s.length;a>o;o++)e.apply(null,s[o])}function Yi(t,e){for(var n=t.coordinates,i=0,r=n.length;r>i;i++)for(var s=n[i][0],o=0,a=s.length;a>o;o++)e.apply(null,s[o])}function Gi(t,e){e.apply(null,t.coordinates)}function Qi(t,e){for(var n=t.coordinates[0],i=0,r=n.length;r>i;i++)e.apply(null,n[i])}function Xi(t){return t.source}function Vi(t){return t.target}function Ki(){function t(t){var e=Math.sin(t*=d)*p,n=Math.sin(d-t)*p,i=n*s+e*c,a=n*o+e*f,l=n*r+e*h;return[Math.atan2(a,i)/so,Math.atan2(l,Math.sqrt(i*i+a*a))/so]}var e,n,i,r,s,o,a,l,u,h,c,f,d,p;return t.distance=function(){return null==d&&(p=1/Math.sin(d=Math.acos(Math.max(-1,Math.min(1,r*h+i*u*Math.cos(a-e)))))),d},t.source=function(a){var l=Math.cos(e=a[0]*so),u=Math.sin(e);return i=Math.cos(n=a[1]*so),r=Math.sin(n),s=i*l,o=i*u,d=null,t},t.target=function(e){var n=Math.cos(a=e[0]*so),i=Math.sin(a);return u=Math.cos(l=e[1]*so),h=Math.sin(l),c=u*n,f=u*i,d=null,t},t}function Zi(t,e){var n=Ki().source(t).target(e);return n.distance(),n}function Ji(t){for(var e=0,n=0;;){if(t(e,n))return[e,n];0===e?(e=n+1,n=0):(e-=1,n+=1)}}function tr(t,e,n,i){var r,s,o,a,l,u,h;return r=i[t],s=r[0],o=r[1],r=i[e],a=r[0],l=r[1],r=i[n],u=r[0],h=r[1],(h-o)*(a-s)-(l-o)*(u-s)>0}function er(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function nr(t,e,n,i){var r=t[0],s=e[0],o=n[0],a=i[0],l=t[1],u=e[1],h=n[1],c=i[1],f=r-o,d=s-r,p=a-o,g=l-h,m=u-l,v=c-h,y=(p*g-v*f)/(v*d-p*m);return[r+y*d,l+y*m]}function ir(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=i.leftEnd;do e=e.r;while(e!=i.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[uo[t.side]]}},r={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},i=e.x-t.x,r=e.y-t.y,s=i>0?i:-i,o=r>0?r:-r;return n.c=t.x*i+t.y*r+.5*(i*i+r*r),s>o?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(t,e){var n=t.edge,i=e.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(Math.abs(r)<1e-10)return null;var s,o,a=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,h=i.region.r;u.y<h.y||u.y==h.y&&u.x<h.x?(s=t,o=n):(s=e,o=i);var c=a>=o.region.r.x;return c&&"l"===s.side||!c&&"r"===s.side?null:{x:a,y:l}},rightOf:function(t,e){var n=t.edge,i=n.region.r,r=e.x>i.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===n.a){var s=e.y-i.y,o=e.x-i.x,a=0,l=0;if(!r&&n.b<0||r&&n.b>=0?l=a=s>=n.b*o:(l=e.x+e.y*n.b>n.c,n.b<0&&(l=!l),l||(a=1)),!a){var u=i.x-n.region.l.x;l=n.b*(o*o-s*s)<u*s*(1+2*o/u+n.b*n.b),n.b<0&&(l=!l)}}else{var h=n.c-n.a*e.x,c=e.y-h,f=e.x-i.x,d=h-i.y;l=c*c>f*f+d*d}return"l"===t.side?l:!l},endPoint:function(t,n,i){t.ep[n]=i,t.ep[uo[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},s={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var i=0,r=s.list,o=r.length;o>i;i++){var a=r[i];if(!(t.ystar>a.ystar||t.ystar==a.ystar&&e.x>a.vertex.x))break}r.splice(i,0,t)},del:function(t){for(var e=0,n=s.list,i=n.length;i>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===s.list.length},nextEvent:function(t){for(var e=0,n=s.list,i=n.length;i>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=s.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return s.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var o,a,l,u,h,c,f,d,p,g,m,v,y,_=n.list.shift();;)if(s.empty()||(o=s.min()),_&&(s.empty()||_.y<o.y||_.y==o.y&&_.x<o.x))a=i.leftBound(_),l=i.right(a),f=i.rightRegion(a),v=r.bisect(f,_),c=i.createHalfEdge(v,"l"),i.insert(a,c),g=r.intersect(a,c),g&&(s.del(a),s.insert(a,g,r.distance(g,_))),a=c,c=i.createHalfEdge(v,"r"),i.insert(a,c),g=r.intersect(c,l),g&&s.insert(c,g,r.distance(g,_)),_=n.list.shift();else{if(s.empty())break;a=s.extractMin(),u=i.left(a),l=i.right(a),h=i.right(l),f=i.leftRegion(a),d=i.rightRegion(l),m=a.vertex,r.endPoint(a.edge,a.side,m),r.endPoint(l.edge,l.side,m),i.del(a),s.del(l),i.del(l),y="l",f.y>d.y&&(p=f,f=d,d=p,y="r"),v=r.bisect(f,d),c=i.createHalfEdge(v,y),i.insert(u,c),r.endPoint(v,uo[y],m),g=r.intersect(u,c),g&&(s.del(u),s.insert(u,g,r.distance(g,f))),g=r.intersect(c,h),g&&s.insert(c,g,r.distance(g,f))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))e(a.edge)}function rr(){return{leaf:!0,nodes:[],point:null}}function sr(t,e,n,i,r,s){if(!t(e,n,i,r,s)){var o=.5*(n+r),a=.5*(i+s),l=e.nodes;l[0]&&sr(t,l[0],n,i,o,a),l[1]&&sr(t,l[1],o,i,r,a),l[2]&&sr(t,l[2],n,a,o,s),l[3]&&sr(t,l[3],o,a,r,s)}}function or(t){return{x:t[0],y:t[1]}}function ar(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function lr(t){return t.substring(0,3)}function ur(t,e,n,i){for(var r,s,o=0,a=e.length,l=n.length;a>o;){if(i>=l)return-1;if(r=e.charCodeAt(o++),37==r){if(s=Ro[e.charAt(o++)],!s||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function hr(t){return new RegExp("^(?:"+t.map(d3.requote).join("|")+")","i")}function cr(t){for(var e=new i,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function fr(t,e,n){So.lastIndex=0;var i=So.exec(e.substring(n));return i?n+=i[0].length:-1}function dr(t,e,n){Mo.lastIndex=0;var i=Mo.exec(e.substring(n));return i?n+=i[0].length:-1}function pr(t,e,n){Eo.lastIndex=0;var i=Eo.exec(e.substring(n));return i?(t.m=zo.get(i[0].toLowerCase()),n+=i[0].length):-1}function gr(t,e,n){Po.lastIndex=0;var i=Po.exec(e.substring(n));return i?(t.m=To.get(i[0].toLowerCase()),n+=i[0].length):-1}function mr(t,e,n){return ur(t,Io.c.toString(),e,n)}function vr(t,e,n){return ur(t,Io.x.toString(),e,n)}function yr(t,e,n){return ur(t,Io.X.toString(),e,n)}function _r(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+=i[0].length):-1}function br(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+2));return i?(t.y=wr(+i[0]),n+=i[0].length):-1}function wr(t){return t+(t>68?1900:2e3)}function xr(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+=i[0].length):-1}function kr(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+=i[0].length):-1}function Cr(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+=i[0].length):-1}function Mr(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+=i[0].length):-1}function Sr(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+=i[0].length):-1}function Pr(t,e,n){$o.lastIndex=0;var i=$o.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+=i[0].length):-1}function Tr(t,e,n){var i=Do.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}function Er(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(Math.abs(e)/60),r=Math.abs(e)%60;return n+wo(i)+wo(r)}function zr(t){return t.toISOString()}function Ir(t,e,n){function i(e){var n=t(e),i=s(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new ho(n-1)),1),n}function s(t,n){return e(t=new ho(+t),n),t}function o(t,i,s){var o=r(t),a=[];if(s>1)for(;i>o;)n(o)%s||a.push(new Date(+o)),e(o,1);else for(;i>o;)a.push(new Date(+o)),e(o,1);return a}function a(t,e,n){try{ho=ar;var i=new ar;return i._=t,o(i,e,n)}finally{ho=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=s,t.range=o;var l=t.utc=Rr(t);return l.floor=l,l.round=Rr(i),l.ceil=Rr(r),l.offset=Rr(s),l.range=a,t}function Rr(t){return function(e,n){try{ho=ar;var i=new ar;return i._=e,t(i,n)._}finally{ho=Date}}}function $r(t,e,n){function i(e){return t(e)}return i.invert=function(e){return Ar(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Ar)},i.nice=function(t){return i.domain(Re(i.domain(),function(){return t}))},i.ticks=function(n,r){var s=Dr(i.domain());if("function"!=typeof n){var o=s[1]-s[0],a=o/n,l=d3.bisect(No,a);if(l==No.length)return e.year(s,n);if(!l)return t.ticks(n).map(Ar);Math.log(a/No[l-1])<Math.log(No[l]/a)&&--l,n=e[l],r=n[1],n=n[0].range}return n(s[0],new Date(+s[1]+1),r)},i.tickFormat=function(){return n},i.copy=function(){return $r(t.copy(),e,n)},d3.rebind(i,t,"range","rangeRound","interpolate","clamp")}function Dr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ar(t){return new Date(t)}function Nr(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function Lr(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function Hr(t){var e=t.getFullYear(),n=Lr(e),i=Lr(e+1);return e+(t-n)/(i-n)}function Or(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function jr(t){var e=t.getUTCFullYear(),n=Or(e),i=Or(e+1);return e+(t-n)/(i-n)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(qr){var Wr=CSSStyleDeclaration.prototype,Fr=Wr.setProperty;Wr.setProperty=function(t,e,n){Fr.call(this,t,e+"",n)}}d3={version:"2.10.2"};var Ur=n;try{Ur(document.documentElement.childNodes)[0].nodeType}catch(Br){Ur=e}var Yr=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};d3.map=function(t){var e=new i;for(var n in t)e.set(n,t[n]);return e},t(i,{has:function(t){return Gr+t in this},get:function(t){return this[Gr+t]},set:function(t,e){return this[Gr+t]=e},remove:function(t){return t=Gr+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Qr&&t.call(this,e.substring(1),this[e])}});var Gr="\x00",Qr=Gr.charCodeAt(0);d3.functor=a,d3.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=l(t,e,e[n]);return t},d3.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},d3.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},d3.mean=function(t,e){var n,i=t.length,r=0,s=-1,o=0;if(1===arguments.length)for(;++s<i;)u(n=t[s])&&(r+=(n-r)/++o);else for(;++s<i;)u(n=e.call(t,t[s],s))&&(r+=(n-r)/++o);return o?r:void 0},d3.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(u),t.length?d3.quantile(t.sort(d3.ascending),.5):void 0},d3.min=function(t,e){var n,i,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&(null==(n=t[r])||n!=n);)n=void 0;for(;++r<s;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<s&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;++r<s;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},d3.max=function(t,e){var n,i,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&(null==(n=t[r])||n!=n);)n=void 0;for(;++r<s;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<s&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;++r<s;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},d3.extent=function(t,e){var n,i,r,s=-1,o=t.length;if(1===arguments.length){for(;++s<o&&(null==(n=r=t[s])||n!=n);)n=r=void 0;for(;++s<o;)null!=(i=t[s])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++s<o&&(null==(n=r=e.call(t,t[s],s))||n!=n);)n=void 0;for(;++s<o;)null!=(i=e.call(t,t[s],s))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},d3.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(t,e){var n=arguments.length;2>n&&(e=1),1>n&&(t=0);var i=d3.random.normal();return function(){return Math.exp(t+e*i())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},d3.sum=function(t,e){var n,i=0,r=t.length,s=-1;if(1===arguments.length)for(;++s<r;)isNaN(n=+t[s])||(i+=n);else for(;++s<r;)isNaN(n=+e.call(t,t[s],s))||(i+=n);return i},d3.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=t[i-1],s=n-i;return s?r+s*(t[i]-r):r},d3.transpose=function(t){return d3.zip.apply(d3,t)},d3.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=d3.min(arguments,h),n=new Array(e);++t<e;)for(var i,r=-1,s=n[t]=new Array(i);++r<i;)s[r]=arguments[r][t];return n},d3.bisector=function(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var s=i+r>>>1;t.call(e,e[s],s)<n?i=s+1:r=s}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var s=i+r>>>1;n<t.call(e,e[s],s)?r=s:i=s+1}return i}}};var Xr=d3.bisector(function(t){return t});d3.bisectLeft=Xr.left,d3.bisect=d3.bisectRight=Xr.right,d3.first=function(t,e){var n,i=0,r=t.length,s=t[0];for(1===arguments.length&&(e=d3.ascending);++i<r;)e.call(t,s,n=t[i])>0&&(s=n);return s},d3.last=function(t,e){var n,i=0,r=t.length,s=t[0];for(1===arguments.length&&(e=d3.ascending);++i<r;)e.call(t,s,n=t[i])<=0&&(s=n);return s},d3.nest=function(){function t(e,a){if(a>=o.length)return r?r.call(s,e):n?e.sort(n):e;for(var l,u,h,c=-1,f=e.length,d=o[a++],p=new i,g={};++c<f;)(h=p.get(l=d(u=e[c])))?h.push(u):p.set(l,[u]);return p.forEach(function(e,n){g[e]=t(n,a)}),g}function e(t,n){if(n>=o.length)return t;var i,r=[],s=a[n++];for(i in t)r.push({key:i,values:e(t[i],n)});return s&&r.sort(function(t,e){return s(t.key,e.key)}),r}var n,r,s={},o=[],a=[];return s.map=function(e){return t(e,0)},s.entries=function(n){return e(t(n,0),0)},s.key=function(t){return o.push(t),s},s.sortKeys=function(t){return a[o.length-1]=t,s},s.sortValues=function(t){return n=t,s},s.rollup=function(t){return r=t,s},s},d3.keys=function(t){var e=[];for(var n in t)e.push(n);return e},d3.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},d3.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},d3.permute=function(t,e){for(var n=[],i=-1,r=e.length;++i<r;)n[i]=t[e[i]];return n},d3.merge=function(t){return Array.prototype.concat.apply([],t)},d3.split=function(t,e){var n,i=[],r=[],s=-1,o=t.length;for(arguments.length<2&&(e=c);++s<o;)e.call(r,n=t[s],s)?r=[]:(r.length||i.push(r),r.push(n));return i},d3.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var i,r=[],s=d(Math.abs(n)),o=-1;if(t*=s,e*=s,n*=s,0>n)for(;(i=t+n*++o)>e;)r.push(i/s);else for(;(i=t+n*++o)<e;)r.push(i/s);return r},d3.requote=function(t){return t.replace(Vr,"\\$&")};var Vr=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},d3.xhr=function(t,e,n){var i=new XMLHttpRequest;arguments.length<3?(n=e,e=null):e&&i.overrideMimeType&&i.overrideMimeType(e),i.open("GET",t,!0),e&&i.setRequestHeader("Accept",e),i.onreadystatechange=function(){if(4===i.readyState){var t=i.status;n(!t&&i.response||t>=200&&300>t||304===t?i:null)}},i.send(null)},d3.text=function(t,e,n){function i(t){n(t&&t.responseText)}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,i)},d3.json=function(t,e){d3.text(t,"application/json",function(t){e(t?JSON.parse(t):null)})},d3.html=function(t,e){d3.text(t,"text/html",function(t){if(null!=t){var n=document.createRange();n.selectNode(document.body),t=n.createContextualFragment(t)}e(t)})},d3.xml=function(t,e,n){function i(t){n(t&&t.responseXML)}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,i)};var Kr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Kr,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Kr.hasOwnProperty(n)?{space:Kr[n],local:t}:t}},d3.dispatch=function(){for(var t=new p,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=g(t);return t},p.prototype.on=function(t,e){var n=t.indexOf("."),i="";return n>0&&(i=t.substring(n+1),t=t.substring(0,n)),arguments.length<2?this[t].on(i):this[t].on(i,e)},d3.format=function(t){var e=Zr.exec(t),n=e[1]||" ",i=e[3]||"",r=e[5],s=+e[6],o=e[7],a=e[8],l=e[9],u=1,h="",c=!1;switch(a&&(a=+a.substring(1)),r&&(n="0",o&&(s-=Math.floor((s-1)/4))),l){case"n":o=!0,l="g";break;case"%":u=100,h="%",l="f";break;case"p":u=100,h="%",l="r";break;case"d":c=!0,a=0;break;case"s":u=-1,l="r"}return"r"!=l||a||(l="g"),l=Jr.get(l)||v,function(t){if(c&&t%1)return"";var e=0>t&&(t=-t)?"-":i;if(0>u){var f=d3.formatPrefix(t,a);t=f.scale(t),h=f.symbol}else t*=u;if(t=l(t,a),r){var d=t.length+e.length;s>d&&(t=new Array(s-d+1).join(n)+t),o&&(t=y(t)),t=e+t}else{o&&(t=y(t)),t=e+t;var d=t.length;s>d&&(t=new Array(s-d+1).join(n)+t)}return t+h}};var Zr=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Jr=d3.map({g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return d3.round(t,e=m(t,e)).toFixed(Math.max(0,Math.min(20,e)))}}),ts=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(_);d3.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=d3.round(t,m(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ts[8+n/3]};var es=C(2),ns=C(3),is=function(){return k},rs=d3.map({linear:is,poly:C,quad:function(){return es},cubic:function(){return ns},sin:function(){return M},exp:function(){return S},circle:function(){return P},elastic:T,back:E,bounce:function(){return z}}),ss=d3.map({"in":k,out:w,"in-out":x,"out-in":function(t){return x(w(t))}});d3.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=rs.get(n)||is,i=ss.get(i)||k,b(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.transform=function(t){var e=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate();return new D(n?n.matrix:as)})(t)},D.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var os=180/Math.PI,as={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(t,e){for(var n,i=d3.interpolators.length;--i>=0&&!(n=d3.interpolators[i](t,e)););return n},d3.interpolateNumber=function(t,e){return e-=t,function(n){return t+e*n}},d3.interpolateRound=function(t,e){return e-=t,function(n){return Math.round(t+e*n)}},d3.interpolateString=function(t,e){var n,i,r,s,o,a=0,l=0,u=[],h=[];for(ls.lastIndex=0,i=0;n=ls.exec(e);++i)n.index&&u.push(e.substring(a,l=n.index)),h.push({i:u.length,x:n[0]}),u.push(null),a=ls.lastIndex;for(a<e.length&&u.push(e.substring(a)),i=0,s=h.length;(n=ls.exec(t))&&s>i;++i)if(o=h[i],o.x==n[0]){if(o.i)if(null==u[o.i+1])for(u[o.i-1]+=o.x,u.splice(o.i,1),r=i+1;s>r;++r)h[r].i--;else for(u[o.i-1]+=o.x+u[o.i+1],u.splice(o.i,2),r=i+1;s>r;++r)h[r].i-=2;else if(null==u[o.i+1])u[o.i]=o.x;else for(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1),r=i+1;s>r;++r)h[r].i--;h.splice(i,1),s--,i--}else o.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(o.x));for(;s>i;)o=h.pop(),null==u[o.i+1]?u[o.i]=o.x:(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1)),s--;return 1===u.length?null==u[0]?h[0].x:function(){return e}:function(t){for(i=0;s>i;++i)u[(o=h[i]).i]=o.x(t);return u.join("")}},d3.interpolateTransform=function(t,e){var n,i=[],r=[],s=d3.transform(t),o=d3.transform(e),a=s.translate,l=o.translate,u=s.rotate,h=o.rotate,c=s.skew,f=o.skew,d=s.scale,p=o.scale;return a[0]!=l[0]||a[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:d3.interpolateNumber(a[0],l[0])},{i:3,x:d3.interpolateNumber(a[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=h?(u-h>180?h+=360:h-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(u,h)})):h&&i.push(i.pop()+"rotate("+h+")"),c!=f?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(c,f)}):f&&i.push(i.pop()+"skewX("+f+")"),d[0]!=p[0]||d[1]!=p[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:d3.interpolateNumber(d[0],p[0])},{i:n-2,x:d3.interpolateNumber(d[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+"scale("+p+")"),n=r.length,function(t){for(var e,s=-1;++s<n;)i[(e=r[s]).i]=e.x(t);return i.join("")}},d3.interpolateRgb=function(t,e){t=d3.rgb(t),e=d3.rgb(e);var n=t.r,i=t.g,r=t.b,s=e.r-n,o=e.g-i,a=e.b-r;return function(t){return"#"+F(Math.round(n+s*t))+F(Math.round(i+o*t))+F(Math.round(r+a*t))}},d3.interpolateHsl=function(t,e){t=d3.hsl(t),e=d3.hsl(e);var n=t.h,i=t.s,r=t.l,s=e.h-n,o=e.s-i,a=e.l-r;return s>180?s-=360:-180>s&&(s+=360),function(t){return K(n+s*t,i+o*t,r+a*t)+""}},d3.interpolateLab=function(t,e){t=d3.lab(t),e=d3.lab(e);var n=t.l,i=t.a,r=t.b,s=e.l-n,o=e.a-i,a=e.b-r;return function(t){return ie(n+s*t,i+o*t,r+a*t)+""}},d3.interpolateHcl=function(t,e){t=d3.hcl(t),e=d3.hcl(e);var n=t.h,i=t.c,r=t.l,s=e.h-n,o=e.c-i,a=e.l-r;return s>180?s-=360:-180>s&&(s+=360),function(t){return te(n+s*t,i+o*t,r+a*t)+""}},d3.interpolateArray=function(t,e){var n,i=[],r=[],s=t.length,o=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)i.push(d3.interpolate(t[n],e[n]));for(;s>n;++n)r[n]=t[n];for(;o>n;++n)r[n]=e[n];return function(t){for(n=0;a>n;++n)r[n]=i[n](t);return r}},d3.interpolateObject=function(t,e){var n,i={},r={};for(n in t)n in e?i[n]=H(n)(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}};var ls=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(t,e){return e instanceof Array&&d3.interpolateArray(t,e)},function(t,e){return("string"==typeof t||"string"==typeof e)&&d3.interpolateString(t+"",e+"")},function(t,e){return("string"==typeof e?us.has(e)||/^(#|rgb\(|hsl\()/.test(e):e instanceof W||e instanceof V)&&d3.interpolateRgb(t,e)},function(t,e){return!isNaN(t=+t)&&!isNaN(e=+e)&&d3.interpolateNumber(t,e)}],d3.rgb=function(t,e,n){return 1===arguments.length?t instanceof W?q(t.r,t.g,t.b):U(""+t,q,K):q(~~t,~~e,~~n)},W.prototype.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),q(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(i/t)))):q(r,r,r)},W.prototype.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),q(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},W.prototype.hsl=function(){return B(this.r,this.g,this.b)},W.prototype.toString=function(){return"#"+F(this.r)+F(this.g)+F(this.b)};var us=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});us.forEach(function(t,e){us.set(t,U(e,q,K))}),d3.hsl=function(t,e,n){return 1===arguments.length?t instanceof V?X(t.h,t.s,t.l):U(""+t,B,X):X(+t,+e,+n)},V.prototype.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),X(this.h,this.s,this.l/t)},V.prototype.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),X(this.h,this.s,t*this.l)},V.prototype.rgb=function(){return K(this.h,this.s,this.l)},V.prototype.toString=function(){return this.rgb().toString()},d3.hcl=function(t,e,n){return 1===arguments.length?t instanceof J?Z(t.h,t.c,t.l):t instanceof ne?re(t.l,t.a,t.b):re((t=Y((t=d3.rgb(t)).r,t.g,t.b)).l,t.a,t.b):Z(+t,+e,+n)},J.prototype.brighter=function(t){return Z(this.h,this.c,Math.min(100,this.l+hs*(arguments.length?t:1)))},J.prototype.darker=function(t){return Z(this.h,this.c,Math.max(0,this.l-hs*(arguments.length?t:1)))},J.prototype.rgb=function(){return te(this.h,this.c,this.l).rgb()},J.prototype.toString=function(){return this.rgb()+""},d3.lab=function(t,e,n){return 1===arguments.length?t instanceof ne?ee(t.l,t.a,t.b):t instanceof J?te(t.l,t.c,t.h):Y((t=d3.rgb(t)).r,t.g,t.b):ee(+t,+e,+n)};var hs=18,cs=.95047,fs=1,ds=1.08883;ne.prototype.brighter=function(t){return ee(Math.min(100,this.l+hs*(arguments.length?t:1)),this.a,this.b)},ne.prototype.darker=function(t){return ee(Math.max(0,this.l-hs*(arguments.length?t:1)),this.a,this.b)},ne.prototype.rgb=function(){return ie(this.l,this.a,this.b)},ne.prototype.toString=function(){return this.rgb()+""};var ps=function(t,e){return e.querySelector(t)},gs=function(t,e){return e.querySelectorAll(t)},ms=document.documentElement,vs=ms.matchesSelector||ms.webkitMatchesSelector||ms.mozMatchesSelector||ms.msMatchesSelector||ms.oMatchesSelector,ys=function(t,e){return vs.call(t,e)};"function"==typeof Sizzle&&(ps=function(t,e){return Sizzle(t,e)[0]||null},gs=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},ys=Sizzle.matchesSelector);var _s=[];d3.selection=function(){return bs},d3.selection.prototype=_s,_s.select=function(t){var e,n,i,r,s=[];"function"!=typeof t&&(t=ue(t));for(var o=-1,a=this.length;++o<a;){s.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;++l<u;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return le(s)},_s.selectAll=function(t){var e,n,i=[];"function"!=typeof t&&(t=he(t));for(var r=-1,s=this.length;++r<s;)for(var o=this[r],a=-1,l=o.length;++a<l;)(n=o[a])&&(i.push(e=Ur(t.call(n,n.__data__,a))),e.parentNode=n);return le(i)
},_s.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=d3.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(ce(e,t[e]));return this}return this.each(ce(t,e))},_s.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.className,null!=e.baseVal&&(e=e.baseVal);++r<i;)if(!fe(t[r]).test(e))return!1;return!0}for(e in t)this.each(de(e,t[e]));return this}return this.each(de(t,e))},_s.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(ge(n,t[n],e));return this}if(2>i)return window.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(ge(t,e,n))},_s.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(me(e,t[e]));return this}return this.each(me(t,e))},_s.text=function(t){return arguments.length<1?this.node().textContent:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t})},_s.html=function(t){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t})},_s.append=function(t){function e(){return this.appendChild(document.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(document.createElementNS(t.space,t.local))}return t=d3.ns.qualify(t),this.select(t.local?n:e)},_s.insert=function(t,e){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,t),ps(e,this))}function i(){return this.insertBefore(document.createElementNS(t.space,t.local),ps(e,this))}return t=d3.ns.qualify(t),this.select(t.local?i:n)},_s.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},_s.data=function(t,e){function n(t,n){var r,s,o,a=t.length,c=n.length,f=Math.min(a,c),d=Math.max(a,c),p=[],g=[],m=[];if(e){var v,y=new i,_=[],b=n.length;for(r=-1;++r<a;)v=e.call(s=t[r],s.__data__,r),y.has(v)?m[b++]=s:y.set(v,s),_.push(v);for(r=-1;++r<c;)v=e.call(n,o=n[r],r),y.has(v)?(p[r]=s=y.get(v),s.__data__=o,g[r]=m[r]=null):(g[r]=ve(o),p[r]=m[r]=null),y.remove(v);for(r=-1;++r<a;)y.has(_[r])&&(m[r]=t[r])}else{for(r=-1;++r<f;)s=t[r],o=n[r],s?(s.__data__=o,p[r]=s,g[r]=m[r]=null):(g[r]=ve(o),p[r]=m[r]=null);for(;c>r;++r)g[r]=ve(n[r]),p[r]=m[r]=null;for(;d>r;++r)m[r]=t[r],g[r]=p[r]=null}g.update=p,g.parentNode=p.parentNode=m.parentNode=t.parentNode,l.push(g),u.push(p),h.push(m)}var r,s,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(s=r[o])&&(t[o]=s.__data__);return t}var l=xe([]),u=le([]),h=le([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return u.enter=function(){return l},u.exit=function(){return h},u},_s.datum=_s.map=function(t){return arguments.length<1?this.property("__data__"):this.property("__data__",t)},_s.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=ye(t));for(var s=0,o=this.length;o>s;s++){r.push(e=[]),e.parentNode=(n=this[s]).parentNode;for(var a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return le(r)},_s.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,s=i[r];--r>=0;)(n=i[r])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},_s.sort=function(t){t=_e.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},_s.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(be(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(be(t,e,n))},_s.each=function(t){return we(this,function(e,n,i){t.call(e,e.__data__,n,i)})},_s.call=function(t){return t.apply(this,(arguments[0]=this,arguments)),this},_s.empty=function(){return!this.node()},_s.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var s=n[i];if(s)return s}return null},_s.transition=function(){for(var t,e,n=[],i=-1,r=this.length;++i<r;){n.push(t=[]);for(var s=this[i],o=-1,a=s.length;++o<a;)t.push((e=s[o])?{node:e,delay:Ts,duration:Es}:null)}return ke(n,Cs||++ks,Date.now())};var bs=le([[document]]);bs[0].parentNode=ms,d3.select=function(t){return"string"==typeof t?bs.select(t):le([[t]])},d3.selectAll=function(t){return"string"==typeof t?bs.selectAll(t):le([Ur(t)])};var ws=[];d3.selection.enter=xe,d3.selection.enter.prototype=ws,ws.append=_s.append,ws.insert=_s.insert,ws.empty=_s.empty,ws.node=_s.node,ws.select=function(t){for(var e,n,i,r,s,o=[],a=-1,l=this.length;++a<l;){i=(r=this[a]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,h=r.length;++u<h;)(s=r[u])?(e.push(i[u]=n=t.call(r.parentNode,s.__data__,u)),n.__data__=s.__data__):e.push(null)}return le(o)};var xs=[],ks=0,Cs=0,Ms=0,Ss=250,Ps=d3.ease("cubic-in-out"),Ts=Ms,Es=Ss,zs=Ps;xs.call=_s.call,d3.transition=function(t){return arguments.length?Cs?t.transition():t:bs.transition()},d3.transition.prototype=xs,xs.select=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=ue(t));for(var s=-1,o=this.length;++s<o;){r.push(e=[]);for(var a=this[s],l=-1,u=a.length;++l<u;)(i=a[l])&&(n=t.call(i.node,i.node.__data__,l))?("__data__"in i.node&&(n.__data__=i.node.__data__),e.push({node:n,delay:i.delay,duration:i.duration})):e.push(null)}return ke(r,this.id,this.time).ease(this.ease())},xs.selectAll=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=he(t));for(var s=-1,o=this.length;++s<o;)for(var a=this[s],l=-1,u=a.length;++l<u;)if(i=a[l]){n=t.call(i.node,i.node.__data__,l),r.push(e=[]);for(var h=-1,c=n.length;++h<c;)e.push({node:n[h],delay:i.delay,duration:i.duration})}return ke(r,this.id,this.time).ease(this.ease())},xs.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=ye(t));for(var s=0,o=this.length;o>s;s++){r.push(e=[]);for(var n=this[s],a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i.node,i.node.__data__,a)&&e.push(i)}return ke(r,this.id,this.time).ease(this.ease())},xs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attrTween(e,Se(t[e],e));return this}return this.attrTween(t,Se(e,t))},xs.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i===$s?(this.removeAttribute(r),null):i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i===$s?(this.removeAttributeNS(r.space,r.local),null):i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=d3.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},xs.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.styleTween(n,Se(t[n],n),e);return this}n=""}return this.styleTween(t,Se(e,t),n)},xs.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(i,r){var s=e.call(this,i,r,window.getComputedStyle(this,null).getPropertyValue(t));return s===$s?(this.style.removeProperty(t),null):s&&function(e){this.style.setProperty(t,s(e),n)}})},xs.text=function(t){return this.tween("text",function(e,n){this.textContent="function"==typeof t?t.call(this,e,n):t})},xs.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},xs.delay=function(t){return we(this,"function"==typeof t?function(e,n,i){e.delay=0|t.call(e=e.node,e.__data__,n,i)}:(t=0|t,function(e){e.delay=t}))},xs.duration=function(t){return we(this,"function"==typeof t?function(e,n,i){e.duration=Math.max(1,0|t.call(e=e.node,e.__data__,n,i))}:(t=Math.max(1,0|t),function(e){e.duration=t}))},xs.transition=function(){return this.select(s)},d3.tween=function(t,e){function n(n,i,r){var s=t.call(this,n,i);return null==s?""!=r&&$s:r!=s&&e(r,s)}function i(n,i,r){return r!=t&&e(r,t)}return"function"==typeof t?n:null==t?Me:(t+="",i)};var Is,Rs,$s={},Ds=null;d3.timer=function(t,e,n){var i,r=!1,s=Ds;if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;n=Date.now()}for(;s;){if(s.callback===t){s.then=n,s.delay=e,r=!0;break}i=s,s=s.next}r||(Ds={callback:t,then:n,delay:e,next:Ds}),Is||(Rs=clearTimeout(Rs),Is=1,As(Pe))},d3.timer.flush=function(){for(var t,e=Date.now(),n=Ds;n;)t=e-n.then,n.delay||(n.flush=n.callback(t)),n=n.next;Te()};var As=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,17)};d3.mouse=function(t){return Ee(t,R())};var Ns=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(t,e){return arguments.length<2&&(e=R().touches),e?Ur(e).map(function(e){var n=Ee(t,e);return n.identifier=e.identifier,n}):[]},d3.scale={},d3.scale.linear=function(){return De([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return We(d3.scale.linear(),Fe)};var Ls=d3.format(".0e");Fe.pow=function(t){return Math.pow(10,t)},Ue.pow=function(t){return-Math.pow(10,-t)},d3.scale.pow=function(){return Be(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Ge([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Hs)},d3.scale.category20=function(){return d3.scale.ordinal().range(Os)},d3.scale.category20b=function(){return d3.scale.ordinal().range(js)},d3.scale.category20c=function(){return d3.scale.ordinal().range(qs)};var Hs=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Os=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],js=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],qs=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Qe([],[])},d3.scale.quantize=function(){return Xe(0,1,[0,1])},d3.scale.threshold=function(){return Ve([.5],[0,1])},d3.scale.identity=function(){return Ke([0,1])},d3.svg={},d3.svg.arc=function(){function t(){var t=e.apply(this,arguments),s=n.apply(this,arguments),o=i.apply(this,arguments)+Ws,a=r.apply(this,arguments)+Ws,l=(o>a&&(l=o,o=a,a=l),a-o),u=l<Math.PI?"0":"1",h=Math.cos(o),c=Math.sin(o),f=Math.cos(a),d=Math.sin(a);return l>=Fs?t?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":t?"M"+s*h+","+s*c+"A"+s+","+s+" 0 "+u+",1 "+s*f+","+s*d+"L"+t*f+","+t*d+"A"+t+","+t+" 0 "+u+",0 "+t*h+","+t*c+"Z":"M"+s*h+","+s*c+"A"+s+","+s+" 0 "+u+",1 "+s*f+","+s*d+"L0,0Z"}var e=Ze,n=Je,i=tn,r=en;return t.innerRadius=function(n){return arguments.length?(e=a(n),t):e},t.outerRadius=function(e){return arguments.length?(n=a(e),t):n},t.startAngle=function(e){return arguments.length?(i=a(e),t):i},t.endAngle=function(e){return arguments.length?(r=a(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,s=(i.apply(this,arguments)+r.apply(this,arguments))/2+Ws;return[Math.cos(s)*t,Math.sin(s)*t]},t};var Ws=-Math.PI/2,Fs=2*Math.PI-1e-6;d3.svg.line=function(){return nn(r)};var Us=d3.map({linear:on,"linear-closed":an,"step-before":ln,"step-after":un,basis:gn,"basis-open":mn,"basis-closed":vn,bundle:yn,cardinal:fn,"cardinal-open":hn,"cardinal-closed":cn,monotone:Cn});Us.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Bs=[0,2/3,1/3,0],Ys=[0,1/3,2/3,0],Gs=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var t=nn(Mn);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ln.reverse=un,un.reverse=ln,d3.svg.area=function(){return Sn(r)},d3.svg.area.radial=function(){var t=Sn(Mn);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},d3.svg.chord=function(){function t(t,a){var l=e(this,s,t,a),u=e(this,o,t,a);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),s=l.call(t,r,i),o=u.call(t,r,i)+Ws,a=h.call(t,r,i)+Ws;return{r:s,a0:o,a1:a,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(a),s*Math.sin(a)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Math.PI)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var s=Pn,o=Tn,l=En,u=tn,h=en;return t.radius=function(e){return arguments.length?(l=a(e),t):l},t.source=function(e){return arguments.length?(s=a(e),t):s},t.target=function(e){return arguments.length?(o=a(e),t):o},t.startAngle=function(e){return arguments.length?(u=a(e),t):u},t.endAngle=function(e){return arguments.length?(h=a(e),t):h},t},d3.svg.diagonal=function(){function t(t,r){var s=e.call(this,t,r),o=n.call(this,t,r),a=(s.y+o.y)/2,l=[s,{x:s.x,y:a},{x:o.x,y:a},o];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Pn,n=Tn,i=zn;return t.source=function(n){return arguments.length?(e=a(n),t):e},t.target=function(e){return arguments.length?(n=a(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},d3.svg.diagonal.radial=function(){var t=d3.svg.diagonal(),e=zn,n=t.projection;return t.projection=function(t){return arguments.length?n(In(e=t)):e},t},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function t(t,i){return(Qs.get(e.call(this,t,i))||Dn)(n.call(this,t,i))}var e=$n,n=Rn;return t.type=function(n){return arguments.length?(e=a(n),t):e},t.size=function(e){return arguments.length?(n=a(e),t):n},t};var Qs=d3.map({circle:Dn,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Vs)),n=e*Vs;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Xs),n=e*Xs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Xs),n=e*Xs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});d3.svg.symbolTypes=Qs.keys();var Xs=Math.sqrt(3),Vs=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function t(t){t.each(function(){var t,c=d3.select(this),f=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,d=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,p=Ln(n,f,h),g=c.selectAll(".minor").data(p,String),m=g.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),v=d3.transition(g.exit()).style("opacity",1e-6).remove(),y=d3.transition(g).style("opacity",1),_=c.selectAll("g").data(f,String),b=_.enter().insert("g","path").style("opacity",1e-6),w=d3.transition(_.exit()).style("opacity",1e-6).remove(),x=d3.transition(_).style("opacity",1),k=Ie(n),C=c.selectAll(".domain").data([0]),M=(C.enter().append("path").attr("class","domain"),d3.transition(C)),S=n.copy(),P=this.__chart__||S;this.__chart__=S,b.append("line").attr("class","tick"),b.append("text");var T=b.select("line"),E=x.select("line"),z=_.select("text").text(d),I=b.select("text"),R=x.select("text");switch(i){case"bottom":t=An,m.attr("y2",s),y.attr("x2",0).attr("y2",s),T.attr("y2",r),I.attr("y",Math.max(r,0)+a),E.attr("x2",0).attr("y2",r),R.attr("x",0).attr("y",Math.max(r,0)+a),z.attr("dy",".71em").attr("text-anchor","middle"),M.attr("d","M"+k[0]+","+o+"V0H"+k[1]+"V"+o);break;case"top":t=An,m.attr("y2",-s),y.attr("x2",0).attr("y2",-s),T.attr("y2",-r),I.attr("y",-(Math.max(r,0)+a)),E.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-(Math.max(r,0)+a)),z.attr("dy","0em").attr("text-anchor","middle"),M.attr("d","M"+k[0]+","+-o+"V0H"+k[1]+"V"+-o);break;case"left":t=Nn,m.attr("x2",-s),y.attr("x2",-s).attr("y2",0),T.attr("x2",-r),I.attr("x",-(Math.max(r,0)+a)),E.attr("x2",-r).attr("y2",0),R.attr("x",-(Math.max(r,0)+a)).attr("y",0),z.attr("dy",".32em").attr("text-anchor","end"),M.attr("d","M"+-o+","+k[0]+"H0V"+k[1]+"H"+-o);break;case"right":t=Nn,m.attr("x2",s),y.attr("x2",s).attr("y2",0),T.attr("x2",r),I.attr("x",Math.max(r,0)+a),E.attr("x2",r).attr("y2",0),R.attr("x",Math.max(r,0)+a).attr("y",0),z.attr("dy",".32em").attr("text-anchor","start"),M.attr("d","M"+o+","+k[0]+"H0V"+k[1]+"H"+o)}if(n.ticks)b.call(t,P),x.call(t,S),w.call(t,S),m.call(t,P),y.call(t,S),v.call(t,S);else{var $=S.rangeBand()/2,D=function(t){return S(t)+$};b.call(t,D),x.call(t,D)}})}var e,n=d3.scale.linear(),i="bottom",r=6,s=6,o=6,a=3,l=[10],u=null,h=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e,t):i},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return r;var i=arguments.length-1;return r=+e,s=i>1?+n:r,o=i>0?+arguments[i]:r,t},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(e){return arguments.length?(h=+e,t):h},t},d3.svg.brush=function(){function t(s){s.each(function(){var s,o=d3.select(this),h=o.selectAll(".background").data([0]),c=o.selectAll(".extent").data([0]),f=o.selectAll(".resize").data(u,String);o.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),c.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ks[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),f.style("display",t.empty()?"none":null),f.exit().remove(),a&&(s=Ie(a),h.attr("x",s[0]).attr("width",s[1]-s[0]),n(o)),l&&(s=Ie(l),h.attr("y",s[0]).attr("height",s[1]-s[0]),i(o)),e(o)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)][0]+","+h[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",h[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1][0]-h[0][0])}function i(t){t.select(".extent").attr("y",h[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1][1]-h[0][1])}function r(){function r(){var t=d3.event.changedTouches;return t?d3.touches(v,t)[0]:d3.mouse(v)}function u(){32==d3.event.keyCode&&(C||(g=null,M[0]-=h[1][0],M[1]-=h[1][1],C=2),I())}function c(){32==d3.event.keyCode&&2==C&&(M[0]+=h[1][0],M[1]+=h[1][1],C=0,I())}function f(){var t=r(),s=!1;m&&(t[0]+=m[0],t[1]+=m[1]),C||(d3.event.altKey?(g||(g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]),M[0]=h[+(t[0]<g[0])][0],M[1]=h[+(t[1]<g[1])][1]):g=null),x&&d(t,a,0)&&(n(b),s=!0),k&&d(t,l,1)&&(i(b),s=!0),s&&(e(b),_({type:"brush",mode:C?"move":"resize"}))}function d(t,e,n){var i,r,o=Ie(e),a=o[0],l=o[1],u=M[n],c=h[1][n]-h[0][n];return C&&(a-=u,l-=c+u),i=Math.max(a,Math.min(l,t[n])),C?r=(i+=u)+c:(g&&(u=Math.max(a,Math.min(l,2*g[n]-i))),i>u?(r=i,i=u):r=u),h[0][n]!==i||h[1][n]!==r?(s=null,h[0][n]=i,h[1][n]=r,!0):void 0}function p(){f(),b.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),d3.select("body").style("cursor",null),S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),_({type:"brushend"}),I()}var g,m,v=this,y=d3.select(d3.event.target),_=o.of(v,arguments),b=d3.select(v),w=y.datum(),x=!/^(n|s)$/.test(w)&&a,k=!/^(e|w)$/.test(w)&&l,C=y.classed("extent"),M=r(),S=d3.select(window).on("mousemove.brush",f).on("mouseup.brush",p).on("touchmove.brush",f).on("touchend.brush",p).on("keydown.brush",u).on("keyup.brush",c);if(C)M[0]=h[0][0]-M[0],M[1]=h[0][1]-M[1];else if(w){var P=+/w$/.test(w),T=+/^n/.test(w);m=[h[1-P][0]-M[0],h[1-T][1]-M[1]],M[0]=h[P][0],M[1]=h[T][1]}else d3.event.altKey&&(g=M.slice());b.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",y.style("cursor")),_({type:"brushstart"}),f(),I()}var s,o=$(t,"brushstart","brush","brushend"),a=null,l=null,u=Zs[0],h=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(a=e,u=Zs[!a<<1|!l],t):a},t.y=function(e){return arguments.length?(l=e,u=Zs[!a<<1|!l],t):l},t.extent=function(e){var n,i,r,o,u;return arguments.length?(s=[[0,0],[0,0]],a&&(n=e[0],i=e[1],l&&(n=n[0],i=i[0]),s[0][0]=n,s[1][0]=i,a.invert&&(n=a(n),i=a(i)),n>i&&(u=n,n=i,i=u),h[0][0]=0|n,h[1][0]=0|i),l&&(r=e[0],o=e[1],a&&(r=r[1],o=o[1]),s[0][1]=r,s[1][1]=o,l.invert&&(r=l(r),o=l(o)),r>o&&(u=r,r=o,o=u),h[0][1]=0|r,h[1][1]=0|o),t):(e=s||h,a&&(n=e[0][0],i=e[1][0],s||(n=h[0][0],i=h[1][0],a.invert&&(n=a.invert(n),i=a.invert(i)),n>i&&(u=n,n=i,i=u))),l&&(r=e[0][1],o=e[1][1],s||(r=h[0][1],o=h[1][1],l.invert&&(r=l.invert(r),o=l.invert(o)),r>o&&(u=r,r=o,o=u))),a&&l?[[n,r],[i,o]]:a?[n,i]:l&&[r,o])},t.clear=function(){return s=null,h[0][0]=h[0][1]=h[1][0]=h[1][1]=0,t},t.empty=function(){return a&&h[0][0]===h[1][0]||l&&h[0][1]===h[1][1]},d3.rebind(t,o,"on")};var Ks={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=a.parentNode;return h?d3.touches(t).filter(function(t){return t.identifier===h})[0]:d3.mouse(t)}function e(){if(!a.parentNode)return r();var e=t(),n=e[0]-c[0],i=e[1]-c[1];f|=n|i,c=e,I(),l({type:"drag",x:e[0]+o[0],y:e[1]+o[1],dx:n,dy:i})}function r(){l({type:"dragend"}),f&&(I(),d3.event.target===u&&d.on("click.drag",s,!0)),d.on(h?"touchmove.drag-"+h:"mousemove.drag",null).on(h?"touchend.drag-"+h:"mouseup.drag",null)}function s(){I(),d.on("click.drag",null)}var o,a=this,l=n.of(a,arguments),u=d3.event.target,h=d3.event.touches&&d3.event.changedTouches[0].identifier,c=t(),f=0,d=d3.select(window).on(h?"touchmove.drag-"+h:"mousemove.drag",e).on(h?"touchend.drag-"+h:"mouseup.drag",r,!0);i?(o=i.apply(a,arguments),o=[o.x-c[0],o.y-c[1]]):o=[0,0],h||I(),l({type:"dragstart"})}var n=$(t,"drag","dragstart","dragend"),i=null;return t.origin=function(e){return arguments.length?(i=e,t):i},d3.rebind(t,n,"on")},d3.behavior.zoom=function(){function t(){this.on("mousedown.zoom",o).on("mousewheel.zoom",a).on("mousemove.zoom",l).on("DOMMouseScroll.zoom",a).on("dblclick.zoom",u).on("touchstart.zoom",h).on("touchmove.zoom",c).on("touchend.zoom",h)}function e(t){return[(t[0]-_[0])/b,(t[1]-_[1])/b]}function n(t){return[t[0]*b+_[0],t[1]*b+_[1]]}function i(t){b=Math.max(w[0],Math.min(w[1],t))}function r(t,e){e=n(e),_[0]+=t[0]-e[0],_[1]+=t[1]-e[1]}function s(t){g&&g.domain(p.range().map(function(t){return(t-_[0])/b}).map(p.invert)),v&&v.domain(m.range().map(function(t){return(t-_[1])/b}).map(m.invert)),d3.event.preventDefault(),t({type:"zoom",scale:b,translate:_})}function o(){function t(){u=1,r(d3.mouse(o),c),s(a)}function n(){u&&I(),h.on("mousemove.zoom",null).on("mouseup.zoom",null),u&&d3.event.target===l&&h.on("click.zoom",i,!0)}function i(){I(),h.on("click.zoom",null)}var o=this,a=x.of(o,arguments),l=d3.event.target,u=0,h=d3.select(window).on("mousemove.zoom",t).on("mouseup.zoom",n),c=e(d3.mouse(o));window.focus(),I()}function a(){f||(f=e(d3.mouse(this))),i(Math.pow(2,.002*Hn())*b),r(d3.mouse(this),f),s(x.of(this,arguments))}function l(){f=null}function u(){var t=d3.mouse(this),n=e(t);i(d3.event.shiftKey?b/2:2*b),r(t,n),s(x.of(this,arguments))}function h(){var t=d3.touches(this),n=Date.now();if(d=b,f={},t.forEach(function(t){f[t.identifier]=e(t)}),I(),1===t.length){if(500>n-y){var o=t[0],a=e(t[0]);i(2*b),r(o,a),s(x.of(this,arguments))}y=n}}function c(){var t=d3.touches(this),e=t[0],n=f[e.identifier];if(o=t[1]){var o,a=f[o.identifier];e=[(e[0]+o[0])/2,(e[1]+o[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i(d3.event.scale*d)}r(e,n),y=null,s(x.of(this,arguments))}var f,d,p,g,m,v,y,_=[0,0],b=1,w=to,x=$(t,"zoom");return t.translate=function(e){return arguments.length?(_=e.map(Number),t):_},t.scale=function(e){return arguments.length?(b=+e,t):b},t.scaleExtent=function(e){return arguments.length?(w=null==e?to:e.map(Number),t):w},t.x=function(e){return arguments.length?(g=e,p=e.copy(),t):g},t.y=function(e){return arguments.length?(v=e,m=e.copy(),t):v},d3.rebind(t,x,"on")};var Js,to=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(On(t[n]));return e}},d3.layout.chord=function(){function t(){var t,u,c,f,d,p={},g=[],m=d3.range(s),v=[];for(n=[],i=[],t=0,f=-1;++f<s;){for(u=0,d=-1;++d<s;)u+=r[f][d];g.push(u),v.push(d3.range(s)),t+=u}for(o&&m.sort(function(t,e){return o(g[t],g[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),t=(2*Math.PI-h*s)/t,u=0,f=-1;++f<s;){for(c=u,d=-1;++d<s;){var y=m[f],_=v[y][d],b=r[y][_],w=u,x=u+=b*t;p[y+"-"+_]={index:y,subindex:_,startAngle:w,endAngle:x,value:b}}i[y]={index:y,startAngle:c,endAngle:u,value:(u-c)/t},u+=h}for(f=-1;++f<s;)for(d=f-1;++d<s;){var k=p[f+"-"+d],C=p[d+"-"+f];(k.value||C.value)&&n.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,s,o,a,l,u={},h=0;return u.matrix=function(t){return arguments.length?(s=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(h=t,n=i=null,u):h},u.sortGroups=function(t){return arguments.length?(o=t,n=i=null,u):o},u.sortSubgroups=function(t){return arguments.length?(a=t,n=null,u):a},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},d3.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var s=e.cx-t.x,o=e.cy-t.y,a=1/Math.sqrt(s*s+o*o);if(v>(r-n)*a){var l=e.charge*a*a;return t.px-=s*l,t.py-=o*l,!0}if(e.point&&isFinite(a)){var l=e.pointCharge*a*a;t.px-=s*l,t.py-=o*l}}return!e.charge}}function e(t){t.px=d3.event.x,t.py=d3.event.y,u.resume()}var n,i,s,o,l,u={},h=d3.dispatch("start","tick","end"),c=[1,1],f=.9,d=Gn,p=Qn,g=-30,m=.1,v=.8,y=[],_=[];return u.tick=function(){if((i*=.99)<.005)return h.end({type:"end",alpha:i=0}),!0;var e,n,r,a,u,d,p,v,b,w=y.length,x=_.length;for(n=0;x>n;++n)r=_[n],a=r.source,u=r.target,v=u.x-a.x,b=u.y-a.y,(d=v*v+b*b)&&(d=i*o[n]*((d=Math.sqrt(d))-s[n])/d,v*=d,b*=d,u.x-=v*(p=a.weight/(u.weight+a.weight)),u.y-=b*p,a.x+=v*(p=1-p),a.y+=b*p);if((p=i*m)&&(v=c[0]/2,b=c[1]/2,n=-1,p))for(;++n<w;)r=y[n],r.x+=(v-r.x)*p,r.y+=(b-r.y)*p;if(g)for(Yn(e=d3.geom.quadtree(y),i,l),n=-1;++n<w;)(r=y[n]).fixed||e.visit(t(r));for(n=-1;++n<w;)r=y[n],r.fixed?(r.x=r.px,r.y=r.py):(r.x-=(r.px-(r.px=r.x))*f,r.y-=(r.py-(r.py=r.y))*f);h.tick({type:"tick",alpha:i})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(_=t,u):_},u.size=function(t){return arguments.length?(c=t,u):c},u.linkDistance=function(t){return arguments.length?(d=a(t),u):d},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(p=a(t),u):p},u.friction=function(t){return arguments.length?(f=t,u):f},u.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,u):g},u.gravity=function(t){return arguments.length?(m=t,u):m},u.theta=function(t){return arguments.length?(v=t,u):v},u.alpha=function(t){return arguments.length?(i?i=t>0?t:0:t>0&&(h.start({type:"start",alpha:i=t}),d3.timer(u.tick)),u):i},u.start=function(){function t(t,i){for(var r,s=e(n),o=-1,a=s.length;++o<a;)if(!isNaN(r=s[o][t]))return r;return Math.random()*i}function e(){if(!r){for(r=[],i=0;h>i;++i)r[i]=[];for(i=0;f>i;++i){var t=_[i];r[t.source.index].push(t.target),r[t.target.index].push(t.source)}}return r[n]}var n,i,r,a,h=y.length,f=_.length,m=c[0],v=c[1];for(n=0;h>n;++n)(a=y[n]).index=n,a.weight=0;for(s=[],o=[],n=0;f>n;++n)a=_[n],"number"==typeof a.source&&(a.source=y[a.source]),"number"==typeof a.target&&(a.target=y[a.target]),s[n]=d.call(this,a,n),o[n]=p.call(this,a,n),++a.source.weight,++a.target.weight;for(n=0;h>n;++n)a=y[n],isNaN(a.x)&&(a.x=t("x",m)),isNaN(a.y)&&(a.y=t("y",v)),isNaN(a.px)&&(a.px=a.x),isNaN(a.py)&&(a.py=a.y);if(l=[],"function"==typeof g)for(n=0;h>n;++n)l[n]=+g.call(this,y[n],n);else for(n=0;h>n;++n)l[n]=g;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){n||(n=d3.behavior.drag().origin(r).on("dragstart",Wn).on("drag",e).on("dragend",Fn)),this.on("mouseover.force",Un).on("mouseout.force",Bn).call(n)},d3.rebind(u,h,"on")},d3.layout.partition=function(){function t(e,n,i,r){var s=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,s&&(o=s.length)){var o,a,l,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(a=s[u],n,l=a.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,s=-1;++s<r;)i=Math.max(i,e(n[s]));return 1+i}function n(n,s){var o=i.call(this,n,s);return t(o[0],0,r[0],r[1]/e(o[0])),o}var i=d3.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},oi(n,i)},d3.layout.pie=function(){function t(s){var o=s.map(function(n,i){return+e.call(t,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-i)/d3.sum(o),u=d3.range(s.length);null!=n&&u.sort(n===eo?function(t,e){return o[e]-o[t]}:function(t,e){return n(s[t],s[e])});var h=[];return u.forEach(function(t){var e;h[t]={data:s[t],value:e=o[t],startAngle:a,endAngle:a+=e*l}}),h}var e=Number,n=eo,i=0,r=2*Math.PI;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var eo={};d3.layout.stack=function(){function t(r,l){var u=r.map(function(n,i){return e.call(t,n,i)}),h=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),c=n.call(t,h,l);u=d3.permute(u,c),h=d3.permute(h,c);var f,d,p,g=i.call(t,h,l),m=u.length,v=u[0].length;for(d=0;v>d;++d)for(s.call(t,u[0][d],p=g[d],h[0][d][1]),f=1;m>f;++f)s.call(t,u[f][d],p+=h[f-1][d][1],h[f][d][1]);return r}var e=r,n=Zn,i=Jn,s=Kn,o=Xn,a=Vn;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:no.get(e)||Zn,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:io.get(e)||Jn,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(s=e,t):s},t};var no=d3.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(ti),s=t.map(ei),o=d3.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,l=0,u=[],h=[];for(e=0;i>e;++e)n=o[e],l>a?(a+=s[n],u.push(n)):(l+=s[n],h.push(n));return h.reverse().concat(u)},reverse:function(t){return d3.range(t.length).reverse()},"default":Zn}),io=d3.map({silhouette:function(t){var e,n,i,r=t.length,s=t[0].length,o=[],a=0,l=[];for(n=0;s>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>a&&(a=i),o.push(i)}for(n=0;s>n;++n)l[n]=(a-o[n])/2;return l},wiggle:function(t){var e,n,i,r,s,o,a,l,u,h=t.length,c=t[0],f=c.length,d=[];for(d[0]=l=u=0,n=1;f>n;++n){for(e=0,r=0;h>e;++e)r+=t[e][n][1];for(e=0,s=0,a=c[n][0]-c[n-1][0];h>e;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)o+=(t[i][n][1]-t[i][n-1][1])/a;s+=o*t[e][n][1]}d[n]=l-=r?s/r*a:0,u>l&&(u=l)}for(n=0;f>n;++n)d[n]-=u;return d},expand:function(t){var e,n,i,r=t.length,s=t[0].length,o=1/r,a=[];for(n=0;s>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;s>n;++n)a[n]=0;return a},zero:Jn});d3.layout.histogram=function(){function t(t,s){for(var o,a,l=[],u=t.map(n,this),h=i.call(this,u,s),c=r.call(this,h,u,s),s=-1,f=u.length,d=c.length-1,p=e?1:1/f;++s<d;)o=l[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(d>0)for(s=-1;++s<f;)a=u[s],a>=h[0]&&a<=h[1]&&(o=l[d3.bisect(c,a,1,d)-1],o.y+=p,o.push(t[s]));
return l}var e=!0,n=Number,i=si,r=ii;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=a(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return ri(t,e)}:a(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},d3.layout.hierarchy=function(){function t(e,o,a){var l=r.call(n,e,o),u=ro?e:{data:e};if(u.depth=o,a.push(u),l&&(h=l.length)){for(var h,c,f=-1,d=u.children=[],p=0,g=o+1;++f<h;)c=t(l[f],g,a),c.parent=u,d.push(c),p+=c.value;i&&d.sort(i),s&&(u.value=p)}else s&&(u.value=+s.call(n,e,o)||0);return u}function e(t,i){var r=t.children,o=0;if(r&&(a=r.length))for(var a,l=-1,u=i+1;++l<a;)o+=e(r[l],u);else s&&(o=+s.call(n,ro?t:t.data,i)||0);return s&&(t.value=o),o}function n(e){var n=[];return t(e,0,n),n}var i=ui,r=ai,s=li;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(s=t,n):s},n.revalue=function(t){return e(t,0),t},n};var ro=!1;d3.layout.pack=function(){function t(t,r){var s=e.call(this,t,r),o=s[0];o.x=0,o.y=0,Ii(o,function(t){t.r=Math.sqrt(t.value)}),Ii(o,gi);var a=i[0],l=i[1],u=Math.max(2*o.r/a,2*o.r/l);if(n>0){var h=n*u/2;Ii(o,function(t){t.r+=h}),Ii(o,gi),Ii(o,function(t){t.r-=h}),u=Math.max(2*o.r/a,2*o.r/l)}return yi(o,a/2,l/2,1/u),s}var e=d3.layout.hierarchy().sort(ci),n=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.padding=function(e){return arguments.length?(n=+e,t):n},oi(t,e)},d3.layout.cluster=function(){function t(t,r){var s,o=e.call(this,t,r),a=o[0],l=0;Ii(a,function(t){var e=t.children;e&&e.length?(t.x=wi(e),t.y=bi(e)):(t.x=s?l+=n(t,s):0,t.y=0,s=t)});var u=xi(a),h=ki(a),c=u.x-n(u,h)/2,f=h.x+n(h,u)/2;return Ii(a,function(t){t.x=(t.x-c)/(f-c)*i[0],t.y=(1-(a.y?t.y/a.y:1))*i[1]}),o}var e=d3.layout.hierarchy().sort(null).value(null),n=Ci,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},oi(t,e)},d3.layout.tree=function(){function t(t,r){function s(t,e){var i=t.children,r=t._tree;if(i&&(o=i.length)){for(var o,l,u,h=i[0],c=h,f=-1;++f<o;)u=i[f],s(u,l),c=a(u,l,c),l=u;Ri(t);var d=.5*(h._tree.prelim+u._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-d):r.prelim=d}else e&&(r.prelim=e._tree.prelim+n(t,e))}function o(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;++r<i;)o(n[r],e)}}function a(t,e,i){if(e){for(var r,s=t,o=t,a=e,l=t.parent.children[0],u=s._tree.mod,h=o._tree.mod,c=a._tree.mod,f=l._tree.mod;a=Si(a),s=Mi(s),a&&s;)l=Mi(l),o=Si(o),o._tree.ancestor=t,r=a._tree.prelim+c-s._tree.prelim-u+n(a,s),r>0&&($i(Di(a,t,i),t,r),u+=r,h+=r),c+=a._tree.mod,u+=s._tree.mod,f+=l._tree.mod,h+=o._tree.mod;a&&!Si(o)&&(o._tree.thread=a,o._tree.mod+=c-h),s&&!Mi(l)&&(l._tree.thread=s,l._tree.mod+=u-f,i=t)}return i}var l=e.call(this,t,r),u=l[0];Ii(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),s(u),o(u,-u._tree.prelim);var h=Pi(u,Ei),c=Pi(u,Ti),f=Pi(u,zi),d=h.x-n(h,c)/2,p=c.x+n(c,h)/2,g=f.depth||1;return Ii(u,function(t){t.x=(t.x-d)/(p-d)*i[0],t.y=t.depth/g*i[1],delete t._tree}),l}var e=d3.layout.hierarchy().sort(null).value(null),n=Ci,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},oi(t,e)},d3.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,s=t.length;++r<s;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var s=n.children;if(s&&s.length){var o,a,l,u=c(n),h=[],f=s.slice(),d=1/0,p=Math.min(u.dx,u.dy);for(t(f,u.dx*u.dy/n.value),h.area=0;(l=f.length)>0;)h.push(o=f[l-1]),h.area+=o.area,(a=i(h,p))<=d?(f.pop(),d=a):(h.area-=h.pop().area,r(h,p,u,!1),p=Math.min(u.dx,u.dy),h.length=h.area=0,d=1/0);h.length&&(r(h,p,u,!0),h.length=h.area=0),s.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var s,o=c(e),a=i.slice(),l=[];for(t(a,o.dx*o.dy/e.value),l.area=0;s=a.pop();)l.push(s),l.area+=s.area,null!=s.z&&(r(l,s.z?o.dx:o.dy,o,!a.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,s=1/0,o=-1,a=t.length;++o<a;)(n=t[o].area)&&(s>n&&(s=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*d/i,i/(e*s*d)):1/0}function r(t,e,n,i){var r,s=-1,o=t.length,a=n.x,u=n.y,h=e?l(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=n.dy);++s<o;)r=t[s],r.x=a,r.y=u,r.dy=h,a+=r.dx=Math.min(n.x+n.dx-a,h?l(r.area/h):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=n.dx);++s<o;)r=t[s],r.x=a,r.y=u,r.dx=h,u+=r.dy=Math.min(n.y+n.dy-u,h?l(r.area/h):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=h,n.dx-=h}}function s(i){var r=o||a(i),s=r[0];return s.x=0,s.y=0,s.dx=u[0],s.dy=u[1],o&&a.revalue(s),t([s],s.dx*s.dy/s.value),(o?n:e)(s),f&&(o=r),r}var o,a=d3.layout.hierarchy(),l=Math.round,u=[1,1],h=null,c=Ai,f=!1,d=.5*(1+Math.sqrt(5));return s.size=function(t){return arguments.length?(u=t,s):u},s.padding=function(t){function e(e){var n=t.call(s,e,e.depth);return null==n?Ai(e):Ni(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Ni(e,t)}if(!arguments.length)return h;var i;return c=null==(h=t)?Ai:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,s},s.round=function(t){return arguments.length?(l=t?Math.round:Number,s):l!=Number},s.sticky=function(t){return arguments.length?(f=t,o=null,s):f},s.ratio=function(t){return arguments.length?(d=t,s):d},oi(s,a)},d3.csv=Li(",","text/csv"),d3.tsv=Li("	","text/tab-separated-values"),d3.geo={};var so=Math.PI/180;d3.geo.azimuthal=function(){function t(t){var e,i=t[0]*so-n,u=t[1]*so,h=Math.cos(i),c=Math.sin(i),f=Math.cos(u),d=Math.sin(u),p="orthographic"!==o?s*d+r*f*h:null,g="stereographic"===o?1/(1+p):"gnomonic"===o?1/p:"equidistant"===o?(e=Math.acos(p),e?e/Math.sin(e):0):"equalarea"===o?Math.sqrt(2/(1+p)):1,m=g*f*c,v=g*(s*f*h-r*d);return[a*m+l[0],a*v+l[1]]}var e,n,i,r,s,o="orthographic",a=200,l=[480,250];return t.invert=function(t){var e=(t[0]-l[0])/a,i=(t[1]-l[1])/a,u=Math.sqrt(e*e+i*i),h="stereographic"===o?2*Math.atan(u):"gnomonic"===o?Math.atan(u):"equidistant"===o?u:"equalarea"===o?2*Math.asin(.5*u):Math.asin(u),c=Math.sin(h),f=Math.cos(h);return[(n+Math.atan2(e*c,u*r*f+i*s*c))/so,Math.asin(f*s-(u?i*c*r/u:0))/so]},t.mode=function(e){return arguments.length?(o=e+"",t):o},t.origin=function(o){return arguments.length?(e=o,n=e[0]*so,i=e[1]*so,r=Math.cos(i),s=Math.sin(i),t):e},t.scale=function(e){return arguments.length?(a=+e,t):a},t.translate=function(e){return arguments.length?(l=[+e[0],+e[1]],t):l},t.origin([0,0])},d3.geo.albers=function(){function t(t){var e=i*(so*t[0]-n),o=Math.sqrt(r-2*i*Math.sin(so*t[1]))/i;return[l*o*Math.sin(e)+u[0],l*(o*Math.cos(e)-s)+u[1]]}function e(){var e=so*a[0],l=so*a[1],u=so*o[1],h=Math.sin(e),c=Math.cos(e);return n=so*o[0],i=.5*(h+Math.sin(l)),r=c*c+2*i*h,s=Math.sqrt(r-2*i*Math.sin(u))/i,t}var n,i,r,s,o=[-98,38],a=[29.5,45.5],l=1e3,u=[480,250];return t.invert=function(t){var e=(t[0]-u[0])/l,o=(t[1]-u[1])/l,a=s+o,h=Math.atan2(e,a),c=Math.sqrt(e*e+a*a);return[(n+h/i)/so,Math.asin((r-c*c*i*i)/(2*i))/so]},t.origin=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o},t.parallels=function(t){return arguments.length?(a=[+t[0],+t[1]],e()):a},t.scale=function(e){return arguments.length?(l=+e,t):l},t.translate=function(e){return arguments.length?(u=[+e[0],+e[1]],t):u},e()},d3.geo.albersUsa=function(){function t(t){var s=t[0],o=t[1];return(o>50?n:-140>s?i:21>o?r:e)(t)}var e=d3.geo.albers(),n=d3.geo.albers().origin([-160,60]).parallels([55,65]),i=d3.geo.albers().origin([-160,20]).parallels([8,18]),r=d3.geo.albers().origin([-60,10]).parallels([8,18]);return t.scale=function(s){return arguments.length?(e.scale(s),n.scale(.6*s),i.scale(s),r.scale(1.5*s),t.translate(e.translate())):e.scale()},t.translate=function(s){if(!arguments.length)return e.translate();var o=e.scale()/1e3,a=s[0],l=s[1];return e.translate(s),n.translate([a-400*o,l+170*o]),i.translate([a-190*o,l+200*o]),r.translate([a+580*o,l+430*o]),t},t.scale(e.scale())},d3.geo.bonne=function(){function t(t){var a=t[0]*so-e,l=t[1]*so-n;if(i){var u=r+i-l,h=a*Math.cos(l)/u;a=u*Math.sin(h),l=u*Math.cos(h)-r}else a*=Math.cos(l),l*=-1;return[s*a+o[0],s*l+o[1]]}var e,n,i,r,s=200,o=[480,250];return t.invert=function(t){var n=(t[0]-o[0])/s,a=(t[1]-o[1])/s;if(i){var l=r+a,u=Math.sqrt(n*n+l*l);a=r+i-u,n=e+u*Math.atan2(n,l)/Math.cos(a)}else a*=-1,n/=Math.cos(a);return[n/so,a/so]},t.parallel=function(e){return arguments.length?(r=1/Math.tan(i=e*so),t):i/so},t.origin=function(i){return arguments.length?(e=i[0]*so,n=i[1]*so,t):[e/so,n/so]},t.scale=function(e){return arguments.length?(s=+e,t):s},t.translate=function(e){return arguments.length?(o=[+e[0],+e[1]],t):o},t.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function t(t){var i=t[0]/360,r=-t[1]/360;return[e*i+n[0],e*r+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return[360*i,-360*r]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.mercator=function(){function t(t){var i=t[0]/360,r=-(Math.log(Math.tan(Math.PI/4+t[1]*so/2))/so)/360;return[e*i+n[0],e*Math.max(-.5,Math.min(.5,r))+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return[360*i,2*Math.atan(Math.exp(-360*r*so))/so-90]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.path=function(){function t(t){"function"==typeof s&&(o=Oi(s.apply(this,arguments))),u(t);var e=l.length?l.join(""):null;return l=[],e}function e(t){return a(t).join(",")}function n(t){for(var e=r(t[0]),n=0,i=t.length;++n<i;)e-=r(t[n]);return e}function i(t){for(var e=d3.geom.polygon(t[0].map(a)),n=e.area(),i=e.centroid(0>n?(n*=-1,1):-1),r=i[0],s=i[1],o=n,l=0,u=t.length;++l<u;)e=d3.geom.polygon(t[l].map(a)),n=e.area(),i=e.centroid(0>n?(n*=-1,1):-1),r-=i[0],s-=i[1],o-=n;return[r,s,6*o]}function r(t){return Math.abs(d3.geom.polygon(t.map(a)).area())}var s=4.5,o=Oi(s),a=d3.geo.albersUsa(),l=[],u=Hi({FeatureCollection:function(t){for(var e=t.features,n=-1,i=e.length;++n<i;)l.push(u(e[n].geometry))},Feature:function(t){u(t.geometry)},Point:function(t){l.push("M",e(t.coordinates),o)},MultiPoint:function(t){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)l.push("M",e(n[i]),o)},LineString:function(t){var n=t.coordinates,i=-1,r=n.length;for(l.push("M");++i<r;)l.push(e(n[i]),"L");l.pop()},MultiLineString:function(t){for(var n,i,r,s=t.coordinates,o=-1,a=s.length;++o<a;){for(n=s[o],i=-1,r=n.length,l.push("M");++i<r;)l.push(e(n[i]),"L");l.pop()}},Polygon:function(t){for(var n,i,r,s=t.coordinates,o=-1,a=s.length;++o<a;)if(n=s[o],i=-1,(r=n.length-1)>0){for(l.push("M");++i<r;)l.push(e(n[i]),"L");l[l.length-1]="Z"}},MultiPolygon:function(t){for(var n,i,r,s,o,a,u=t.coordinates,h=-1,c=u.length;++h<c;)for(n=u[h],i=-1,r=n.length;++i<r;)if(s=n[i],o=-1,(a=s.length-1)>0){for(l.push("M");++o<a;)l.push(e(s[o]),"L");l[l.length-1]="Z"}},GeometryCollection:function(t){for(var e=t.geometries,n=-1,i=e.length;++n<i;)l.push(u(e[n]))}}),h=t.area=Hi({FeatureCollection:function(t){for(var e=0,n=t.features,i=-1,r=n.length;++i<r;)e+=h(n[i]);return e},Feature:function(t){return h(t.geometry)},Polygon:function(t){return n(t.coordinates)},MultiPolygon:function(t){for(var e=0,i=t.coordinates,r=-1,s=i.length;++r<s;)e+=n(i[r]);return e},GeometryCollection:function(t){for(var e=0,n=t.geometries,i=-1,r=n.length;++i<r;)e+=h(n[i]);return e}},0),c=t.centroid=Hi({Feature:function(t){return c(t.geometry)},Polygon:function(t){var e=i(t.coordinates);return[e[0]/e[2],e[1]/e[2]]},MultiPolygon:function(t){for(var e,n=t.coordinates,r=0,s=0,o=0,a=-1,l=n.length;++a<l;)e=i(n[a]),r+=e[0],s+=e[1],o+=e[2];return[r/o,s/o]}});return t.projection=function(e){return a=e,t},t.pointRadius=function(e){return"function"==typeof e?s=e:(s=+e,o=Oi(s)),t},t},d3.geo.bounds=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;return ji(t,function(t,s){e>t&&(e=t),t>i&&(i=t),n>s&&(n=s),s>r&&(r=s)}),[[e,n],[i,r]]};var oo={Feature:qi,FeatureCollection:Wi,GeometryCollection:Fi,LineString:Ui,MultiLineString:Bi,MultiPoint:Ui,MultiPolygon:Yi,Point:Gi,Polygon:Qi};d3.geo.circle=function(){function t(){}function e(t){return l.distance(t)<a}function n(t){for(var e,n,r,s,o,u=-1,h=t.length,c=[];++u<h;)o=l.distance(r=t[u]),a>o?(n&&c.push(Zi(n,r)((s-a)/(s-o))),c.push(r),e=n=null):(n=r,!e&&c.length&&(c.push(Zi(c[c.length-1],n)((a-s)/(o-s))),e=n)),s=o;return e=t[0],n=c[0],!n||r[0]!==e[0]||r[1]!==e[1]||r[0]===n[0]&&r[1]===n[1]||c.push(n),i(c)}function i(t){for(var e,n,i,r=0,s=t.length,o=s?[t[0]]:t,a=l.source();++r<s;)for(i=l.source(t[r-1])(t[r]).coordinates,e=0,n=i.length;++e<n;)o.push(i[e]);return l.source(a),o}var s=[0,0],o=89.99,a=o*so,l=d3.geo.greatArc().source(s).target(r);t.clip=function(t){return"function"==typeof s&&l.source(s.apply(this,arguments)),u(t)||null};var u=Hi({FeatureCollection:function(t){var e=t.features.map(u).filter(r);return e&&(t=Object.create(t),t.features=e,t)},Feature:function(t){var e=u(t.geometry);return e&&(t=Object.create(t),t.geometry=e,t)},Point:function(t){return e(t.coordinates)&&t},MultiPoint:function(t){var n=t.coordinates.filter(e);return n.length&&{type:t.type,coordinates:n}},LineString:function(t){var e=n(t.coordinates);return e.length&&(t=Object.create(t),t.coordinates=e,t)},MultiLineString:function(t){var e=t.coordinates.map(n).filter(function(t){return t.length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},Polygon:function(t){var e=t.coordinates.map(n);return e[0].length&&(t=Object.create(t),t.coordinates=e,t)},MultiPolygon:function(t){var e=t.coordinates.map(function(t){return t.map(n)}).filter(function(t){return t[0].length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},GeometryCollection:function(t){var e=t.geometries.map(u).filter(r);return e.length&&(t=Object.create(t),t.geometries=e,t)}});return t.origin=function(e){return arguments.length?(s=e,"function"!=typeof s&&l.source(s),t):s},t.angle=function(e){return arguments.length?(a=(o=+e)*so,t):o},d3.rebind(t,l,"precision")},d3.geo.greatArc=function(){function t(){for(var i=t.distance.apply(this,arguments),r=0,a=s/i,l=[e];(r+=a)<1;)l.push(o(r));return l.push(n),{type:"LineString",coordinates:l}}var e,n,i=Xi,r=Vi,s=6*so,o=Ki();return t.distance=function(){return"function"==typeof i&&o.source(e=i.apply(this,arguments)),"function"==typeof r&&o.target(n=r.apply(this,arguments)),o.distance()},t.source=function(n){return arguments.length?(i=n,"function"!=typeof i&&o.source(e=i),t):i},t.target=function(e){return arguments.length?(r=e,"function"!=typeof r&&o.target(n=r),t):r},t.precision=function(e){return arguments.length?(s=e*so,t):s/so},t},d3.geo.greatCircle=d3.geo.circle,d3.geom={},d3.geom.contour=function(t,e){var n=e||Ji(t),i=[],r=n[0],s=n[1],o=0,a=0,l=0/0,u=0/0,h=0;do h=0,t(r-1,s-1)&&(h+=1),t(r,s-1)&&(h+=2),t(r-1,s)&&(h+=4),t(r,s)&&(h+=8),6===h?(o=-1===u?-1:1,a=0):9===h?(o=0,a=1===l?-1:1):(o=ao[h],a=lo[h]),o!=l&&a!=u&&(i.push([r,s]),l=o,u=a),r+=o,s+=a;while(n[0]!=r||n[1]!=s);return i};var ao=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],lo=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(t){if(t.length<3)return[];var e,n,i,r,s,o,a,l,u,h,c=t.length,f=c-1,d=[],p=[],g=0;for(e=1;c>e;++e)t[e][1]<t[g][1]?g=e:t[e][1]==t[g][1]&&(g=t[e][0]<t[g][0]?e:g);for(e=0;c>e;++e)e!==g&&(r=t[e][1]-t[g][1],i=t[e][0]-t[g][0],d.push({angle:Math.atan2(r,i),index:e}));for(d.sort(function(t,e){return t.angle-e.angle}),u=d[0].angle,l=d[0].index,a=0,e=1;f>e;++e)n=d[e].index,u==d[e].angle?(i=t[l][0]-t[g][0],r=t[l][1]-t[g][1],s=t[n][0]-t[g][0],o=t[n][1]-t[g][1],i*i+r*r>=s*s+o*o?d[e].index=-1:(d[a].index=-1,u=d[e].angle,a=e,l=n)):(u=d[e].angle,a=e,l=n);for(p.push(g),e=0,n=0;2>e;++n)-1!==d[n].index&&(p.push(d[n].index),e++);for(h=p.length;f>n;++n)if(-1!==d[n].index){for(;!tr(p[h-2],p[h-1],d[n].index,t);)--h;p[h++]=d[n].index}var m=[];for(e=0;h>e;++e)m.push(t[p[e]]);return m},d3.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,i=t[n-1][0]*t[0][1],r=t[n-1][1]*t[0][0];++e<n;)i+=t[e-1][0]*t[e][1],r+=t[e-1][1]*t[e][0];return.5*(r-i)},t.centroid=function(e){var n,i,r=-1,s=t.length,o=0,a=0,l=t[s-1];for(arguments.length||(e=-1/(6*t.area()));++r<s;)n=l,l=t[r],i=n[0]*l[1]-l[0]*n[1],o+=(n[0]+l[0])*i,a+=(n[1]+l[1])*i;return[o*e,a*e]},t.clip=function(e){for(var n,i,r,s,o,a,l=-1,u=t.length,h=t[u-1];++l<u;){for(n=e.slice(),e.length=0,s=t[l],o=n[(r=n.length)-1],i=-1;++i<r;)a=n[i],er(a,h,s)?(er(o,h,s)||e.push(nr(o,a,h,s)),e.push(a)):er(o,h,s)&&e.push(nr(o,a,h,s)),o=a;h=s}return e},t},d3.geom.voronoi=function(t){var e=t.map(function(){return[]});return ir(t,function(t){var n,i,r,s,o,a;1===t.a&&t.b>=0?(n=t.ep.r,i=t.ep.l):(n=t.ep.l,i=t.ep.r),1===t.a?(o=n?n.y:-1e6,r=t.c-t.b*o,a=i?i.y:1e6,s=t.c-t.b*a):(r=n?n.x:-1e6,o=t.c-t.a*r,s=i?i.x:1e6,a=t.c-t.a*s);var l=[r,o],u=[s,a];e[t.region.l.index].push(l,u),e[t.region.r.index].push(l,u)}),e.map(function(e,n){var i=t[n][0],r=t[n][1];return e.forEach(function(t){t.angle=Math.atan2(t[0]-i,t[1]-r)}),e.sort(function(t,e){return t.angle-e.angle}).filter(function(t,n){return!n||t.angle-e[n-1].angle>1e-10})})};var uo={l:"r",r:"l"};d3.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return ir(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,i){var r=t[i],s=r[0],o=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-s,t[1]-o)}),e.sort(function(t,e){return t.angle-e.angle});for(var a=0,l=e.length-1;l>a;a++)n.push([r,e[a],e[a+1]])}),n},d3.geom.quadtree=function(t,e,n,i,r){function s(t,e,n,i,r,s){if(!isNaN(e.x)&&!isNaN(e.y))if(t.leaf){var a=t.point;a?Math.abs(a.x-e.x)+Math.abs(a.y-e.y)<.01?o(t,e,n,i,r,s):(t.point=null,o(t,a,n,i,r,s),o(t,e,n,i,r,s)):t.point=e}else o(t,e,n,i,r,s)}function o(t,e,n,i,r,o){var a=.5*(n+r),l=.5*(i+o),u=e.x>=a,h=e.y>=l,c=(h<<1)+u;t.leaf=!1,t=t.nodes[c]||(t.nodes[c]=rr()),u?n=a:r=a,h?i=l:o=l,s(t,e,n,i,r,o)}var a,l=-1,u=t.length;if(u&&isNaN(t[0].x)&&(t=t.map(or)),arguments.length<5)if(3===arguments.length)r=i=n,n=e;else{for(e=n=1/0,i=r=-1/0;++l<u;)a=t[l],a.x<e&&(e=a.x),a.y<n&&(n=a.y),a.x>i&&(i=a.x),a.y>r&&(r=a.y);var h=i-e,c=r-n;h>c?r=n+h:i=e+c}var f=rr();return f.add=function(t){s(f,t,e,n,i,r)},f.visit=function(t){sr(t,f,e,n,i,r)},t.forEach(f.add),f},d3.time={};var ho=Date,co=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];ar.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){fo.setUTCDate.apply(this._,arguments)},setDay:function(){fo.setUTCDay.apply(this._,arguments)},setFullYear:function(){fo.setUTCFullYear.apply(this._,arguments)},setHours:function(){fo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){fo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fo.setUTCSeconds.apply(this._,arguments)},setTime:function(){fo.setTime.apply(this._,arguments)}};var fo=Date.prototype,po="%a %b %e %H:%M:%S %Y",go="%m/%d/%y",mo="%H:%M:%S",vo=co,yo=vo.map(lr),_o=["January","February","March","April","May","June","July","August","September","October","November","December"],bo=_o.map(lr);d3.time.format=function(t){function e(e){for(var i,r,s=[],o=-1,a=0;++o<n;)37==t.charCodeAt(o)&&(s.push(t.substring(a,o),(r=Io[i=t.charAt(++o)])?r(e):i),a=o+1);return s.push(t.substring(a,o)),s.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},i=ur(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new ho;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},e.toString=function(){return t},e};var wo=d3.format("02d"),xo=d3.format("03d"),ko=d3.format("04d"),Co=d3.format("2d"),Mo=hr(vo),So=hr(yo),Po=hr(_o),To=cr(_o),Eo=hr(bo),zo=cr(bo),Io={a:function(t){return yo[t.getDay()]},A:function(t){return vo[t.getDay()]},b:function(t){return bo[t.getMonth()]},B:function(t){return _o[t.getMonth()]},c:d3.time.format(po),d:function(t){return wo(t.getDate())},e:function(t){return Co(t.getDate())},H:function(t){return wo(t.getHours())},I:function(t){return wo(t.getHours()%12||12)},j:function(t){return xo(1+d3.time.dayOfYear(t))},L:function(t){return xo(t.getMilliseconds())},m:function(t){return wo(t.getMonth()+1)},M:function(t){return wo(t.getMinutes())},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t){return wo(t.getSeconds())},U:function(t){return wo(d3.time.sundayOfYear(t))},w:function(t){return t.getDay()},W:function(t){return wo(d3.time.mondayOfYear(t))},x:d3.time.format(go),X:d3.time.format(mo),y:function(t){return wo(t.getFullYear()%100)},Y:function(t){return ko(t.getFullYear()%1e4)},Z:Er,"%":function(){return"%"}},Ro={a:fr,A:dr,b:pr,B:gr,c:mr,d:kr,e:kr,H:Cr,I:Cr,L:Pr,m:xr,M:Mr,p:Tr,S:Sr,x:vr,X:yr,y:br,Y:_r},$o=/^\s*\d+/,Do=d3.map({am:0,pm:1});d3.time.format.utc=function(t){function e(t){try{ho=ar;var e=new ho;return e._=t,n(e)}finally{ho=Date}}var n=d3.time.format(t);return e.parse=function(t){try{ho=ar;var e=n.parse(t);return e&&e._}finally{ho=Date}},e.toString=n.toString,e};var Ao=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?zr:Ao,zr.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},zr.toString=Ao.toString,d3.time.second=Ir(function(t){return new ho(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=Ir(function(t){return new ho(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=Ir(function(t){var e=t.getTimezoneOffset()/60;return new ho(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=Ir(function(t){var e=new ho(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(t){var e=d3.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},co.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=d3.time[t]=Ir(function(t){return(t=d3.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});d3.time[t+"s"]=n.range,d3.time[t+"s"].utc=n.utc.range,d3.time[t+"OfYear"]=function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=Ir(function(t){return t=d3.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=Ir(function(t){return t=d3.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var No=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Lo=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Ho=[[d3.time.format("%Y"),function(){return!0}],[d3.time.format("%B"),function(t){return t.getMonth()}],[d3.time.format("%b %d"),function(t){return 1!=t.getDate()}],[d3.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[d3.time.format("%I %p"),function(t){return t.getHours()}],[d3.time.format("%I:%M"),function(t){return t.getMinutes()}],[d3.time.format(":%S"),function(t){return t.getSeconds()}],[d3.time.format(".%L"),function(t){return t.getMilliseconds()}]],Oo=d3.scale.linear(),jo=Nr(Ho);Lo.year=function(t,e){return Oo.domain(t.map(Hr)).ticks(e).map(Lr)},d3.time.scale=function(){return $r(d3.scale.linear(),Lo,jo)};var qo=Lo.map(function(t){return[t[0].utc,t[1]]}),Wo=[[d3.time.format.utc("%Y"),function(){return!0}],[d3.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[d3.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[d3.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],Fo=Nr(Wo);qo.year=function(t,e){return Oo.domain(t.map(jr)).ticks(e).map(Or)},d3.time.scale.utc=function(){return $r(d3.scale.linear(),qo,Fo)}}();var Rickshaw={namespace:function(t){for(var e=t.split("."),n=Rickshaw,i=1,r=e.length;r>i;i++){var s=e[i];n[s]=n[s]||{},n=n[s]}return n},keys:function(t){var e=[];for(var n in t)e.push(n);return e},extend:function(t,e){for(var n in e)t[n]=e[n];return t}};if("undefined"!=typeof module&&module.exports){var d3=require("d3");module.exports=Rickshaw}!function(t){function e(t){return c.call(t)===y}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(t){if(r(t)!==v)throw new TypeError;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function r(t){switch(t){case null:return f;case void 0:return d}var e=typeof t;switch(e){case"boolean":return p;case"number":return g;case"string":return m}return v}function s(t){return"undefined"==typeof t}function o(t){var e=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]}function a(t,e){var n=t;return function(){var t=l([h(n,this)],arguments);return e.apply(this,t)}}function l(t,e){for(var n=t.length,i=e.length;i--;)t[n+i]=e[i];return t}function u(t,e){return t=_.call(t,0),l(t,e)}function h(t,e){if(arguments.length<2&&s(arguments[0]))return this;var n=t,i=_.call(arguments,2);return function(){var t=u(i,arguments);return n.apply(e,t)}}var c=Object.prototype.toString,f="Null",d="Undefined",p="Boolean",g="Number",m="String",v="Object",y="[object Function]",_=Array.prototype.slice,b=function(){},w=function(){function t(){}function r(){function i(){this.initialize.apply(this,arguments)}var r=null,s=[].slice.apply(arguments);if(e(s[0])&&(r=s.shift()),n(i,w.Methods),i.superclass=r,i.subclasses=[],r){t.prototype=r.prototype,i.prototype=new t;try{r.subclasses.push(i)}catch(o){}}for(var a=0,l=s.length;l>a;a++)i.addMethods(s[a]);return i.prototype.initialize||(i.prototype.initialize=b),i.prototype.constructor=i,i}function s(t){var n=this.superclass&&this.superclass.prototype,r=i(t);l&&(t.toString!=Object.prototype.toString&&r.push("toString"),t.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var s=0,u=r.length;u>s;s++){var c=r[s],f=t[c];if(n&&e(f)&&"$super"==o(f)[0]){var d=f;f=a(function(t){return function(){return n[t].apply(this,arguments)}}(c),d),f.valueOf=h(d.valueOf,d),f.toString=h(d.toString,d)}this.prototype[c]=f}return this}var l=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:r,Methods:{addMethods:s}}}();t.exports?t.exports.Class=w:t.Class=w}(Rickshaw),Rickshaw.namespace("Rickshaw.Compat.ClassList"),Rickshaw.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";var e="classList",n="prototype",i=(t.HTMLElement||t.Element)[n],r=Object,s=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},u=function(t){for(var e=s.call(t.className),n=e?e.split(/\s+/):[],i=0,r=n.length;r>i;i++)this.push(n[i]);this._updateClassName=function(){t.className=this.toString()}},h=u[n]=[],c=function(){return new u(this)};if(a[n]=Error[n],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",-1!==l(this,t)},h.add=function(t){t+="",-1===l(this,t)&&(this.push(t),this._updateClassName())},h.remove=function(t){t+="";var e=l(this,t);-1!==e&&(this.splice(e,1),this._updateClassName())},h.toggle=function(t){t+="",-1===l(this,t)?this.add(t):this.remove(t)},h.toString=function(){return this.join(" ")},r.defineProperty){var f={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,f)}catch(d){-2146823252===d.number&&(f.enumerable=!1,r.defineProperty(i,e,f))}}else r[n].__defineGetter__&&i.__defineGetter__(e,c)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new Rickshaw.Compat.ClassList,Rickshaw.namespace("Rickshaw.Graph"),Rickshaw.Graph=function(t){if(!t.element)throw"Rickshaw.Graph needs a reference to an element";this.element=t.element,this.series=t.series,this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0},Rickshaw.keys(this.defaults).forEach(function(e){this[e]=t[e]||this.defaults[e]},this),this.window={},this.updateCallbacks=[];var e=this;this.initialize=function(t){this.validateSeries(t.series),this.series.active=function(){return e.series.filter(function(t){return!t.disabled})},this.setSize({width:t.width,height:t.height}),this.element.classList.add("rickshaw_graph"),this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height);var n=[Rickshaw.Graph.Renderer.Stack,Rickshaw.Graph.Renderer.Line,Rickshaw.Graph.Renderer.Bar,Rickshaw.Graph.Renderer.Area,Rickshaw.Graph.Renderer.ScatterPlot];n.forEach(function(t){t&&e.registerRenderer(new t({graph:e}))}),this.setRenderer(t.renderer||"stack",t),this.discoverRange()},this.validateSeries=function(t){if(!(t instanceof Array||t instanceof Rickshaw.Series)){var e=Object.prototype.toString.apply(t);throw"series is not an array: "+e}t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!(t.data instanceof Array))throw"series data is not an array: "+JSON.stringify(t.data);var e=t.data[0].x,n=t.data[0].y;if("number"!=typeof e||"number"!=typeof n&&null!==n)throw"x and y properties of points should be numbers instead of "+typeof e+" and "+typeof n},this)},this.dataDomain=function(){var t=this.series[0].data;return[t[0].x,t.slice(-1).shift().x]},this.discoverRange=function(){var t=this.renderer.domain();this.x=d3.scale.linear().domain(t.x).range([0,this.width]),this.y=d3.scale.linear().domain(t.y).range([this.height,0]),this.y.magnitude=d3.scale.linear().domain([t.y[0]-t.y[0],t.y[1]-t.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var t=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this);this.stackData.hooks.data.forEach(function(n){t=n.f.apply(e,[t])});var n;if(!this.renderer.unstack){this._validateStackable();var i=d3.layout.stack();i.offset(e.offset),n=i(t)}n=n||t,this.stackData.hooks.after.forEach(function(i){n=i.f.apply(e,[t])});var r=0;return this.series.forEach(function(t){t.disabled||(t.stack=n[r++])}),this.stackedData=n,n
},this._validateStackable=function(){var t,e=this.series;e.forEach(function(e){if(t=t||e.data.length,t&&e.data.length!=t)throw"stacked series cannot have differing numbers of points: "+t+" vs "+e.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(t){(t.width||t.height)&&this.setSize(t),Rickshaw.keys(this.defaults).forEach(function(e){this[e]=e in t?t[e]:e in this?this[e]:this.defaults[e]},this),this.setRenderer(t.renderer||this.renderer.name,t)},this.setRenderer=function(t,e){if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t],"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if(t=t||{},void 0!==typeof window)var e=window.getComputedStyle(this.element,null),n=parseInt(e.getPropertyValue("width")),i=parseInt(e.getPropertyValue("height"));this.width=t.width||n||400,this.height=t.height||i||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(t)},Rickshaw.namespace("Rickshaw.Fixtures.Color"),Rickshaw.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},Rickshaw.namespace("Rickshaw.Fixtures.RandomData"),Rickshaw.Fixtures.RandomData=function(t){t=t||1;var e=200,n=Math.floor((new Date).getTime()/1e3);this.addData=function(i){var r=100*Math.random()+15+e,s=i[0].length,o=1;i.forEach(function(e){var i=20*Math.random(),a=r/25+o++ +15*(Math.cos(s*o*11/960)+2)+7*(Math.cos(s/7)+2)+1*(Math.cos(s/17)+2);e.push({x:s*t+n,y:a+i})}),e=.85*r}},Rickshaw.namespace("Rickshaw.Fixtures.Time"),Rickshaw.Fixtures.Time=function(){var t=(60*(new Date).getTimezoneOffset(),this);this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(e){return t.months[e.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(e){return t.formatDate(e)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(e){return t.formatTime(e)}},{name:"hour",seconds:3600,formatter:function(e){return t.formatTime(e)}},{name:"15 minute",seconds:900,formatter:function(e){return t.formatTime(e)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(t){return t.toUTCString().match(/, (\w+ \w+ \w+)/)[1]},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){if("month"==e.name){var n=new Date(1e3*(t+e.seconds-1)),i=new Date(0);return i.setUTCFullYear(n.getUTCFullYear()),i.setUTCMonth(n.getUTCMonth()),i.setUTCDate(1),i.setUTCHours(0),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),i.getTime()/1e3}if("year"==e.name){var n=new Date(1e3*(t+e.seconds-1)),i=new Date(0);return i.setUTCFullYear(n.getUTCFullYear()),i.setUTCMonth(0),i.setUTCDate(1),i.setUTCHours(0),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),i.getTime()/1e3}return Math.ceil(t/e.seconds)*e.seconds}},Rickshaw.namespace("Rickshaw.Fixtures.Number"),Rickshaw.Fixtures.Number.formatKMBT=function(t){return abs_y=Math.abs(t),abs_y>=1e12?t/1e12+"T":abs_y>=1e9?t/1e9+"B":abs_y>=1e6?t/1e6+"M":abs_y>=1e3?t/1e3+"K":1>abs_y&&t>0?t.toFixed(2):0==abs_y?"":t},Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(t){return abs_y=Math.abs(t),abs_y>=0x4000000000000?t/0x4000000000000+"P":abs_y>=1099511627776?t/1099511627776+"T":abs_y>=1073741824?t/1073741824+"G":abs_y>=1048576?t/1048576+"M":abs_y>=1024?t/1024+"K":1>abs_y&&t>0?t.toFixed(2):0==abs_y?"":t},Rickshaw.namespace("Rickshaw.Color.Palette"),Rickshaw.Color.Palette=function(t){var e=new Rickshaw.Fixtures.Color;if(t=t||{},this.schemes={},this.scheme=e.schemes[t.scheme]||t.scheme||e.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,t.interpolatedStopCount){var n,i,r=this.scheme.length-1,s=[];for(n=0;r>n;n++){s.push(this.scheme[n]);var o=d3.interpolateHsl(this.scheme[n],this.scheme[n+1]);for(i=1;i<t.interpolatedStopCount;i++)s.push(o(1/t.interpolatedStopCount*i))}s.push(this.scheme[this.scheme.length-1]),this.scheme=s}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var t;return this.generatorIndex==2*this.rotateCount-1?(t=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(t=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(t),t}}},Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){$.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(t){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=this.graph||new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,n=t.series;return t.series?(n.forEach(function(t){var n=t.key||t.name;if(!n)throw"series needs a key or a name";e.forEach(function(e){var i=e.key||e.name;if(!i)throw"data needs a key or a name";if(n==i){var r=["color","name","data"];r.forEach(function(n){e[n]&&(t[n]=e[n])})}})}),n):e}}),Rickshaw.namespace("Rickshaw.Graph.Annotate"),Rickshaw.Graph.Annotate=function(t){this.graph=t.graph;this.elements={timeline:t.element};var e=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(t,n,i){e.data[t]=e.data[t]||{boxes:[]},e.data[t].boxes.push({content:n,end:i})},this.update=function(){Rickshaw.keys(e.data).forEach(function(t){var n=e.data[t],i=e.graph.x(t);if(0>i||i>e.graph.x.range()[1])return n.element&&(n.line.classList.add("offscreen"),n.element.style.display="none"),n.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")}),void 0;if(!n.element){var r=n.element=document.createElement("div");r.classList.add("annotation"),this.elements.timeline.appendChild(r),r.addEventListener("click",function(){r.classList.toggle("active"),n.line.classList.toggle("active"),n.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}n.element.style.left=i+"px",n.element.style.display="block",n.boxes.forEach(function(t){var r=t.element;if(r||(r=t.element=document.createElement("div"),r.classList.add("content"),r.innerHTML=t.content,n.element.appendChild(r),n.line=document.createElement("div"),n.line.classList.add("annotation_line"),e.graph.element.appendChild(n.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),e.graph.element.appendChild(t.rangeElement))),t.end){var s=i,o=Math.min(e.graph.x(t.end),e.graph.x.range()[1]);s>o&&(o=i,s=Math.max(e.graph.x(t.end),e.graph.x.range()[0]));var a=o-s;t.rangeElement.style.left=s+"px",t.rangeElement.style.width=a+"px",t.rangeElement.classList.remove("offscreen")}n.line.classList.remove("offscreen"),n.line.style.left=i+"px"})},this)},this.graph.onUpdate(function(){e.update()})},Rickshaw.namespace("Rickshaw.Graph.Axis.Time"),Rickshaw.Graph.Axis.Time=function(t){var e=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var n=new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var t,e=n.units,i=this.graph.x.domain(),r=i[1]-i[0];return e.forEach(function(e){Math.floor(r/e.seconds)>=2&&(t=t||e)}),t||n.units[n.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),i=Math.ceil((t[1]-t[0])/e.seconds),r=t[0],s=[],o=0;i>o;o++){var a=n.ceil(r,e);r=a+e.seconds/2,s.push({value:a,unit:e})}return s},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[];var t=this.tickOffsets();t.forEach(function(t){if(!(e.graph.x(t.value)>e.graph.x.range()[1])){var n=document.createElement("div");n.style.left=e.graph.x(t.value)+"px",n.classList.add("x_tick"),n.classList.add(e.ticksTreatment);var i=document.createElement("div");i.classList.add("title"),i.innerHTML=t.unit.formatter(new Date(1e3*t.value)),n.appendChild(i),e.graph.element.appendChild(n),e.elements.push(n)}})},this.graph.onUpdate(function(){e.render()})},Rickshaw.namespace("Rickshaw.Graph.Axis.X"),Rickshaw.Graph.Axis.X=function(t){var e=this,n=.1;this.initialize=function(t){this.graph=t.graph,this.orientation=t.orientation||"top";var n=t.pixelsPerTick||75;this.ticks=t.ticks||Math.floor(this.graph.width/n),this.tickSize=t.tickSize||4,this.ticksTreatment=t.ticksTreatment||"plain",t.element?(this.element=t.element,this._discoverSize(t.element,t),this.vis=d3.select(t.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:t.width,height:t.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){e.render()})},this.setSize=function(t){if(t=t||{},this.element){this._discoverSize(this.element.parentNode,t),this.vis.attr("height",this.height).attr("width",this.width*(1+n));var e=Math.floor(this.width*n/2);this.element.style.left=-1*e+"px"}},this.render=function(){this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var e=d3.svg.axis().scale(this.graph.x).orient(this.orientation);e.tickFormat(t.tickFormat||function(t){return t});var i=Math.floor(this.width*n/2)||0;if("top"==this.orientation)var r=this.height||this.graph.height,s="translate("+i+","+r+")";else var s="translate("+i+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",s).call(e.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var o=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(e.ticks(this.ticks).tickSubdivide(0).tickSize(o)),this._renderHeight=this.graph.height},this._discoverSize=function(t,e){if("undefined"!=typeof window){var i=window.getComputedStyle(t,null),r=parseInt(i.getPropertyValue("height"));if(!e.auto)var s=parseInt(i.getPropertyValue("width"))}this.width=(e.width||s||this.graph.width)*(1+n),this.height=e.height||r||40},this.initialize(t)},Rickshaw.namespace("Rickshaw.Graph.Axis.Y"),Rickshaw.Graph.Axis.Y=function(t){var e=this,n=.1;this.initialize=function(t){this.graph=t.graph,this.orientation=t.orientation||"right";var n=t.pixelsPerTick||75;this.ticks=t.ticks||Math.floor(this.graph.height/n),this.tickSize=t.tickSize||4,this.ticksTreatment=t.ticksTreatment||"plain",t.element?(this.element=t.element,this.vis=d3.select(t.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:t.width,height:t.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){e.render()})},this.setSize=function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),i=parseInt(e.getPropertyValue("width"));if(!t.auto)var r=parseInt(e.getPropertyValue("height"))}this.width=t.width||i||this.graph.width*n,this.height=t.height||r||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+n));var s=this.height*n;this.element.style.top=-1*s+"px"}},this.render=function(){this.graph.height!==this._renderHeight&&this.setSize({auto:!0});var e=d3.svg.axis().scale(this.graph.y).orient(this.orientation);if(e.tickFormat(t.tickFormat||function(t){return t}),"left"==this.orientation)var i=this.height*n,r="translate("+this.width+", "+i+")";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",r).call(e.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var s=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(e.ticks(this.ticks).tickSubdivide(0).tickSize(s)),this._renderHeight=this.graph.height},this.initialize(t)},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),Rickshaw.Graph.Behavior.Series.Highlight=function(t){this.graph=t.graph,this.legend=t.legend;var e=this,n={},i=null;this.addHighlightEvents=function(t){t.element.addEventListener("mouseover",function(){i||(i=t,e.legend.lines.forEach(function(i,r){if(t!==i)n[i.series.name]=n[i.series.name]||i.series.color,i.series.color=d3.interpolateRgb(i.series.color,d3.rgb("#d8d8d8"))(.8).toString();else if(r>0&&e.graph.renderer.unstack){var s=e.graph.series.length-r-1;i.originalIndex=s;var o=e.graph.series.splice(s,1)[0];e.graph.series.push(o)}}),e.graph.update())},!1),t.element.addEventListener("mouseout",function(){i&&(i=null,e.legend.lines.forEach(function(i){if(t===i&&i.hasOwnProperty("originalIndex")){var r=e.graph.series.pop();e.graph.series.splice(i.originalIndex,0,r),delete i.originalIndex}n[i.series.name]&&(i.series.color=n[i.series.name])}),e.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(t){e.addHighlightEvents(t)})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order"),Rickshaw.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;$(function(){$(e.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var t=[];$(e.legend.list).find("li").each(function(e,n){n.series&&t.push(n.series)});for(var n=e.graph.series.length-1;n>=0;n--)e.graph.series[n]=t.shift();e.graph.update()}}),$(e.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(e.legend.element).height;e.legend.element.style.height=t})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;this.addAnchor=function(t){var n=document.createElement("a");n.innerHTML="&#10004;",n.classList.add("action"),t.element.insertBefore(n,t.element.firstChild),n.onclick=function(){t.series.disabled?(t.series.enable(),t.element.classList.remove("disabled")):(t.series.disable(),t.element.classList.add("disabled"))};var i=t.element.getElementsByTagName("span")[0];i.onclick=function(){var n=t.series.disabled;if(!n)for(var i=0;i<e.legend.lines.length;i++){var r=e.legend.lines[i];if(t.series===r.series);else if(!r.series.disabled){n=!0;break}}n?(t.series.enable(),t.element.classList.remove("disabled"),e.legend.lines.forEach(function(e){t.series===e.series||(e.series.disable(),e.element.classList.add("disabled"))})):e.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")})}},this.legend&&($(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){e.addAnchor(t)})),this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(e.graph.series.length<=1)throw"only one series left";t.disabled=!0,e.graph.update()},t.enable=function(){t.disabled=!1,e.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},Rickshaw.namespace("Rickshaw.Graph.HoverDetail"),Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return null===t?t:t.toFixed(2)};var n=this.element=document.createElement("div");n.className="detail",this.visible=!0,e.element.appendChild(n),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,n,i,r){return t.name+":&nbsp;"+r},update:function(t){if(t=t||this.lastEvent,t&&(this.lastEvent=t,t.target.nodeName.match(/^(path|svg|rect)$/))){var e,n=this.graph,i=t.offsetX||t.layerX,r=t.offsetY||t.layerY,s=0,o=[];this.graph.series.active().forEach(function(t){for(var a=this.graph.stackedData[s++],l=n.x.invert(i),u=d3.scale.linear().domain([a[0].x,a.slice(-1)[0].x]).range([0,a.length-1]),h=Math.round(u(l)),c=Math.min(h||0,a.length-1),f=h;f<a.length-1&&(a[f]&&a[f+1]);){if(a[f].x<=l&&a[f+1].x>l){c=f;break}a[f+1].x<=l?f++:f--}0>c&&(c=0);var d=a[c],p=Math.sqrt(Math.pow(Math.abs(n.x(d.x)-i),2)+Math.pow(Math.abs(n.y(d.y+d.y0)-r),2)),g=t.xFormatter||this.xFormatter,m=t.yFormatter||this.yFormatter,v={formattedXValue:g(d.x),formattedYValue:m(d.y),series:t,value:d,distance:p,order:s,name:t.name};(!e||p<e.distance)&&(e=v),o.push(v)},this),e.active=!0;var a=e.value.x,l=e.formattedXValue;this.element.innerHTML="",this.element.style.left=n.x(a)+"px",this.visible&&this.render({points:o,detail:o,mouseX:i,mouseY:r,formattedXValue:l,domainX:a})}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=this.graph,n=t.points,i=n.filter(function(t){return t.active}).shift();if(null!==i.value.y){var r=this.xFormatter(i.value.x),s=this.yFormatter(i.value.y);this.element.innerHTML="",this.element.style.left=e.x(i.value.x)+"px";var o=document.createElement("div");o.className="x_label",o.innerHTML=r,this.element.appendChild(o);var a=document.createElement("div");a.className="item",a.innerHTML=this.formatter(i.series,i.value.x,i.value.y,r,s,i),a.style.top=this.graph.y(i.value.y0+i.value.y)+"px",this.element.appendChild(a);var l=document.createElement("div");l.className="dot",l.style.top=a.style.top,l.style.borderColor=i.series.color,this.element.appendChild(l),i.active&&(a.className="item active",l.className="dot active"),this.show(),"function"==typeof this.onRender&&this.onRender(t)}},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(t){this.visible=!0,this.update(t)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(t){!t.relatedTarget||t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),Rickshaw.namespace("Rickshaw.Graph.JSONP"),Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){$.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),Rickshaw.namespace("Rickshaw.Graph.Legend"),Rickshaw.Graph.Legend=function(t){var e=this.element=t.element,n=this.graph=t.graph,i=this;e.classList.add("rickshaw_legend");var r=this.list=document.createElement("ul");e.appendChild(r);var s=n.series.map(function(t){return t});t.naturalOrder||(s=s.reverse()),this.lines=[],this.addLine=function(t){var e=document.createElement("li");e.className="line",t.disabled&&(e.className+=" disabled");var n=document.createElement("div");n.className="swatch",n.style.backgroundColor=t.color,e.appendChild(n);var s=document.createElement("span");s.className="label",s.innerHTML=t.name,e.appendChild(s),r.appendChild(e),e.series=t,t.noLegend&&(e.style.display="none");var o={element:e,series:t};i.shelving&&(i.shelving.addAnchor(o),i.shelving.updateBehaviour()),i.highlighter&&i.highlighter.addHighlightEvents(o),i.lines.push(o)},s.forEach(function(t){i.addLine(t)}),n.onUpdate(function(){})},Rickshaw.namespace("Rickshaw.Graph.RangeSlider"),Rickshaw.Graph.RangeSlider=function(t){var e=this.element=t.element,n=this.graph=t.graph;$(function(){$(e).slider({range:!0,min:n.dataDomain()[0],max:n.dataDomain()[1],values:[n.dataDomain()[0],n.dataDomain()[1]],slide:function(t,e){n.window.xMin=e.values[0],n.window.xMax=e.values[1],n.update(),n.dataDomain()[0]==e.values[0]&&(n.window.xMin=void 0),n.dataDomain()[1]==e.values[1]&&(n.window.xMax=void 0)}})}),e[0].style.width=n.width+"px",n.onUpdate(function(){var t=$(e).slider("option","values");$(e).slider("option","min",n.dataDomain()[0]),$(e).slider("option","max",n.dataDomain()[1]),void 0==n.window.xMin&&(t[0]=n.dataDomain()[0]),void 0==n.window.xMax&&(t[1]=n.dataDomain()[1]),$(e).slider("option","values",t)})},Rickshaw.namespace("Rickshaw.Graph.Renderer"),Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.graph.unstacker=this.graph.unstacker||new Rickshaw.Graph.Unstacker({graph:this.graph}),this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(){var t=this.graph.stackedData||this.graph.stackData(),e=t[0][0],n=e.x,i=e.x,r=e.y+e.y0,s=e.y+e.y0;return t.forEach(function(t){t.forEach(function(t){if(void 0!=t.y){var e=t.y+t.y0;r>e&&(r=e),e>s&&(s=e)}}),t[0].x<n&&(n=t[0].x),t[t.length-1].x>i&&(i=t[t.length-1].x)}),n-=(i-n)*this.padding.left,i+=(i-n)*this.padding.right,r="auto"===this.graph.min?r:this.graph.min||0,s=void 0===this.graph.max?s:this.graph.max,("auto"===this.graph.min||0>r)&&(r-=(s-r)*this.padding.bottom),void 0===this.graph.max&&(s+=(s-r)*this.padding.top),{x:[n,i],y:[r,s]}},render:function(){var t=this.graph;t.vis.selectAll("*").remove();var e=t.vis.selectAll("path").data(this.graph.stackedData).enter().append("svg:path").attr("d",this.seriesPathFactory()),n=0;t.series.forEach(function(t){t.disabled||(t.path=e[0][n++],this._styleSeries(t))},this)},_styleSeries:function(t){var e=this.fill?t.color:"none",n=this.stroke?t.color:"none";t.path.setAttribute("fill",e),t.path.setAttribute("stroke",n),t.path.setAttribute("stroke-width",this.strokeWidth),t.path.setAttribute("class",t.className)},configure:function(t){t=t||{},Rickshaw.keys(this.defaults()).forEach(function(e){return t.hasOwnProperty(e)?("object"==typeof this.defaults()[e]?Rickshaw.keys(this.defaults()[e]).forEach(function(n){this[e][n]=void 0!==t[e][n]?t[e][n]:void 0!==this[e][n]?this[e][n]:this.defaults()[e][n]},this):this[e]=void 0!==t[e]?t[e]:void 0!==this[e]?this[e]:void 0!==this.graph[e]?this.graph[e]:this.defaults()[e],void 0):(this[e]=this[e]||this.graph[e]||this.defaults()[e],void 0)},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Line"),Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var t=this.graph,e=d3.svg.line().x(function(e){return t.x(e.x)}).y(function(e){return t.y(e.y)}).interpolate(this.graph.interpolation).tension(this.tension);return e.defined&&e.defined(function(t){return null!==t.y}),e}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack"),Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function($super){return Rickshaw.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var t=this.graph,e=d3.svg.area().x(function(e){return t.x(e.x)}).y0(function(e){return t.y(e.y0)}).y1(function(e){return t.y(e.y+e.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return e.defined&&e.defined(function(t){return null!==t.y}),e}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar"),Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function($super){var t=Rickshaw.extend($super(),{gapSize:.05,unstack:!1});return delete t.tension,t},initialize:function($super,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,$super(t)},domain:function($super){var t=$super(),e=this._frequentInterval();return t.x[1]+=parseInt(e.magnitude),t},barWidth:function(){var t=this.graph.stackedData||this.graph.stackData(),e=t.slice(-1).shift(),n=this._frequentInterval(),i=this.graph.x(e[0].x+n.magnitude*(1-this.gapSize));return i},render:function(){var t=this.graph;t.vis.selectAll("*").remove();var e=this.barWidth(),n=0,i=t.series.filter(function(t){return!t.disabled}).length,r=this.unstack?e/i:e,s=function(e){var n=[1,0,0,e.y<0?-1:1,0,e.y<0?2*t.y.magnitude(Math.abs(e.y)):0];return"matrix("+n.join(",")+")"};t.series.forEach(function(e){if(!e.disabled){var i=t.vis.selectAll("path").data(e.stack.filter(function(t){return null!==t.y})).enter().append("svg:rect").attr("x",function(e){return t.x(e.x)+n}).attr("y",function(e){return t.y(e.y0+Math.abs(e.y))*(e.y<0?-1:1)}).attr("width",r).attr("height",function(e){return t.y.magnitude(Math.abs(e.y))}).attr("transform",s);Array.prototype.forEach.call(i[0],function(t){t.setAttribute("fill",e.color)}),this.unstack&&(n+=r)}},this)},_frequentInterval:function(){for(var t=this.graph.stackedData||this.graph.stackData(),e=t.slice(-1).shift(),n={},i=0;i<e.length-1;i++){var r=e[i+1].x-e[i].x;n[r]=n[r]||0,n[r]++}var s={count:0};return Rickshaw.keys(n).forEach(function(t){s.count<n[t]&&(s={count:n[t],magnitude:t})}),this._frequentInterval=function(){return s},s}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Area"),Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function($super){return Rickshaw.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var t=this.graph,e=d3.svg.area().x(function(e){return t.x(e.x)}).y0(function(e){return t.y(e.y0)}).y1(function(e){return t.y(e.y+e.y0)}).interpolate(t.interpolation).tension(this.tension);return e.defined&&e.defined(function(t){return null!==t.y}),e},seriesStrokeFactory:function(){var t=this.graph,e=d3.svg.line().x(function(e){return t.x(e.x)}).y(function(e){return t.y(e.y+e.y0)}).interpolate(t.interpolation).tension(this.tension);return e.defined&&e.defined(function(t){return null!==t.y}),e},render:function(){var t=this.graph;t.vis.selectAll("*").remove();var e=this.unstack?"append":"insert",n=t.vis.selectAll("path").data(this.graph.stackedData).enter()[e]("svg:g","g");n.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&n.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var i=0;t.series.forEach(function(t){t.disabled||(t.path=n[0][i++],this._styleSeries(t))},this)},_styleSeries:function(t){t.path&&(d3.select(t.path).select(".area").attr("fill",t.color),this.stroke&&d3.select(t.path).select(".line").attr("fill","none").attr("stroke",t.stroke||d3.interpolateRgb(t.color,"black")(.125)).attr("stroke-width",this.strokeWidth),t.className&&t.path.setAttribute("class",t.className))}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,t){$super(t)},render:function(){var t=this.graph;t.vis.selectAll("*").remove(),t.series.forEach(function(e){if(!e.disabled){var n=t.vis.selectAll("path").data(e.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(e){return t.x(e.x)}).attr("cy",function(e){return t.y(e.y)}).attr("r",function(e){return"r"in e?e.r:t.renderer.dotSize});Array.prototype.forEach.call(n[0],function(t){t.setAttribute("fill",e.color)})}},this)}}),Rickshaw.namespace("Rickshaw.Graph.Smoother"),Rickshaw.Graph.Smoother=function(t){this.graph=t.graph,this.element=t.element;var e=this;this.aggregationScale=1,this.element&&$(function(){$(e.element).slider({min:1,max:100,slide:function(t,n){e.setScale(n.value),e.graph.update()}})}),e.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:function(t){if(1==e.aggregationScale)return t;var n=[];return t.forEach(function(t){for(var i=[];t.length;){var r=0,s=0,o=t.splice(0,e.aggregationScale);o.forEach(function(t){r+=t.x/o.length,s+=t.y/o.length}),i.push({x:r,y:s})}n.push(i)}),n}}),this.setScale=function(t){if(1>t)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()}},Rickshaw.namespace("Rickshaw.Graph.Unstacker"),Rickshaw.Graph.Unstacker=function(t){this.graph=t.graph;var e=this;this.graph.stackData.hooks.after.push({name:"unstacker",f:function(t){return e.graph.renderer.unstack?(t.forEach(function(t){t.forEach(function(t){t.y0=0})}),t):t}})},Rickshaw.namespace("Rickshaw.Series"),Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(t,e,n){n=n||{},this.palette=new Rickshaw.Color.Palette(e),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase;var i="undefined"==typeof n.timeInterval?1e3:n.timeInterval;this.setTimeInterval(i),t&&"object"==typeof t&&t instanceof Array&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(t){if("undefined"==typeof t.name)throw"addItem() needs a name";t.color=t.color||this.palette.color(t.name),t.data=t.data||[],0==t.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(e){t.data.push({x:e.x,y:0})}):0==t.data.length&&t.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},addData:function(t){var e=this.getIndex();Rickshaw.keys(t).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(n){n.data.push({x:(e*this.timeInterval||1)+this.timeBase,y:t[n.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var t={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(e){var n={color:e.color,name:e.name,data:[]};e.data.forEach(function(t){n.data.push({x:t.x,y:t.y})}),t.items.push(n)}),t},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))
},this)}}),Rickshaw.Series.zeroFill=function(t){Rickshaw.Series.fill(t,0)},Rickshaw.Series.fill=function(t,e){for(var n,i=0,r=t.map(function(t){return t.data});i<Math.max.apply(null,r.map(function(t){return t.length}));)n=Math.min.apply(null,r.filter(function(t){return t[i]}).map(function(t){return t[i].x})),r.forEach(function(t){t[i]&&t[i].x==n||t.splice(i,0,{x:n,y:e})}),i++},Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(t,e,n){var n=n||{};if("undefined"==typeof n.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof n.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(e),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase,this.setTimeInterval(n.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=n.maxDataPoints,t&&"object"==typeof t&&t instanceof Array&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var i=this.maxDataPoints-this.currentSize-1;i>0;i--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)},addData:function($super,t){if($super(t),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}});var RenderControls=function(t){this.initialize=function(){this.element=t.element,this.graph=t.graph,this.settings=this.serialize(),this.inputs={renderer:this.element.elements.renderer,interpolation:this.element.elements.interpolation,offset:this.element.elements.offset},this.element.addEventListener("change",function(t){this.settings=this.serialize(),"renderer"==t.target.name&&this.setDefaultOffset(t.target.value),this.syncOptions(),this.settings=this.serialize();var e={renderer:this.settings.renderer,interpolation:this.settings.interpolation};"value"==this.settings.offset?(e.unstack=!0,e.offset="zero"):"expand"==this.settings.offset?(e.unstack=!1,e.offset=this.settings.offset):(e.unstack=!1,e.offset=this.settings.offset),this.graph.configure(e),this.graph.render()}.bind(this),!1)},this.serialize=function(){var t={},e=$(this.element).serializeArray();return e.forEach(function(e){t[e.name]=e.value}),t},this.syncOptions=function(){var t=this.rendererOptions[this.settings.renderer];Array.prototype.forEach.call(this.inputs.interpolation,function(e){t.interpolation?(e.disabled=!1,e.parentNode.classList.remove("disabled")):(e.disabled=!0,e.parentNode.classList.add("disabled"))}),Array.prototype.forEach.call(this.inputs.offset,function(e){t.offset.filter(function(t){return t==e.value}).length?(e.disabled=!1,e.parentNode.classList.remove("disabled")):(e.disabled=!0,e.parentNode.classList.add("disabled"))}.bind(this))},this.setDefaultOffset=function(t){var e=this.rendererOptions[t];e.defaults&&e.defaults.offset&&Array.prototype.forEach.call(this.inputs.offset,function(t){t.checked=t.value==e.defaults.offset?!0:!1}.bind(this))},this.rendererOptions={area:{interpolation:!0,offset:["zero","wiggle","expand","value"],defaults:{offset:"zero"}},line:{interpolation:!0,offset:["expand","value"],defaults:{offset:"value"}},bar:{interpolation:!1,offset:["zero","wiggle","expand","value"],defaults:{offset:"zero"}},scatterplot:{interpolation:!1,offset:["value"],defaults:{offset:"value"}}},this.initialize()};+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]}}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one(t.support.transition.end,function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()})}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var o=t.camelCase(["scroll",r].join("-"));this.$element.one(t.support.transition.end,t.proxy(s,this)).emulateTransitionEnd(350)[r](this.$element[0][o])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?(this.$element[n](0).one(t.support.transition.end,t.proxy(i,this)).emulateTransitionEnd(350),void 0):i.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),s=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);r||i.data("bs.collapse",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(r),o=s.data("bs.collapse"),a=o?"toggle":i.data(),l=i.attr("data-parent"),u=l&&t(l);o&&o.transitioning||(u&&u.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(a)})}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i);for(var r=this.options.trigger.split(" "),s=r.length;s--;){var o=r[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focus",l="hover"==o?"mouseleave":"blur";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,s=r.test(i);s&&(i=i.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var o=this.getPosition(),a=n[0].offsetWidth,l=n[0].offsetHeight;if(s){var u=this.$element.parent(),h=i,c=document.documentElement.scrollTop||document.body.scrollTop,f="body"==this.options.container?window.innerWidth:u.outerWidth(),d="body"==this.options.container?window.innerHeight:u.outerHeight(),p="body"==this.options.container?0:u.offset().left;i="bottom"==i&&o.top+o.height+l-c>d?"top":"top"==i&&o.top-c-l<0?"bottom":"right"==i&&o.right+a>f?"left":"left"==i&&o.left-a<p?"right":i,n.removeClass(h).addClass(i)}var g=this.getCalculatedOffset(i,o,a,l);this.applyPlacement(g,i),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var n,i=this.tip(),r=i[0].offsetWidth,s=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),t.top=t.top+o,t.left=t.left+a,i.offset(t).addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;if("top"==e&&u!=s&&(n=!0,t.top=t.top+s-u),/bottom|top/.test(e)){var h=0;t.left<0&&(h=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,u=i[0].offsetHeight),this.replaceArrow(h-r+l,l,"left")}else this.replaceArrow(u-s,u,"top");n&&i.offset(t)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),s="object"==typeof n&&n;r||i.data("bs.tooltip",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("bs.popover"),s="object"==typeof n&&n;r||i.data("bs.popover",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i)};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",r=n.data();t+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var e=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===e.prop("type")&&t.find(".active").removeClass("active")}this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("bs.button"),s="object"==typeof n&&n;r||i.data("bs.button",r=new e(this,s)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),e.preventDefault()})}(window.jQuery),+function(t){"use strict";function e(){t(i).remove(),t(r).each(function(e){var i=n(t(this));i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown")),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}var i=".dropdown-backdrop",r="[data-toggle=dropdown]",s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var s=n(r),o=s.hasClass("open");if(e(),!o){if("ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),s.trigger(i=t.Event("show.bs.dropdown")),i.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown"),r.focus()}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(!o||o&&27==e.keyCode)return 27==e.which&&s.find(r).focus(),i.click();var a=t("[role=menu] li:not(.divider):visible a",s);if(a.length){var l=a.index(a.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<a.length-1&&l++,~l||(l=0),a.eq(l).focus()}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu]",s.prototype.keydown)}(window.jQuery),function(){function t(t){for(var e=t.source,i=t.target,r=n(e,i),s=[e];e!==r;)e=e.parent,s.push(e);for(var o=s.length;i!==r;)s.splice(o,0,i),i=i.parent;return s}function e(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function n(t,n){if(t===n)return t;for(var i=e(t),r=e(n),s=i.pop(),o=r.pop(),a=null;s===o;)a=s,s=i.pop(),o=r.pop();return a}function i(t){t.fixed|=2}function r(t){t!==J&&(t.fixed&=1)}function s(){o(),J.fixed&=1,Z=J=null}function o(){J.px+=d3.event.dx,J.py+=d3.event.dy,Z.resume()}function a(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var s,o=t.nodes,l=o.length,u=-1;++u<l;)s=o[u],null!=s&&(a(s,e,n),t.charge+=s.charge,i+=s.charge*s.cx,r+=s.charge*s.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*n[t.point.index];t.charge+=t.pointCharge=h,i+=h*t.point.x,r+=h*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function l(){return 20}function u(){return 1}function h(t){return t.x}function c(t){return t.y}function f(t,e,n){t.y0=e,t.y=n}function p(t){for(var e,n=1,i=0,r=t[0][1],s=t.length;s>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function g(t){return t.reduce(m,0)}function m(t,e){return t+e[1]}function v(t,e){return y(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function y(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,s=[];++n<=e;)s[n]=r*n+i;return s}function _(t){return[d3.min(t),d3.max(t)]}function b(t,e){return t.sort=d3.rebind(t,e.sort),t.children=d3.rebind(t,e.children),t.links=C,t.value=d3.rebind(t,e.value),t.nodes=function(e){return ie=!0,(t.nodes=t)(e)},t}function w(t){return t.children}function x(t){return t.value}function k(t,e){return e.value-t.value}function C(t){return d3.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function M(t,e){return t.value-e.value}function S(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function P(t,e){t._pack_next=e,e._pack_prev=t}function T(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-n*n-i*i>.001}function E(t){function e(t){a=Math.min(t.x-t.r,a),l=Math.max(t.x+t.r,l),u=Math.min(t.y-t.r,u),h=Math.max(t.y+t.r,h)}var n,i,r,s,o,a=1/0,l=-1/0,u=1/0,h=-1/0,c=t.length;if(t.forEach(z),n=t[0],n.x=-n.r,n.y=0,e(n),c>1&&(i=t[1],i.x=i.r,i.y=0,e(i),c>2)){r=t[2],D(n,i,r),e(r),S(n,r),n._pack_prev=r,S(r,i),i=n._pack_next;for(var f=3;c>f;f++){D(n,i,r=t[f]);var d=0,p=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,p++)if(T(s,r)){d=1;break}if(1==d)for(o=n._pack_prev;o!==s._pack_prev;o=o._pack_prev,g++)if(T(o,r)){p>g&&(d=-1,s=o);break}0==d?(S(n,r),i=r,e(r)):d>0?(P(n,s),i=s,f--):(P(s,i),n=s,f--)}}for(var m=(a+l)/2,v=(u+h)/2,y=0,f=0;c>f;f++){var _=t[f];_.x-=m,_.y-=v,y=Math.max(y,_.r+Math.sqrt(_.x*_.x+_.y*_.y))}return t.forEach(I),y}function z(t){t._pack_next=t._pack_prev=t}function I(t){delete t._pack_next,delete t._pack_prev}function R(t){var e=t.children;e&&e.length?(e.forEach(R),t.r=E(e)):t.r=Math.sqrt(t.value)}function $(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var s=-1,o=r.length;++s<o;)$(r[s],e,n,i)}function D(t,e,n){var i=t.r+n.r,r=e.x-t.x,s=e.y-t.y;if(i&&(r||s)){var o=e.r+n.r,a=Math.sqrt(r*r+s*s),l=Math.max(-1,Math.min(1,(i*i+a*a-o*o)/(2*i*a))),u=Math.acos(l),h=l*(i/=a),c=Math.sin(u)*i;n.x=t.x+h*r+c*s,n.y=t.y+h*s-c*r}else n.x=t.x+i,n.y=t.y}function A(t){return 1+d3.max(t,function(t){return t.y})}function N(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function L(t){var e=t.children;return e&&e.length?L(e[0]):t}function H(t){var e,n=t.children;return n&&(e=n.length)?H(n[e-1]):t}function O(t,e){return t.parent==e.parent?1:2}function j(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function q(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function W(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,s=-1;++s<r;)e(i=W(n[s],e),t)>0&&(t=i);return t}function F(t,e){return t.x-e.x}function U(t,e){return e.x-t.x}function B(t,e){return t.depth-e.depth}function Y(t,e){function n(t,i){var r=t.children;if(r&&(o=r.length))for(var s,o,a=null,l=-1;++l<o;)s=r[l],n(s,a),a=s;e(t,i)}n(t,null)}function G(t){for(var e,n=0,i=0,r=t.children,s=r.length;--s>=0;)e=r[s]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function Q(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function X(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function V(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function K(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],s=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>s&&(i+=s/2,s=0),{x:n,y:i,dx:r,dy:s}}d3.layout={},d3.layout.bundle=function(){return function(e){for(var n=[],i=-1,r=e.length;++i<r;)n.push(t(e[i]));return n}},d3.layout.chord=function(){function t(){var t,u,c,f,d,p={},g=[],m=d3.range(s),v=[];for(n=[],i=[],t=0,f=-1;++f<s;){for(u=0,d=-1;++d<s;)u+=r[f][d];g.push(u),v.push(d3.range(s)),t+=u}for(o&&m.sort(function(t,e){return o(g[t],g[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),t=(2*Math.PI-h*s)/t,u=0,f=-1;++f<s;){for(c=u,d=-1;++d<s;){var y=m[f],_=v[y][d],b=r[y][_],w=u,x=u+=b*t;p[y+"-"+_]={index:y,subindex:_,startAngle:w,endAngle:x,value:b}}i.push({index:y,startAngle:c,endAngle:u,value:(u-c)/t}),u+=h}for(f=-1;++f<s;)for(d=f-1;++d<s;){var k=p[f+"-"+d],C=p[d+"-"+f];(k.value||C.value)&&n.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,s,o,a,l,u={},h=0;return u.matrix=function(t){return arguments.length?(s=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(h=t,n=i=null,u):h},u.sortGroups=function(t){return arguments.length?(o=t,n=i=null,u):o},u.sortSubgroups=function(t){return arguments.length?(a=t,n=null,u):a},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},d3.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var s=e.cx-t.x,o=e.cy-t.y,a=1/Math.sqrt(s*s+o*o);if(k>(r-n)*a){var l=e.charge*a*a;return t.px-=s*l,t.py-=o*l,!0}if(e.point&&isFinite(a)){var l=e.pointCharge*a*a;t.px-=s*l,t.py-=o*l}}return!e.charge}}function e(){var e,n,i,r,s,o,l,u,h,g=C.length,_=M.length;for(n=0;_>n;++n)i=M[n],r=i.source,s=i.target,u=s.x-r.x,h=s.y-r.y,(o=u*u+h*h)&&(o=c*d[n]*((o=Math.sqrt(o))-f[n])/o,u*=o,h*=o,s.x-=u*(l=r.weight/(s.weight+r.weight)),s.y-=h*l,r.x+=u*(l=1-l),r.y+=h*l);if((l=c*x)&&(u=v[0]/2,h=v[1]/2,n=-1,l))for(;++n<g;)i=C[n],i.x+=(u-i.x)*l,i.y+=(h-i.y)*l;if(w)for(a(e=d3.geom.quadtree(C),c,p),n=-1;++n<g;)(i=C[n]).fixed||e.visit(t(i));for(n=-1;++n<g;)i=C[n],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*y,i.y-=(i.py-(i.py=i.y))*y);return m.tick({type:"tick",alpha:c}),(c*=.99)<.005}function n(t){i(J=t),Z=g}var h,c,f,d,p,g={},m=d3.dispatch("tick"),v=[1,1],y=.9,_=l,b=u,w=-30,x=.1,k=.8,C=[],M=[];return g.on=function(t,e){return m.on(t,e),g},g.nodes=function(t){return arguments.length?(C=t,g):C},g.links=function(t){return arguments.length?(M=t,g):M},g.size=function(t){return arguments.length?(v=t,g):v},g.linkDistance=function(t){return arguments.length?(_=d3.functor(t),g):_},g.distance=g.linkDistance,g.linkStrength=function(t){return arguments.length?(b=d3.functor(t),g):b},g.friction=function(t){return arguments.length?(y=t,g):y},g.charge=function(t){return arguments.length?(w="function"==typeof t?t:+t,g):w},g.gravity=function(t){return arguments.length?(x=t,g):x},g.theta=function(t){return arguments.length?(k=t,g):k},g.start=function(){function t(t,i){for(var r,s=e(n),o=-1,a=s.length;++o<a;)if(!isNaN(r=s[o][t]))return r;return Math.random()*i}function e(){if(!r){for(r=[],i=0;o>i;++i)r[i]=[];for(i=0;a>i;++i){var t=M[i];r[t.source.index].push(t.target),r[t.target.index].push(t.source)}}return r[n]}var n,i,r,s,o=C.length,a=M.length,l=v[0],u=v[1];for(n=0;o>n;++n)(s=C[n]).index=n,s.weight=0;for(f=[],d=[],n=0;a>n;++n)s=M[n],"number"==typeof s.source&&(s.source=C[s.source]),"number"==typeof s.target&&(s.target=C[s.target]),f[n]=_.call(this,s,n),d[n]=b.call(this,s,n),++s.source.weight,++s.target.weight;for(n=0;o>n;++n)s=C[n],isNaN(s.x)&&(s.x=t("x",l)),isNaN(s.y)&&(s.y=t("y",u)),isNaN(s.px)&&(s.px=s.x),isNaN(s.py)&&(s.py=s.y);if(p=[],"function"==typeof w)for(n=0;o>n;++n)p[n]=+w.call(this,C[n],n);else for(n=0;o>n;++n)p[n]=w;return g.resume()},g.resume=function(){return c=.1,d3.timer(e),g},g.stop=function(){return c=0,g},g.drag=function(){h||(h=d3.behavior.drag().on("dragstart",n).on("drag",o).on("dragend",s)),this.on("mouseover.force",i).on("mouseout.force",r).call(h)},g};var Z,J;d3.layout.partition=function(){function t(e,n,i,r){var s=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,s&&(o=s.length)){var o,a,l,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(a=s[u],n,l=a.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,s=-1;++s<r;)i=Math.max(i,e(n[s]));return 1+i}function n(n,s){var o=i.call(this,n,s);return t(o[0],0,r[0],r[1]/e(o[0])),o}var i=d3.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},b(n,i)},d3.layout.pie=function(){function t(s){var o=s.map(function(n,i){return+e.call(t,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-i)/d3.sum(o),u=d3.range(s.length);null!=n&&u.sort(n===te?function(t,e){return o[e]-o[t]}:function(t,e){return n(s[t],s[e])});var h=u.map(function(t){return{data:s[t],value:d=o[t],startAngle:a,endAngle:a+=d*l}});return s.map(function(t,e){return h[u[e]]})}var e=Number,n=te,i=0,r=2*Math.PI;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var te={};d3.layout.stack=function(){function t(a,l){var u=a.map(function(n,i){return e.call(t,n,i)}),h=u.map(function(e){return e.map(function(e,n){return[s.call(t,e,n),o.call(t,e,n)]})}),c=n.call(t,h,l);u=d3.permute(u,c),h=d3.permute(h,c);var f,d,p,g=i.call(t,h,l),m=u.length,v=u[0].length;for(d=0;v>d;++d)for(r.call(t,u[0][d],p=g[d],h[0][d][1]),f=1;m>f;++f)r.call(t,u[f][d],p+=h[f-1][d][1],h[f][d][1]);return a}var e=Object,n=ee["default"],i=ne.zero,r=f,s=h,o=c;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:ee[e],t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:ne[e],t):i},t.x=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(r=e,t):r},t};var ee={"inside-out":function(t){var e,n,i=t.length,r=t.map(p),s=t.map(g),o=d3.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,l=0,u=[],h=[];for(e=0;i>e;++e)n=o[e],l>a?(a+=s[n],u.push(n)):(l+=s[n],h.push(n));return h.reverse().concat(u)},reverse:function(t){return d3.range(t.length).reverse()},"default":function(t){return d3.range(t.length)}},ne={silhouette:function(t){var e,n,i,r=t.length,s=t[0].length,o=[],a=0,l=[];for(n=0;s>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>a&&(a=i),o.push(i)}for(n=0;s>n;++n)l[n]=(a-o[n])/2;return l},wiggle:function(t){var e,n,i,r,s,o,a,l,u,h=t.length,c=t[0],f=c.length,d=[];for(d[0]=l=u=0,n=1;f>n;++n){for(e=0,r=0;h>e;++e)r+=t[e][n][1];for(e=0,s=0,a=c[n][0]-c[n-1][0];h>e;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)o+=(t[i][n][1]-t[i][n-1][1])/a;s+=o*t[e][n][1]}d[n]=l-=r?s/r*a:0,u>l&&(u=l)}for(n=0;f>n;++n)d[n]-=u;return d},expand:function(t){var e,n,i,r=t.length,s=t[0].length,o=1/r,a=[];for(n=0;s>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;s>n;++n)a[n]=0;return a},zero:function(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}};d3.layout.histogram=function(){function t(t,s){for(var o,a,l=[],u=t.map(n,this),h=i.call(this,u,s),c=r.call(this,h,u,s),s=-1,f=u.length,d=c.length-1,p=e?1:1/f;++s<d;)o=l[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;for(s=-1;++s<f;)a=u[s],a>=h[0]&&a<=h[1]&&(o=l[d3.bisect(c,a,1,d)-1],o.y+=p,o.push(t[s]));return l}var e=!0,n=Number,i=_,r=v;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=d3.functor(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return y(t,e)}:d3.functor(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},d3.layout.hierarchy=function(){function t(e,o,a){var l=r.call(n,e,o),u=ie?e:{data:e};if(u.depth=o,a.push(u),l&&(h=l.length)){for(var h,c=-1,f=u.children=[],p=0,g=o+1;++c<h;)d=t(l[c],g,a),d.parent=u,f.push(d),p+=d.value;i&&f.sort(i),s&&(u.value=p)}else s&&(u.value=+s.call(n,e,o)||0);return u}function e(t,i){var r=t.children,o=0;if(r&&(a=r.length))for(var a,l=-1,u=i+1;++l<a;)o+=e(r[l],u);else s&&(o=+s.call(n,ie?t:t.data,i)||0);return s&&(t.value=o),o}function n(e){var n=[];return t(e,0,n),n}var i=k,r=w,s=x;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(s=t,n):s},n.revalue=function(t){return e(t,0),t},n};var ie=!1;d3.layout.pack=function(){function t(t,i){var r=e.call(this,t,i),s=r[0];s.x=0,s.y=0,R(s);var o=n[0],a=n[1],l=1/Math.max(2*s.r/o,2*s.r/a);return $(s,o/2,a/2,l),r}var e=d3.layout.hierarchy().sort(M),n=[1,1];return t.size=function(e){return arguments.length?(n=e,t):n},b(t,e)},d3.layout.cluster=function(){function t(t,r){var s,o=e.call(this,t,r),a=o[0],l=0;Y(a,function(t){var e=t.children;e&&e.length?(t.x=N(e),t.y=A(e)):(t.x=s?l+=n(t,s):0,t.y=0,s=t)});var u=L(a),h=H(a),c=u.x-n(u,h)/2,f=h.x+n(h,u)/2;return Y(a,function(t){t.x=(t.x-c)/(f-c)*i[0],t.y=(1-t.y/a.y)*i[1]}),o}var e=d3.layout.hierarchy().sort(null).value(null),n=O,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},b(t,e)},d3.layout.tree=function(){function t(t,r){function s(t,e){var i=t.children,r=t._tree;if(i&&(o=i.length)){for(var o,l,u,h=i[0],c=h,f=-1;++f<o;)u=i[f],s(u,l),c=a(u,l,c),l=u;G(t);var d=.5*(h._tree.prelim+u._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-d):r.prelim=d}else e&&(r.prelim=e._tree.prelim+n(t,e))}function o(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;++r<i;)o(n[r],e)}}function a(t,e,i){if(e){for(var r,s=t,o=t,a=e,l=t.parent.children[0],u=s._tree.mod,h=o._tree.mod,c=a._tree.mod,f=l._tree.mod;a=q(a),s=j(s),a&&s;)l=j(l),o=q(o),o._tree.ancestor=t,r=a._tree.prelim+c-s._tree.prelim-u+n(a,s),r>0&&(Q(X(a,t,i),t,r),u+=r,h+=r),c+=a._tree.mod,u+=s._tree.mod,f+=l._tree.mod,h+=o._tree.mod;
a&&!q(o)&&(o._tree.thread=a,o._tree.mod+=c-h),s&&!j(l)&&(l._tree.thread=s,l._tree.mod+=u-f,i=t)}return i}var l=e.call(this,t,r),u=l[0];Y(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),s(u),o(u,-u._tree.prelim);var h=W(u,U),c=W(u,F),f=W(u,B),d=h.x-n(h,c)/2,p=c.x+n(c,h)/2,g=f.depth||1;return Y(u,function(t){t.x=(t.x-d)/(p-d)*i[0],t.y=t.depth/g*i[1],delete t._tree}),l}var e=d3.layout.hierarchy().sort(null).value(null),n=O,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},b(t,e)},d3.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,s=t.length;++r<s;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var s=n.children;if(s&&s.length){var o,a,l,u=c(n),h=[],f=s.slice(),d=1/0,p=Math.min(u.dx,u.dy);for(t(f,u.dx*u.dy/n.value),h.area=0;(l=f.length)>0;)h.push(o=f[l-1]),h.area+=o.area,(a=i(h,p))<=d?(f.pop(),d=a):(h.area-=h.pop().area,r(h,p,u,!1),p=Math.min(u.dx,u.dy),h.length=h.area=0,d=1/0);h.length&&(r(h,p,u,!0),h.length=h.area=0),s.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var s,o=c(e),a=i.slice(),l=[];for(t(a,o.dx*o.dy/e.value),l.area=0;s=a.pop();)l.push(s),l.area+=s.area,null!=s.z&&(r(l,s.z?o.dx:o.dy,o,!a.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,s=1/0,o=-1,a=t.length;++o<a;)(n=t[o].area)&&(s>n&&(s=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*d/i,i/(e*s*d)):1/0}function r(t,e,n,i){var r,s=-1,o=t.length,a=n.x,u=n.y,h=e?l(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=h?n.dy:0);++s<o;)r=t[s],r.x=a,r.y=u,r.dy=h,a+=r.dx=h?l(r.area/h):0;r.z=!0,r.dx+=n.x+n.dx-a,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=h?n.dx:0);++s<o;)r=t[s],r.x=a,r.y=u,r.dx=h,u+=r.dy=h?l(r.area/h):0;r.z=!1,r.dy+=n.y+n.dy-u,n.x+=h,n.dx-=h}}function s(i){var r=o||a(i),s=r[0];return s.x=0,s.y=0,s.dx=u[0],s.dy=u[1],o&&a.revalue(s),t([s],s.dx*s.dy/s.value),(o?n:e)(s),f&&(o=r),r}var o,a=d3.layout.hierarchy(),l=Math.round,u=[1,1],h=null,c=V,f=!1,d=.5*(1+Math.sqrt(5));return s.size=function(t){return arguments.length?(u=t,s):u},s.padding=function(t){function e(e){var n=t.call(s,e,e.depth);return null==n?V(e):K(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return K(e,t)}if(!arguments.length)return h;var i;return c=null==(h=t)?V:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,s},s.round=function(t){return arguments.length?(l=t?Math.round:Number,s):l!=Number},s.sticky=function(t){return arguments.length?(f=t,o=null,s):f},s.ratio=function(t){return arguments.length?(d=t,s):d},b(s,a)}}(),function(t,e){function n(e,n){var r,s,o,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,s=r.name,e.href&&s&&"map"===r.nodeName.toLowerCase()?(o=t("img[usemap=#"+s+"]")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,s=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.10.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,n){return"number"==typeof e?this.each(function(){var i=this;setTimeout(function(){t(i).focus(),n&&n.call(i)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,r,s=t(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(s.css("zIndex"),10),!isNaN(r)&&0!==r))return r;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function r(e,n,i,r){return t.each(s,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,r(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,r(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var r,s=t.ui[e].prototype;for(r in i)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([n,i[r]])},call:function(t,e,n){var i,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)t.options[r[i][0]]&&r[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0?!0:(e[i]=1,r=e[i]>0,e[i]=0,r)}}))}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(s){}r(e)},t.widget=function(e,n,i){var r,s,o,a,l={},u=e.split(".")[0];e=e.split(".")[1],r=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[u]=t[u]||{},s=t[u][e],o=t[u][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,s,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){return t.isFunction(i)?(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,s=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=s,e}}(),void 0):(l[e]=i,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix:e},l,{constructor:o,namespace:u,widgetName:e,widgetFullName:r}),s?(t.each(s._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(n){for(var r,s,o=i.call(arguments,1),a=0,l=o.length;l>a;a++)for(r in o[a])s=o[a][r],o[a].hasOwnProperty(r)&&s!==e&&(n[r]=t.isPlainObject(s)?t.isPlainObject(n[r])?t.widget.extend({},n[r],s):t.widget.extend({},s):s);return n},t.widget.bridge=function(n,r){var s=r.prototype.widgetFullName||n;t.fn[n]=function(o){var a="string"==typeof o,l=i.call(arguments,1),u=this;return o=!a&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,a?this.each(function(){var i,r=t.data(this,s);return r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,l),i!==r&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(o||{})._init():t.data(this,s,new r(o,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,s,o,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(s=a[n]=t.widget.extend({},this.options[n]),o=0;o<r.length-1;o++)s[r[o]]=s[r[o]]||{},s=s[r[o]];if(n=r.pop(),i===e)return s[n]===e?null:s[n];s[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var r,s=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,o){function a(){return e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+s.eventNamespace,h=l[2];h?r.delegate(h,u,a):n.bind(u,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,s,o=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(r in s)r in n||(n[r]=s[r]);return this.element.trigger(n,i),!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,s){"string"==typeof r&&(r={effect:r});var o,a=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=s,r.delay&&i.delay(r.delay),o&&t.effects&&t.effects.effect[a]?i[e](r):a!==e&&i[a]?i[a](r.duration,r.easing,s):i.queue(function(n){t(this)[e](),s&&s.call(i[0]),n()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,s="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function n(t,e,n){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function r(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var s,o=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,d=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(s!==e)return s;var n,i,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return t("body").append(r),n=o.offsetWidth,r.css("overflow","scroll"),i=o.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),s=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,s="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var s,d,g,m,v,y,_=t(e.of),b=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(b),x=(e.collision||"flip").split(" "),k={};return y=r(_),_[0].preventDefault&&(e.at="left top"),d=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=c.exec(i[0]),n=c.exec(i[1]),k[this]=[t?t[0]:0,n?n[0]:0],e[this]=[f.exec(i[0])[0],f.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=d:"center"===e.at[0]&&(v.left+=d/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),s=n(k.at,d,g),v.left+=s[0],v.top+=s[1],this.each(function(){var r,u,h=t(this),c=h.outerWidth(),f=h.outerHeight(),p=i(this,"marginLeft"),y=i(this,"marginTop"),C=c+p+i(this,"marginRight")+w.width,M=f+y+i(this,"marginBottom")+w.height,S=t.extend({},v),P=n(k.my,h.outerWidth(),h.outerHeight());"right"===e.my[0]?S.left-=c:"center"===e.my[0]&&(S.left-=c/2),"bottom"===e.my[1]?S.top-=f:"center"===e.my[1]&&(S.top-=f/2),S.left+=P[0],S.top+=P[1],t.support.offsetFractions||(S.left=l(S.left),S.top=l(S.top)),r={marginLeft:p,marginTop:y},t.each(["left","top"],function(n,i){t.ui.position[x[n]]&&t.ui.position[x[n]][i](S,{targetWidth:d,targetHeight:g,elemWidth:c,elemHeight:f,collisionPosition:r,collisionWidth:C,collisionHeight:M,offset:[s[0]+P[0],s[1]+P[1]],my:e.my,at:e.at,within:b,elem:h})}),e.using&&(u=function(t){var n=m.left-S.left,i=n+d-c,r=m.top-S.top,s=r+g-f,l={target:{element:_,left:m.left,top:m.top,width:d,height:g},element:{element:h,left:S.left,top:S.top,width:c,height:f},horizontal:0>i?"left":n>0?"right":"center",vertical:0>s?"top":r>0?"bottom":"middle"};c>d&&a(n+i)<d&&(l.horizontal="center"),f>g&&a(r+s)<g&&(l.vertical="middle"),l.important=o(a(n),a(i))>o(a(r),a(s))?"horizontal":"vertical",e.using.call(this,t,l)}),h.offset(t.extend(S,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,u=a+e.collisionWidth-s-r;e.collisionWidth>s?l>0&&0>=u?(n=t.left+l+e.collisionWidth-s-r,t.left+=l-n):t.left=u>0&&0>=l?r:l>u?r+s-e.collisionWidth:r:l>0?t.left+=l:u>0?t.left-=u:t.left=o(t.left-a,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,s=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,u=a+e.collisionHeight-s-r;e.collisionHeight>s?l>0&&0>=u?(n=t.top+l+e.collisionHeight-s-r,t.top+=l-n):t.top=u>0&&0>=l?r:l>u?r+s-e.collisionHeight:r:l>0?t.top+=l:u>0?t.top-=u:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,s=r.offset.left+r.scrollLeft,o=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,h=u-l,c=u+e.collisionWidth-o-l,f="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];0>h?(n=t.left+f+d+p+e.collisionWidth-o-s,(0>n||n<a(h))&&(t.left+=f+d+p)):c>0&&(i=t.left-e.collisionPosition.marginLeft+f+d+p-l,(i>0||a(i)<c)&&(t.left+=f+d+p))},top:function(t,e){var n,i,r=e.within,s=r.offset.top+r.scrollTop,o=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,h=u-l,c=u+e.collisionHeight-o-l,f="top"===e.my[1],d=f?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>h?(i=t.top+d+p+g+e.collisionHeight-o-s,t.top+d+p+g>h&&(0>i||i<a(h))&&(t.top+=d+p+g)):c>0&&(n=t.top-e.collisionPosition.marginTop+d+p+g-l,t.top+d+p+g>c&&(n>0||a(n)<c)&&(t.top+=d+p+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,r,s,o=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in i)e.style[s]=i[s];e.appendChild(a),n=o||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&11>r,e.innerHTML="",n.removeChild(e)}()}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n,i=this,r=!1,s=!1;for(t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];n&&(n=n.parentNode);)n===document&&(r=!0);return r||"original"!==this.options.helper?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var n=this.options.handle&&t(this.options.handle,this.element).length?!1:!0;return t(this.options.handle,this.element).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;if("parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=["document"===r.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===r.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===r.containment?0:t(window).scrollLeft())+t("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===r.containment?0:t(window).scrollTop())+(t("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||r.containment.constructor===Array)r.containment.constructor===Array&&(this.containment=r.containment);else{if(n=t(r.containment),i=n[0],!i)return;e="hidden"!==t(i).css("overflow"),this.containment=[(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0),(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*i}},_generatePosition:function(e){var n,i,r,s,o=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName),u=e.pageX,h=e.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(u=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(h=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(u=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(h=n[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,u=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),r=i.options,s=t.extend({},n,{item:i.element});i.sortables=[],t(r.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,s))})},stop:function(e,n){var i=t(this).data("ui-draggable"),r=t.extend({},n,{item:i.element});
t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,n){var i=t(this).data("ui-draggable"),r=this;t.each(i.sortables,function(){var s=!1,o=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,r,s,o,a,l,u,h,c,f,d=t(this).data("ui-draggable"),p=d.options,g=p.snapTolerance,m=n.offset.left,v=m+d.helperProportions.width,y=n.offset.top,_=y+d.helperProportions.height;for(c=d.snapElements.length-1;c>=0;c--)a=d.snapElements[c].left,l=a+d.snapElements[c].width,u=d.snapElements[c].top,h=u+d.snapElements[c].height,m>a-g&&l+g>m&&y>u-g&&h+g>y||m>a-g&&l+g>m&&_>u-g&&h+g>_||v>a-g&&l+g>v&&y>u-g&&h+g>y||v>a-g&&l+g>v&&_>u-g&&h+g>_?("inner"!==p.snapMode&&(i=Math.abs(u-_)<=g,r=Math.abs(h-y)<=g,s=Math.abs(a-v)<=g,o=Math.abs(l-m)<=g,i&&(n.position.top=d._convertPositionTo("relative",{top:u-d.helperProportions.height,left:0}).top-d.margins.top),r&&(n.position.top=d._convertPositionTo("relative",{top:h,left:0}).top-d.margins.top),s&&(n.position.left=d._convertPositionTo("relative",{top:0,left:a-d.helperProportions.width}).left-d.margins.left),o&&(n.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left)),f=i||r||s||o,"outer"!==p.snapMode&&(i=Math.abs(u-y)<=g,r=Math.abs(h-_)<=g,s=Math.abs(a-m)<=g,o=Math.abs(l-v)<=g,i&&(n.position.top=d._convertPositionTo("relative",{top:u,left:0}).top-d.margins.top),r&&(n.position.top=d._convertPositionTo("relative",{top:h-d.helperProportions.height,left:0}).top-d.margins.top),s&&(n.position.left=d._convertPositionTo("relative",{top:0,left:a}).left-d.margins.left),o&&(n.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[c].snapping&&(i||r||s||o||f)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,e,t.extend(d._uiHash(),{snapItem:d.snapElements[c].item})),d.snapElements[c].snapping=i||r||s||o||f):(d.snapElements[c].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,e,t.extend(d._uiHash(),{snapItem:d.snapElements[c].item})),d.snapElements[c].snapping=!1)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(t){function e(t,e,n){return t>e&&e+n>t}t.widget("ui.droppable",{version:"1.10.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,n=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,n=t.ui.ddmanager.droppables[this.options.scope];e<n.length;e++)n[e]===this&&n.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){"accept"===e&&(this.accept=t.isFunction(n)?n:function(t){return t.is(n)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,r=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&t.ui.intersect(i,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,n,i){if(!n.offset)return!1;var r,s,o=(t.positionAbs||t.position.absolute).left,a=o+t.helperProportions.width,l=(t.positionAbs||t.position.absolute).top,u=l+t.helperProportions.height,h=n.offset.left,c=h+n.proportions.width,f=n.offset.top,d=f+n.proportions.height;switch(i){case"fit":return o>=h&&c>=a&&l>=f&&d>=u;case"intersect":return h<o+t.helperProportions.width/2&&a-t.helperProportions.width/2<c&&f<l+t.helperProportions.height/2&&u-t.helperProportions.height/2<d;case"pointer":return r=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,s=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(s,f,n.proportions.height)&&e(r,h,n.proportions.width);case"touch":return(l>=f&&d>=l||u>=f&&d>=u||f>l&&u>d)&&(o>=h&&c>=o||a>=h&&c>=a||h>o&&a>c);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var i,r,s=t.ui.ddmanager.droppables[e.options.scope]||[],o=n?n.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<s.length;i++)if(!(s[i].options.disabled||e&&!s[i].accept.call(s[i].element[0],e.currentItem||e.element))){for(r=0;r<a.length;r++)if(a[r]===s[i].element[0]){s[i].proportions.height=0;continue t}s[i].visible="none"!==s[i].element.css("display"),s[i].visible&&("mousedown"===o&&s[i]._activate.call(s[i],n),s[i].offset=s[i].element.offset(),s[i].proportions={width:s[i].element[0].offsetWidth,height:s[i].element[0].offsetHeight})}},drop:function(e,n){var i=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,s,o=t.ui.intersect(e,this,this.options.tolerance),a=!o&&this.isover?"isout":o&&!this.isover?"isover":null;a&&(this.options.greedy&&(r=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===r}),s.length&&(i=t.data(s[0],"ui-droppable"),i.greedyChild="isover"===a)),i&&"isover"===a&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),i&&"isout"===a&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function n(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,n,i,r,s,o=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},n=0;n<e.length;n++)i=t.trim(e[n]),s="ui-resizable-"+i,r=t("<div class='ui-resizable-handle "+s+"'></div>"),r.css({zIndex:a.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(e){var n,i,r,s;e=e||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=t(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=t(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(r,s),this._proportionallyResize()),t(this.handles[n]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){a.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(e){var n,i,r=!1;for(n in this.handles)i=t(this.handles[n])[0],(i===e.target||t.contains(i,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(n){var i,r,s,o=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=e(this.helper.css("left")),r=e(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,r+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(e){var n,i=this.helper,r={},s=this.originalMousePosition,o=this.axis,a=this.position.top,l=this.position.left,u=this.size.width,h=this.size.height,c=e.pageX-s.left||0,f=e.pageY-s.top||0,d=this._change[o];return d?(n=d.apply(this,[e,c,f]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),this.position.top!==a&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==u&&(r.width=this.size.width+"px"),this.size.height!==h&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(r)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var n,i,r,s,o,a,l,u=this.options,h=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&t.ui.hasScroll(n[0],"left")?0:h.sizeDiff.height,s=i?0:h.sizeDiff.width,o={width:h.helper.width()-s,height:h.helper.height()-r},a=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,u.animate||this.element.css(t.extend(o,{top:l,left:a})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!u.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,r,s,o,a=this.options;o={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),r>o.minHeight&&(o.minHeight=r),i<o.maxWidth&&(o.maxWidth=i),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,r=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===r&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===r&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,r=n(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=n(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=n(t.width)&&e.minWidth&&e.minWidth>t.width,a=n(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),r&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&h&&(t.left=l-e.minWidth),r&&h&&(t.left=l-e.maxWidth),a&&c&&(t.top=u-e.minHeight),s&&c&&(t.top=u-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,n,i,r,s=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(r=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],e=0;e<n.length;e++)this.borderDif[e]=(parseInt(n[e],10)||0)+(parseInt(i[e],10)||0);r.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),o=s&&t.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=s?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-o},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,h=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,h&&u?{top:h,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&t(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var n,i,r,s,o,a,l,u=t(this).data("ui-resizable"),h=u.options,c=u.element,f=h.containment,d=f instanceof t?f.get(0):/parent/.test(f)?c.parent().get(0):f;d&&(u.containerElement=t(d),/document/.test(f)||f===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(n=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,r){i[t]=e(n.css("padding"+r))}),u.containerOffset=n.offset(),u.containerPosition=n.position(),u.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},r=u.containerOffset,s=u.containerSize.height,o=u.containerSize.width,a=t.ui.hasScroll(d,"left")?d.scrollWidth:o,l=t.ui.hasScroll(d)?d.scrollHeight:s,u.parentData={element:d,left:r.left,top:r.top,width:a,height:l}))},resize:function(e){var n,i,r,s,o=t(this).data("ui-resizable"),a=o.options,l=o.containerOffset,u=o.position,h=o._aspectRatio||e.shiftKey,c={top:0,left:0},f=o.containerElement;f[0]!==document&&/static/.test(f.css("position"))&&(c=l),u.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-c.left),h&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=a.helper?l.left:0),u.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),h&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),i=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-l.top)+o.sizeDiff.height),r=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),r&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,h&&(o.size.height=o.size.width/o.aspectRatio)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,h&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.containerOffset,r=e.containerPosition,s=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,u=o.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(s.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u}),e._helper&&!n.animate&&/static/.test(s.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):t.each(n.alsoResize,function(t){i(t)})},resize:function(e,n){var i=t(this).data("ui-resizable"),r=i.options,s=i.originalSize,o=i.originalPosition,a={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0},l=function(e,i){t(e).each(function(){var e=t(this),r=t(this).data("ui-resizable-alsoresize"),s={},o=i&&i.length?i:e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var n=(r[e]||0)+(a[e]||0);n&&n>=0&&(s[e]=n||null)}),e.css(s)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size,r=e.originalSize,s=e.originalPosition,o=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,u=a[1]||1,h=Math.round((i.width-r.width)/l)*l,c=Math.round((i.height-r.height)/u)*u,f=r.width+h,d=r.height+c,p=n.maxWidth&&n.maxWidth<f,g=n.maxHeight&&n.maxHeight<d,m=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>d;n.grid=a,m&&(f+=l),v&&(d+=u),p&&(f-=l),g&&(d-=u),/^(se|s|e)$/.test(o)?(e.size.width=f,e.size.height=d):/^(ne)$/.test(o)?(e.size.width=f,e.size.height=d,e.position.top=s.top-c):/^(sw)$/.test(o)?(e.size.width=f,e.size.height=d,e.position.left=s.left-h):(e.size.width=f,e.size.height=d,e.position.top=s.top-c,e.position.left=s.left-h)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(n.options.filter,n.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),n=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:n.left,top:n.top,right:n.left+e.outerWidth(),bottom:n.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var n=this,i=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(i.filter,this.element[0]),this._trigger("start",e),t(i.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=t.data(this,"selectable-item");i.startselected=!0,e.metaKey||e.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element}))}),t(e.target).parents().addBack().each(function(){var i,r=t.data(this,"selectable-item");return r?(i=!e.metaKey&&!e.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",e,{selecting:r.element}):n._trigger("unselecting",e,{unselecting:r.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,s=this.opos[0],o=this.opos[1],a=e.pageX,l=e.pageY;return s>a&&(n=a,a=s,s=n),o>l&&(n=l,l=o,o=n),this.helper.css({left:s,top:o,width:a-s,height:l-o}),this.selectees.each(function(){var n=t.data(this,"selectable-item"),u=!1;n&&n.element!==i.element[0]&&("touch"===r.tolerance?u=!(n.left>a||n.right<s||n.top>l||n.bottom<o):"fit"===r.tolerance&&(u=n.left>s&&n.right<a&&n.top>o&&n.bottom<l),u?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",e,{selecting:n.element}))):(n.selecting&&((e.metaKey||e.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",e,{unselecting:n.element}))),n.selected&&(e.metaKey||e.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element})))))
}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",e,{unselected:i.element})}),t(".ui-selecting",this.element[0]).each(function(){var i=t.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",e,{selected:i.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,n){return t>e&&e+n>t}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,n){"disabled"===e?(this.options[e]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,n){var i=null,r=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,s.widgetName+"-item")===s?(i=t(this),!1):void 0}),t.data(e.target,s.widgetName+"-item")===s&&(i=t(e.target)),i?!this.options.handle||n||(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(r=!0)}),r)?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,n,i){var r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,r,s,o=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-t(document).scrollTop()<o.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<o.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+o.scrollSpeed)),e.pageX-t(document).scrollLeft()<o.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<o.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+o.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],s=this._intersectsWithPointer(i),s&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==r&&!t.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],r):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,r=this.placeholder.offset();this.reverting=!0,t(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,s=t.left,o=s+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,h=this.offset.click.left,c=i+u>a&&l>i+u&&e+h>s&&o>e+h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?c:s<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&i,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return r?this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(t){var n=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&i||"left"===s&&!i:r&&("down"===r&&n||"up"===r&&!n)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,i,r,s,o=[],a=[],l=this._connectWith();if(l&&e)for(n=l.length-1;n>=0;n--)for(r=t(l[n]),i=r.length-1;i>=0;i--)s=t.data(r[i],this.widgetFullName),s&&s!==this&&!s.options.disabled&&a.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;n>=0;n--)a[n][0].each(function(){o.push(this)});return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,r,s,o,a,l,u,h=this.items,c=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(r=t(f[n]),i=r.length-1;i>=0;i--)s=t.data(r[i],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([t.isFunction(s.options.items)?s.options.items.call(s.element[0],e,{item:this.currentItem}):t(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],a=c[n][0],i=0,u=a.length;u>i;i++)l=t(a[i]),l.data(this.widgetName+"-item",o),h.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,s;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=r.outerWidth(),i.height=r.outerHeight()),s=r.offset(),i.left=s.left,i.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t(document.createElement(e.currentItem[0].nodeName)).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(t,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var n,i,r,s,o,a,l,u,h,c=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(c&&t.contains(this.containers[n].element[0],c.element[0]))continue;c=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1;else{for(r=1e4,s=null,o=this.containers[f].floating?"left":"top",a=this.containers[f].floating?"width":"height",l=this.positionAbs[o]+this.offset.click[o],i=this.items.length-1;i>=0;i--)t.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(u=this.items[i].item.offset()[o],h=!1,Math.abs(u-l)>Math.abs(u+this.items[i][a]-l)&&(h=!0,u+=this.items[i][a]),Math.abs(u-l)<r&&(r=Math.abs(u-l),s=this.items[i],this.direction=h?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[f],s?this._rearrange(e,s,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],n=t(r.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*i}},_generatePosition:function(e){var n,i,r=this.options,s=e.pageX,o=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((s-this.originalPageX)/r.grid[0])*r.grid[0],s=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,n){this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!n&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||n||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)n||r.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(i=0;i<r.length;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})}(jQuery),function(){var t;t=function(){function t(e,n){this.form_field=e,this.options=null!=n?n:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.results_option_build=function(t){var e,n,i,r,s;for(e="",s=this.results_data,i=0,r=s.length;r>i;i++)n=s[i],e+=n.group?this.result_add_group(n):this.result_add_option(n),(null!=t?t.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text));return e},t.prototype.result_add_option=function(t){var e,n;return t.search_match?this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),n=document.createElement("li"),n.className=e.join(" "),n.style.cssText=t.style,n.setAttribute("data-option-array-index",t.array_index),n.innerHTML=t.search_text,this.outerHTML(n)):"":""},t.prototype.result_add_group=function(t){var e;return t.search_match||t.group_match?t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):"":""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,n,i,r;for(i=this.results_data,r=[],e=0,n=i.length;n>e;e++)t=i[e],t.selected?r.push(t.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,n,i,r,s,o,a,l,u,h,c,f;for(this.no_results_clear(),r=0,o=this.get_search_text(),t=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",n=new RegExp(i+t,"i"),u=new RegExp(t,"i"),f=this.results_data,h=0,c=f.length;c>h;h++)e=f[h],e.search_match=!1,s=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(s=this.results_data[e.group_array_index],0===s.active_options&&s.search_match&&(r+=1),s.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,n),e.search_match&&!e.group&&(r+=1),e.search_match?(o.length&&(a=e.search_text.search(u),l=e.search_text.substr(0,a+o.length)+"</em>"+e.search_text.substr(a+o.length),e.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=s&&(s.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>r&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var n,i,r,s;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,s=i.length;s>r;r++)if(n=i[r],e.test(n))return!0},t.prototype.choices_count=function(){var t,e,n,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,n=i.length;n>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),window.AbstractChosen=t}.call(this),function(){var t;t=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,i,r,s,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),s=t.childNodes,o=[],i=0,r=s.length;r>i;i++)n=s[i],o.push(this.add_option(n,e,t.disabled));return o},t.prototype.add_option=function(t,e,n){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:n===!0?n:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0
},t.prototype.escapeExpression=function(t){var e,n;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(n,function(t){return e[t]||"&amp;"})):t},t}(),t.select_to_array=function(e){var n,i,r,s,o;for(i=new t,o=e.childNodes,r=0,s=o.length;s>r;r++)n=o[r],i.add_node(n);return i.parsed},window.SelectParser=t}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=jQuery,t.fn.extend({chosen:function(n){return AbstractChosen.browser_is_supported()?this.each(function(){var i,r;i=t(this),r=i.data("chosen"),"destroy"===n&&r?r.destroy():r||i.data("chosen",new e(this,n))}):this}}),e=function(e){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,n;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),n={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return t(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){return this.container.is(t(e.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,n,i,r,s;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),r=i+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),e=n+this.result_highlight.outerHeight(),e>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(s>n)return this.search_results.scrollTop(n)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},i.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(e),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},i.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(e){var n,i,r=this;return n=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?n.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),n.append(i)),this.search_container.before(n)},i.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,n;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),n=this.results_data[e[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},i.prototype.no_results=function(e){var n;return n=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(e),this.search_results.append(n)},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,n,i,r,s,o,a,l,u;if(this.is_multiple){for(i=0,a=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,u=o.length;u>l;l++)r=o[l],s+=r+":"+this.search_field.css(r)+";";return e=t("<div />",{style:s}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),n=this.container.outerWidth(),a>n-10&&(a=n-10),this.search_field.css({width:a+"px"})}},i}(AbstractChosen)}.call(this),function(){window.App=angular.module("Survey",["ngResource","ui.sortable","localytics.directives","chieffancypants.loadingBar","ngAnimate"]).config(["$locationProvider",function(t){return t.html5Mode(!0)}])}.call(this),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(t,e,n){return{require:"?ngModel",link:function(i,r,s,o){function a(t,e){return e&&"function"==typeof e?function(n,i){t(n,i),e(n,i)}:t}var l,u={},h={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(u,t),o?(i.$watch(s.ngModel+".length",function(){e(function(){r.sortable("refresh")})}),h.start=function(t,e){e.item.sortable={index:e.item.index(),cancel:function(){e.item.sortable._isCanceled=!0},isCanceled:function(){return e.item.sortable._isCanceled},_isCanceled:!1}},h.activate=function(){l=r.contents();var t=r.sortable("option","placeholder");if(t&&t.element&&"function"==typeof t.element){var e=t.element();e.jquery||(e=angular.element(e));var n=r.find('[class="'+e.attr("class")+'"]');l=l.not(n)}},h.update=function(t,e){e.item.sortable.received||(e.item.sortable.dropindex=e.item.index(),r.sortable("cancel")),l.detach().appendTo(r),e.item.sortable.received&&!e.item.sortable.isCanceled()&&i.$apply(function(){o.$modelValue.splice(e.item.sortable.dropindex,0,e.item.sortable.moved)})},h.stop=function(t,e){!e.item.sortable.received&&"dropindex"in e.item.sortable&&!e.item.sortable.isCanceled()?i.$apply(function(){o.$modelValue.splice(e.item.sortable.dropindex,0,o.$modelValue.splice(e.item.sortable.index,1)[0])}):"dropindex"in e.item.sortable&&!e.item.sortable.isCanceled()||l.detach().appendTo(r)},h.receive=function(t,e){e.item.sortable.received=!0},h.remove=function(t,e){e.item.sortable.isCanceled()||i.$apply(function(){e.item.sortable.moved=o.$modelValue.splice(e.item.sortable.index,1)[0]})},i.$watch(s.uiSortable,function(t){angular.forEach(t,function(t,e){h[e]&&("stop"===e&&(t=a(t,function(){i.$apply()})),t=a(h[e],t)),r.sortable("option",e,t)})},!0),angular.forEach(h,function(t,e){u[e]=a(t,u[e])})):n.info("ui.sortable: ngModel not provided!",r),r.sortable(u)}}}]),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("localytics.directives",[]),angular.module("localytics.directives").directive("chosen",function(){var e,n,i,r,s;return n=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,e=["noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width"],s=function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})},r=function(t){var e;if(angular.isArray(t))return 0===t.length;if(angular.isObject(t))for(e in t)if(t.hasOwnProperty(e))return!1;return!0},i={restrict:"A",require:"?ngModel",terminal:!0,link:function(i,o,a,l){var u,h,c,f,d,p,g,m,v,y,_,b;return o.addClass("localytics-chosen"),p=i.$eval(a.chosen)||{},angular.forEach(a,function(n,r){return t.call(e,r)>=0?p[s(r)]=i.$eval(n):void 0}),v=function(){return o.addClass("loading").attr("disabled",!0).trigger("chosen:updated")},y=function(){return o.removeClass("loading").attr("disabled",!1).trigger("chosen:updated")},f=!1,h=!1,c=function(){return f?o.trigger("chosen:updated"):(o.chosen(p),f=!0)},m=function(){return h=!1,o.find("option.empty").remove()},u=function(t){return h=!0,o.empty().append('<option selected class="empty">'+t+"</option>").attr("disabled",!0).trigger("chosen:updated")},l?(g=l.$render,l.$render=function(){return g(),c()},a.multiple&&(b=function(){return l.$viewValue},i.$watch(b,l.$render,!0))):c(),a.$observe("disabled",function(){return o.trigger("chosen:updated")}),a.ngOptions?(d=a.ngOptions.match(n),_=d[7],angular.isUndefined(i.$eval(_))&&v(),i.$watchCollection(_,function(t,e){return t!==e&&(h&&m(),y(),r(t))?u(p.no_results_text||"No values available"):void 0})):void 0}}})}.call(this),function(){"use strict";angular.module("angular-loading-bar",["chieffancypants.loadingBar"]),angular.module("chieffancypants.loadingBar",[]).config(["$httpProvider",function(t){var e=["$q","$cacheFactory","$rootScope","cfpLoadingBar",function(e,n,i,r){function s(){r.complete(),l=0,a=0}function o(e){var i,r=t.defaults;if("GET"!==e.method||e.cache===!1)return e.cached=!1,!1;i=e.cache===!0&&void 0===r.cache?n.get("$http"):void 0!==r.cache?r.cache:e.cache;var s=void 0!==i?void 0!==i.get(e.url):!1;return void 0!==e.cached&&s!==e.cached?e.cached:(e.cached=s,s)}var a=0,l=0;return{request:function(t){return t.ignoreLoadingBar||o(t)||(i.$broadcast("cfpLoadingBar:loading",{url:t.url}),0===a&&r.start(),a++,r.set(l/a)),t},response:function(t){return o(t.config)||(l++,i.$broadcast("cfpLoadingBar:loaded",{url:t.config.url}),l>=a?s():r.set(l/a)),t},responseError:function(t){return o(t.config)||(l++,i.$broadcast("cfpLoadingBar:loaded",{url:t.config.url}),l>=a?s():r.set(l/a)),e.reject(t)}}}];t.interceptors.push(e)}]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.parentSelector="body",this.$get=["$document","$timeout","$animate","$rootScope",function(t,e,n,i){function r(){e.cancel(h),m||(i.$broadcast("cfpLoadingBar:started"),m=!0,_&&n.enter(d,f),y&&n.enter(g,f),s(.02))}function s(t){if(m){var n=100*t+"%";p.css("width",n),v=t,e.cancel(u),u=e(function(){o()},250)}}function o(){if(!(a()>=1)){var t=0,e=a();t=e>=0&&.25>e?(3*Math.random()+3)/100:e>=.25&&.65>e?3*Math.random()/100:e>=.65&&.9>e?2*Math.random()/100:e>=.9&&.99>e?.005:0;var n=a()+t;s(n)}}function a(){return v}function l(){i.$broadcast("cfpLoadingBar:completed"),s(1),h=e(function(){n.leave(d,function(){v=0,m=!1}),n.leave(g)},500)}var u,h,c=this.parentSelector,f=t.find(c),d=angular.element('<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>'),p=d.find("div").eq(0),g=angular.element('<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>'),m=!1,v=0,y=this.includeSpinner,_=this.includeBar;return{start:r,set:s,status:a,inc:o,complete:l,includeSpinner:this.includeSpinner,parentSelector:this.parentSelector}}]})}(),function(){App.controller("InstrumentsCtrl",["$scope","Instrument","Question",function(t,e){return t.initialize=function(n){return t.project_id=n,t.instruments=e.query({project_id:n})}}])}.call(this),function(){App.controller("OptionsCtrl",["$scope","Option",function(t,e){return t.options=[],t.init=function(e,n,i){return t.project_id=e,t.instrument_id=n,t.question_id=i,n&&i?t.options=t.queryOptions():void 0},t.queryOptions=function(){return e.query({project_id:t.project_id,instrument_id:t.instrument_id,question_id:t.question_id})},t.$on("SAVE_QUESTION",function(e,n){return t.question_id!==n&&t.question_id?void 0:(angular.forEach(t.options,function(e){return t.question_id=n,e.project_id=t.project_id,e.instrument_id=t.instrument_id,e.question_id=t.question_id,e.id?e.$update():e.$save()}),t.options=t.queryOptions())}),t.$on("CANCEL_QUESTION",function(){return t.options=t.queryOptions()}),t.removeOption=function(e){return t.options.splice(t.options.indexOf(e),1),e.project_id=t.project_id,e.instrument_id=t.instrument_id,e.question_id=t.question_id,e.$delete()},t.addOption=function(){var n;return n=new e,n.project_id=t.project_id,n.instrument_id=t.instrument_id,n.question_id=t.question_id,t.options.push(n)}}])}.call(this),function(){App.controller("ProjectsCtrl",["$scope","$location","Project",function(t,e,n){return t.projects=n.query(),t.viewProject=function(t){return e.url("/projects/"+t).replace()},t.viewInstruments=function(){return e.url("/instruments").replace()}}])}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};App.controller("QuestionsCtrl",["$scope","Question",function(e,n){return e.questions=[],e.selectedQuestions=[],e.init=function(t,i){return e.project_id=t,e.instrument_id=i,e.questions=n.query({project_id:t,instrument_id:i})},e.sortableOptions={cursor:"move",handle:".move-question",axis:"y",stop:function(){return e.updateQuestionNumbers()}},e.updateQuestionNumbers=function(){return angular.forEach(e.questions,function(t,n){return t.number_in_instrument=n+1,t.id?(t.project_id=e.project_id,t.$update()):void 0})},e.editQuestion=function(t){return e.edit_question=t,e.edit_question.project_id=e.project_id,e.edit_question.instrument_id=e.instrument_id},e.newQuestion=function(){var t;return t=new n,t.project_id=e.project_id,t.instrument_id=e.instrument_id,t.number_in_instrument=e.questions.length+1,t.question_identifier="q_"+t.project_id+"_"+t.instrument_id+"_"+e.uniqueId(),e.questions.push(t),e.edit_question=t},e.saveQuestion=function(){return e.edit_question.id?e.edit_question.$update({},function(t){return e.$broadcast("SAVE_QUESTION",t.id),e.updateQuestionNumbers()},function(){return alert("Error updating question")}):e.edit_question.$save({},function(t){return e.$broadcast("SAVE_QUESTION",t.id),e.updateQuestionNumbers()},function(){return alert("Error saving question")}),e.edit_question=null},e.cancelQuestion=function(){return e.$broadcast("CANCEL_QUESTION"),e.edit_question=null},e.toggleSelection=function(t){return e.questionSelected(t)?e.selectedQuestions.splice(e.selectedQuestions.indexOf(t),1):e.selectedQuestions.push(t)},e.questionSelected=function(n){return t.call(e.selectedQuestions,n)>=0},e.deleteQuestion=function(t){return confirm("Are you sure you want to delete this question?")?(t.project_id=e.project_id,t.$delete(),e.questions.splice(e.questions.indexOf(t),1),e.updateQuestionNumbers()):void 0},e.uniqueId=function(){return(new Date).getTime().toString(36).split("").reverse().join("")},e.questionsBefore=function(t){return e.questions.slice(0,e.questions.indexOf(t))},e.questionsAfter=function(t){return e.questions.slice(e.questions.indexOf(t)+1,e.questions.length)},e.questionTypes=function(){return["SELECT_ONE","SELECT_MULTIPLE","SELECT_ONE_WRITE_OTHER","SELECT_MULTIPLE_WRITE_OTHER","FREE_RESPONSE","SLIDER","DATE","RATING","TIME"]},e.questionTypesWithOptions=function(t){return"SELECT_ONE"===t||"SELECT_MULTIPLE"===t||"SELECT_ONE_WRITE_OTHER"===t||"SELECT_MULTIPLE_WRITE_OTHER"===t}}])}.call(this),function(){App.factory("Instrument",["$resource",function(t){return t("/api/v1/projects/:project_id/instruments/:id",{project_id:"@project_id",id:"@id"})}])}.call(this),function(){App.factory("Option",["$resource",function(t){return t("/api/v1/projects/:project_id/instruments/:instrument_id/questions/:question_id/options/:id",{project_id:"@project_id",instrument_id:"@instrument_id",question_id:"@question_id",id:"@id"},{update:{method:"PUT"}})}])}.call(this),function(){App.factory("Project",["$resource",function(t){return t("/api/v1/projects/:id",{id:"@id"})}])}.call(this),function(){App.factory("Question",["$resource",function(t){return t("/api/v1/projects/:project_id/instruments/:instrument_id/questions/:id",{project_id:"@project_id",instrument_id:"@instrument_id",id:"@id"},{update:{method:"PUT"}})}])}.call(this),function(){jQuery(function(){return $("a[rel=popover]").popover(),$(".tooltip").tooltip(),$("a[rel=tooltip]").tooltip()})}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this);